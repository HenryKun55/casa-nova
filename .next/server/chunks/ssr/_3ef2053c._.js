module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},78138,a=>{"use strict";let b=(0,a.i(70106).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);a.s(["Gift",()=>b],78138)},78360,70025,33140,a=>{"use strict";var b=a.i(33217),c=a.i(72131),d=a.i(12794),e=a.i(18544),f=a.i(33791),g=a.i(42871),h=class extends f.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,g.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,g.hashKey)(b.mutationKey)!==(0,g.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,d.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){e.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},i=a.i(37927);function j(a,b){let d=(0,i.useQueryClient)(b),[f]=c.useState(()=>new h(d,a));c.useEffect(()=>{f.setOptions(a)},[f,a]);let j=c.useSyncExternalStore(c.useCallback(a=>f.subscribe(e.notifyManager.batchCalls(a)),[f]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k=c.useCallback((a,b)=>{f.mutate(a,b).catch(g.noop)},[f]);if(j.error&&(0,g.shouldThrowError)(f.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}function k(){return(0,b.useQuery)({queryKey:["produtos"],queryFn:async()=>{let a=await fetch("/api/produtos");if(!a.ok)throw Error("Erro ao carregar produtos");return a.json()}})}function l(){let a=(0,i.useQueryClient)();return j({mutationFn:async a=>{let b=await fetch("/api/produtos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).error||"Erro ao criar produto");return b.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["produtos"]})}})}function m(a){let b=(0,i.useQueryClient)();return j({mutationFn:async b=>{let c=await fetch(`/api/produtos/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).error||"Erro ao atualizar produto");return c.json()},onSuccess:()=>{b.invalidateQueries({queryKey:["produtos"]}),b.invalidateQueries({queryKey:["produtos",a]})}})}function n(){let a=(0,i.useQueryClient)();return j({mutationFn:async a=>{let b=await fetch(`/api/produtos/${a}`,{method:"DELETE"});if(!b.ok)throw Error((await b.json()).error||"Erro ao deletar produto");return b.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["produtos"]})}})}a.s(["useMutation",()=>j],70025),a.s(["useCreateProduto",()=>l,"useDeleteProduto",()=>n,"useProdutos",()=>k,"useUpdateProduto",()=>m],78360);var o=a.i(87924),p=a.i(68114);function q({className:a,...b}){return(0,o.jsx)("div",{className:(0,p.cn)("animate-pulse rounded-md bg-primary/10",a),...b})}a.s(["Skeleton",()=>q],33140)},68628,a=>{"use strict";var b=a.i(33217),c=a.i(70025),d=a.i(37927);function e(){return(0,b.useQuery)({queryKey:["reservas"],queryFn:async()=>{let a=await fetch("/api/reservas");if(!a.ok)throw Error("Erro ao carregar reservas");return a.json()}})}function f(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:async a=>{let b=await fetch("/api/reservas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).error||"Erro ao criar reserva");return b.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["reservas"]}),a.invalidateQueries({queryKey:["produtos"]})}})}a.s(["useCreateReserva",()=>f,"useReservas",()=>e])},40747,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(78360),e=a.i(23943),f=a.i(95245),g=a.i(59501),h=a.i(56757),i=a.i(14574),j=a.i(41921),k=a.i(66718),l=a.i(29246),m=a.i(99570),n=a.i(68628),o=a.i(23292),p=a.i(96221);let q=h.z.object({nomeConvidado:h.z.string().min(2,"Nome deve ter pelo menos 2 caracteres"),emailConvidado:h.z.string().email("Email invÃ¡lido").optional().or(h.z.literal("")),whatsapp:h.z.string().optional(),mensagem:h.z.string().optional()});function r({produto:a,open:d,onOpenChange:e}){let h=(0,n.useCreateReserva)(),[r,s]=(0,c.useState)(!1),t=(0,f.useForm)({resolver:(0,g.zodResolver)(q),defaultValues:{nomeConvidado:"",emailConvidado:"",whatsapp:"",mensagem:""}}),u=async b=>{if(a)try{await h.mutateAsync({produtoId:a.id,...b}),s(!0),o.toast.success("Presente reservado com sucesso! ðŸŽ‰"),t.reset(),setTimeout(()=>{e(!1),s(!1)},2e3)}catch(a){o.toast.error(a instanceof Error?a.message:"Erro ao reservar presente")}};if(!a)return null;let v=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(a.preco));return(0,b.jsx)(i.Dialog,{open:d,onOpenChange:e,children:(0,b.jsx)(i.DialogContent,{className:"sm:max-w-[500px]",children:r?(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)("div",{className:"mb-4 text-6xl",children:"ðŸŽ‰"}),(0,b.jsx)(i.DialogTitle,{className:"mb-2 text-2xl",children:"Obrigado!"}),(0,b.jsx)(i.DialogDescription,{children:"Seu presente foi reservado com sucesso. O casal vai adorar!"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Reservar Presente"}),(0,b.jsxs)(i.DialogDescription,{children:[a.nome," â€¢ ",v]})]}),(0,b.jsx)(j.Form,{...t,children:(0,b.jsxs)("form",{onSubmit:t.handleSubmit(u),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:t.control,name:"nomeConvidado",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Seu Nome *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"JoÃ£o Silva",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:t.control,name:"emailConvidado",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Email (opcional)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"email",placeholder:"joao@email.com",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:t.control,name:"whatsapp",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"WhatsApp (opcional)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"(11) 99999-9999",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:t.control,name:"mensagem",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Mensagem Carinhosa (opcional)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(l.Textarea,{placeholder:"Deixe uma mensagem especial para o casal...",className:"resize-none",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>e(!1),className:"flex-1",children:"Cancelar"}),(0,b.jsx)(m.Button,{type:"submit",disabled:h.isPending,className:"flex-1",children:h.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Reservando..."]}):"Confirmar Reserva"})]})]})})]})})})}var s=a.i(33140),t=a.i(87532),u=a.i(38246);function v(){let{data:a,isLoading:f}=(0,d.useProdutos)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(""),[l,n]=(0,c.useState)(null),o=Array.from(new Set(a?.map(a=>a.categoria).filter(Boolean))),p=a?.filter(a=>{let b=a.nome.toLowerCase().includes(i.toLowerCase()),c=!l||a.categoria===l;return b&&c}),q=a?.length||0,v=a?.filter(a=>a.reserva).length||0,w=q>0?v/q*100:0;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-pink-50",children:[(0,b.jsx)("header",{className:"border-b bg-white/80 backdrop-blur-sm",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-rose-600",children:"ChÃ¡ de Casa Nova"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Escolha um presente especial para nÃ³s"})]}),(0,b.jsx)(u.default,{href:"/",children:(0,b.jsx)(m.Button,{variant:"outline",children:"Voltar ao InÃ­cio"})})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 rounded-lg bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Progresso da Lista"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[v," de ",q," presentes reservados"]})]}),(0,b.jsx)("div",{className:"h-3 overflow-hidden rounded-full bg-rose-100",children:(0,b.jsx)("div",{className:"h-full bg-rose-500 transition-all duration-500",style:{width:`${w}%`}})})]}),(0,b.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(k.Input,{placeholder:"Buscar presente...",value:i,onChange:a=>j(a.target.value),className:"pl-10"})]}),o.length>0&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(m.Button,{variant:null===l?"default":"outline",size:"sm",onClick:()=>n(null),children:"Todas"}),o.map(a=>(0,b.jsx)(m.Button,{variant:l===a?"default":"outline",size:"sm",onClick:()=>n(a),children:a},a))]})]}),f?(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((a,c)=>(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(s.Skeleton,{className:"aspect-square w-full"}),(0,b.jsx)(s.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(s.Skeleton,{className:"h-4 w-1/2"})]},c))}):p&&p.length>0?(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:p.map(a=>(0,b.jsx)(e.ProductCard,{produto:a,onReservar:h},a.id))}):(0,b.jsx)("div",{className:"py-12 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:i||l?"Nenhum produto encontrado com os filtros aplicados":"Ainda nÃ£o hÃ¡ produtos na lista"})})]}),(0,b.jsx)(r,{produto:g,open:!!g,onOpenChange:a=>!a&&h(null)})]})}a.s(["default",()=>v],40747)}];

//# sourceMappingURL=_3ef2053c._.js.map