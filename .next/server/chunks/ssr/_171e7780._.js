module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},92603,(a,b,c)=>{"use strict";function d(a,b,c){if(a){for(let d of(c&&(c=c.toLowerCase()),a))if(b===d.domain?.split(":",1)[0].toLowerCase()||c===d.defaultLocale.toLowerCase()||d.locales?.some(a=>a.toLowerCase()===c))return d}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"detectDomainLocale",{enumerable:!0,get:function(){return d}})},71442,(a,b,c)=>{"use strict";function d(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"parsePath",{enumerable:!0,get:function(){return d}})},91150,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${b}${c}${e}${f}`}},47074,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${c}${b}${e}${f}`}},39481,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},7700,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addLocale",{enumerable:!0,get:function(){return f}});let d=a.r(91150),e=a.r(39481);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,`/${b.toLowerCase()}`))?a:(0,d.addPathPrefix)(a,`/${b}`)}},97642,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=a.r(74993),e=a.r(91150),f=a.r(47074),g=a.r(7700);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,`/_next/data/${a.buildId}`),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},64239,(a,b,c)=>{"use strict";function d(a,b){let c;if(b?.host&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getHostname",{enumerable:!0,get:function(){return d}})},61601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(39481);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:`/${c}`}},94971,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=a.r(3885),e=a.r(61601),f=a.r(39481);function g(a,b){let{basePath:c,i18n:g,trailingSlash:h}=b.nextConfig??{},i={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):h};c&&(0,f.pathHasPrefix)(i.pathname,c)&&(i.pathname=(0,e.removePathPrefix)(i.pathname,c),i.basePath=c);let j=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let a=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=a[0],j="index"!==a[1]?`/${a.slice(1).join("/")}`:"/",!0===b.parseData&&(i.pathname=j)}if(g){let a=b.i18nProvider?b.i18nProvider.analyze(i.pathname):(0,d.normalizeLocalePath)(i.pathname,g.locales);i.locale=a.detectedLocale,i.pathname=a.pathname??i.pathname,!a.detectedLocale&&i.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(j):(0,d.normalizeLocalePath)(j,g.locales)).detectedLocale&&(i.locale=a.detectedLocale)}return i}},22670,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextURL",{enumerable:!0,get:function(){return k}});let d=a.r(92603),e=a.r(97642),f=a.r(64239),g=a.r(94971),h=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function i(a,b){return new URL(String(a).replace(h,"localhost"),b&&String(b).replace(h,"localhost"))}let j=Symbol("NextURLInternal");class k{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[j]={url:i(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,e,h;let i=(0,g.getNextPathnameInfo)(this[j].url.pathname,{nextConfig:this[j].options.nextConfig,parseData:!0,i18nProvider:this[j].options.i18nProvider}),k=(0,f.getHostname)(this[j].url,this[j].options.headers);this[j].domainLocale=this[j].options.i18nProvider?this[j].options.i18nProvider.detectDomainLocale(k):(0,d.detectDomainLocale)(null==(b=this[j].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,k);let l=(null==(c=this[j].domainLocale)?void 0:c.defaultLocale)||(null==(h=this[j].options.nextConfig)||null==(e=h.i18n)?void 0:e.defaultLocale);this[j].url.pathname=i.pathname,this[j].defaultLocale=l,this[j].basePath=i.basePath??"",this[j].buildId=i.buildId,this[j].locale=i.locale??l,this[j].trailingSlash=i.trailingSlash}formatPathname(){return(0,e.formatNextPathnameInfo)({basePath:this[j].basePath,buildId:this[j].buildId,defaultLocale:this[j].options.forceLocale?void 0:this[j].defaultLocale,locale:this[j].locale,pathname:this[j].url.pathname,trailingSlash:this[j].trailingSlash})}formatSearch(){return this[j].url.search}get buildId(){return this[j].buildId}set buildId(a){this[j].buildId=a}get locale(){return this[j].locale??""}set locale(a){var b,c;if(!this[j].locale||!(null==(c=this[j].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[j].locale=a}get defaultLocale(){return this[j].defaultLocale}get domainLocale(){return this[j].domainLocale}get searchParams(){return this[j].url.searchParams}get host(){return this[j].url.host}set host(a){this[j].url.host=a}get hostname(){return this[j].url.hostname}set hostname(a){this[j].url.hostname=a}get port(){return this[j].url.port}set port(a){this[j].url.port=a}get protocol(){return this[j].url.protocol}set protocol(a){this[j].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[j].url=i(a),this.analyze()}get origin(){return this[j].url.origin}get pathname(){return this[j].url.pathname}set pathname(a){this[j].url.pathname=a}get hash(){return this[j].url.hash}set hash(a){this[j].url.hash=a}get search(){return this[j].url.search}set search(a){this[j].url.search=a}get password(){return this[j].url.password}set password(a){this[j].url.password=a}get username(){return this[j].url.username}set username(a){this[j].url.username=a}get basePath(){return this[j].basePath}set basePath(a){this[j].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new k(String(this),this[j].options)}}},89753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={PageSignatureError:function(){return f},RemovedPageError:function(){return g},RemovedUAError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class g extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class h extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},63681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36226)},88491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={INTERNALS:function(){return j},NextRequest:function(){return k}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(22670),g=a.r(92273),h=a.r(89753),i=a.r(63681),j=Symbol("internal request");class k extends Request{constructor(a,b={}){const c="string"!=typeof a&&"url"in a?a.url:String(a);(0,g.validateURL)(c),b.body&&"half"!==b.duplex&&(b.duplex="half"),a instanceof Request?super(a,b):super(c,b);const d=new f.NextURL(c,{headers:(0,g.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:b.nextConfig});this[j]={cookies:new i.RequestCookies(this.headers),nextUrl:d,url:d.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[j].cookies}get nextUrl(){return this[j].nextUrl}get page(){throw new h.RemovedPageError}get ua(){throw new h.RemovedUAError}get url(){return this[j].url}}},51409,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},51978,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextResponse",{enumerable:!0,get:function(){return l}});let d=a.r(63681),e=a.r(22670),f=a.r(92273),g=a.r(51409),h=a.r(63681),i=Symbol("internal response"),j=new Set([301,302,303,307,308]);function k(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class l extends Response{constructor(a,b={}){super(a,b);const c=this.headers,j=new Proxy(new h.ResponseCookies(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),i=new Headers(c);return g instanceof h.ResponseCookies&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.stringifyCookie)(a)).join(",")),k(b,i),g};default:return g.ReflectAdapter.get(a,e,f)}}});this[i]={cookies:j,url:b.url?new e.NextURL(b.url,{headers:(0,f.toNodeOutgoingHttpHeaders)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(a,b){let c=Response.json(a,b);return new l(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!j.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.validateURL)(a)),new l(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.validateURL)(a)),k(b,c),new l(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),k(a,b),new l(null,{...a,headers:b})}}},58176,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ImageResponse",{enumerable:!0,get:function(){return d}})},6431,(a,b,c)=>{var d={226:function(b,c){!function(d,e){"use strict";var f="function",g="undefined",h="object",i="string",j="major",k="model",l="name",m="type",n="vendor",o="version",p="architecture",q="console",r="mobile",s="tablet",t="smarttv",u="wearable",v="embedded",w="Amazon",x="Apple",y="ASUS",z="BlackBerry",A="Browser",B="Chrome",C="Firefox",D="Google",E="Huawei",F="Microsoft",G="Motorola",H="Opera",I="Samsung",J="Sharp",K="Sony",L="Xiaomi",M="Zebra",N="Facebook",O="Chromium OS",P="Mac OS",Q=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},R=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},S=function(a,b){return typeof a===i&&-1!==T(b).indexOf(T(a))},T=function(a){return a.toLowerCase()},U=function(a,b){if(typeof a===i)return a=a.replace(/^\s\s*/,""),typeof b===g?a:a.substring(0,350)},V=function(a,b){for(var c,d,e,g,i,j,k=0;k<b.length&&!i;){var l=b[k],m=b[k+1];for(c=d=0;c<l.length&&!i&&l[c];)if(i=l[c++].exec(a))for(e=0;e<m.length;e++)j=i[++d],typeof(g=m[e])===h&&g.length>0?2===g.length?typeof g[1]==f?this[g[0]]=g[1].call(this,j):this[g[0]]=g[1]:3===g.length?typeof g[1]!==f||g[1].exec&&g[1].test?this[g[0]]=j?j.replace(g[1],g[2]):void 0:this[g[0]]=j?g[1].call(this,j,g[2]):void 0:4===g.length&&(this[g[0]]=j?g[3].call(this,j.replace(g[1],g[2])):void 0):this[g]=j||void 0;k+=2}},W=function(a,b){for(var c in b)if(typeof b[c]===h&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(S(b[c][d],a))return"?"===c?void 0:c}else if(S(b[c],a))return"?"===c?void 0:c;return a},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[o,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[o,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,o],[/opios[\/ ]+([\w\.]+)/i],[o,[l,H+" Mini"]],[/\bopr\/([\w\.]+)/i],[o,[l,H]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,o],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[o,[l,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[o,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[o,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[o,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[o,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[o,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+A],o],[/\bfocus\/([\w\.]+)/i],[o,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[o,[l,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[o,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[o,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[o,[l,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[o,[l,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[o,[l,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+A],o],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],o],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,o],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,N],o],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,o],[/\bgsa\/([\w\.]+) .*safari\//i],[o,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[o,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[o,[l,B+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,B+" WebView"],o],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[o,[l,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,o],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[o,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[o,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[o,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,o],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],o],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[o,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,o],[/(cobalt)\/([\w\.]+)/i],[l,[o,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,T]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",T]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,T]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[k,[n,I],[m,s]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[k,[n,I],[m,r]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[k,[n,x],[m,r]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[k,[n,x],[m,s]],[/(macintosh);/i],[k,[n,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[k,[n,J],[m,r]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[k,[n,E],[m,s]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[k,[n,E],[m,r]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,r]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,s]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[k,[n,"OPPO"],[m,r]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[k,[n,"Vivo"],[m,r]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[k,[n,"Realme"],[m,r]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[k,[n,G],[m,r]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[k,[n,G],[m,s]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[k,[n,"LG"],[m,s]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[k,[n,"LG"],[m,r]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[k,[n,"Lenovo"],[m,s]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[k,/_/g," "],[n,"Nokia"],[m,r]],[/(pixel c)\b/i],[k,[n,D],[m,s]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[k,[n,D],[m,r]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[k,[n,K],[m,r]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[k,"Xperia Tablet"],[n,K],[m,s]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[k,[n,"OnePlus"],[m,r]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[k,[n,w],[m,s]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[k,/(.+)/g,"Fire Phone $1"],[n,w],[m,r]],[/(playbook);[-\w\),; ]+(rim)/i],[k,n,[m,s]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[k,[n,z],[m,r]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[k,[n,y],[m,s]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[k,[n,y],[m,r]],[/(nexus 9)/i],[k,[n,"HTC"],[m,s]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[n,[k,/_/g," "],[m,r]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[k,[n,"Acer"],[m,s]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[k,[n,"Meizu"],[m,r]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[n,k,[m,r]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[n,k,[m,s]],[/(surface duo)/i],[k,[n,F],[m,s]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[k,[n,"Fairphone"],[m,r]],[/(u304aa)/i],[k,[n,"AT&T"],[m,r]],[/\bsie-(\w*)/i],[k,[n,"Siemens"],[m,r]],[/\b(rct\w+) b/i],[k,[n,"RCA"],[m,s]],[/\b(venue[\d ]{2,7}) b/i],[k,[n,"Dell"],[m,s]],[/\b(q(?:mv|ta)\w+) b/i],[k,[n,"Verizon"],[m,s]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[k,[n,"Barnes & Noble"],[m,s]],[/\b(tm\d{3}\w+) b/i],[k,[n,"NuVision"],[m,s]],[/\b(k88) b/i],[k,[n,"ZTE"],[m,s]],[/\b(nx\d{3}j) b/i],[k,[n,"ZTE"],[m,r]],[/\b(gen\d{3}) b.+49h/i],[k,[n,"Swiss"],[m,r]],[/\b(zur\d{3}) b/i],[k,[n,"Swiss"],[m,s]],[/\b((zeki)?tb.*\b) b/i],[k,[n,"Zeki"],[m,s]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[n,"Dragon Touch"],k,[m,s]],[/\b(ns-?\w{0,9}) b/i],[k,[n,"Insignia"],[m,s]],[/\b((nxa|next)-?\w{0,9}) b/i],[k,[n,"NextBook"],[m,s]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[n,"Voice"],k,[m,r]],[/\b(lvtel\-)?(v1[12]) b/i],[[n,"LvTel"],k,[m,r]],[/\b(ph-1) /i],[k,[n,"Essential"],[m,r]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[k,[n,"Envizen"],[m,s]],[/\b(trio[-\w\. ]+) b/i],[k,[n,"MachSpeed"],[m,s]],[/\btu_(1491) b/i],[k,[n,"Rotor"],[m,s]],[/(shield[\w ]+) b/i],[k,[n,"Nvidia"],[m,s]],[/(sprint) (\w+)/i],[n,k,[m,r]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[n,F],[m,r]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[k,[n,M],[m,s]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[k,[n,M],[m,r]],[/smart-tv.+(samsung)/i],[n,[m,t]],[/hbbtv.+maple;(\d+)/i],[[k,/^/,"SmartTV"],[n,I],[m,t]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[n,"LG"],[m,t]],[/(apple) ?tv/i],[n,[k,x+" TV"],[m,t]],[/crkey/i],[[k,B+"cast"],[n,D],[m,t]],[/droid.+aft(\w)( bui|\))/i],[k,[n,w],[m,t]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[k,[n,J],[m,t]],[/(bravia[\w ]+)( bui|\))/i],[k,[n,K],[m,t]],[/(mitv-\w{5}) bui/i],[k,[n,L],[m,t]],[/Hbbtv.*(technisat) (.*);/i],[n,k,[m,t]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[n,U],[k,U],[m,t]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,t]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[n,k,[m,q]],[/droid.+; (shield) bui/i],[k,[n,"Nvidia"],[m,q]],[/(playstation [345portablevi]+)/i],[k,[n,K],[m,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[k,[n,F],[m,q]],[/((pebble))app/i],[n,k,[m,u]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[k,[n,x],[m,u]],[/droid.+; (glass) \d/i],[k,[n,D],[m,u]],[/droid.+; (wt63?0{2,3})\)/i],[k,[n,M],[m,u]],[/(quest( 2| pro)?)/i],[k,[n,N],[m,u]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[n,[m,v]],[/(aeobc)\b/i],[k,[n,w],[m,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[k,[m,r]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[k,[m,s]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,s]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,r]],[/(android[-\w\. ]{0,9});.+buil/i],[k,[n,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[o,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[o,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,o],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[o,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,o],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[o,W,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[o,W,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[o,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,P],[o,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[o,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,o],[/\(bb(10);/i],[o,[l,z]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[o,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[o,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[o,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[o,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[o,[l,B+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,O],o],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,o],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],o],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,o]]},Z=function(a,b){if(typeof a===h&&(b=a,a=void 0),!(this instanceof Z))return new Z(a,b).getResult();var c=typeof d!==g&&d.navigator?d.navigator:void 0,e=a||(c&&c.userAgent?c.userAgent:""),q=c&&c.userAgentData?c.userAgentData:void 0,t=b?Q(Y,b):Y,u=c&&c.userAgent==e;return this.getBrowser=function(){var a,b={};return b[l]=void 0,b[o]=void 0,V.call(b,e,t.browser),b[j]=typeof(a=b[o])===i?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0,u&&c&&c.brave&&typeof c.brave.isBrave==f&&(b[l]="Brave"),b},this.getCPU=function(){var a={};return a[p]=void 0,V.call(a,e,t.cpu),a},this.getDevice=function(){var a={};return a[n]=void 0,a[k]=void 0,a[m]=void 0,V.call(a,e,t.device),u&&!a[m]&&q&&q.mobile&&(a[m]=r),u&&"Macintosh"==a[k]&&c&&typeof c.standalone!==g&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[k]="iPad",a[m]=s),a},this.getEngine=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.engine),a},this.getOS=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.os),u&&!a[l]&&q&&"Unknown"!=q.platform&&(a[l]=q.platform.replace(/chrome os/i,O).replace(/macos/i,P)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(a){return e=typeof a===i&&a.length>350?U(a,350):a,this},this.setUA(e),this};if(Z.VERSION="1.0.35",Z.BROWSER=R([l,o,j]),Z.CPU=R([p]),Z.DEVICE=R([k,n,m,q,r,t,s,u,v]),Z.ENGINE=Z.OS=R([l,o]),typeof c!==g)b.exports&&(c=b.exports=Z),c.UAParser=Z;else if(typeof define===f&&define.amd)a.r,void 0!==Z&&a.v(Z);else typeof d!==g&&(d.UAParser=Z);var $=typeof d!==g&&(d.jQuery||d.Zepto);if($&&!$.ua){var _=new Z;$.ua=_.getResult(),$.ua.get=function(){return _.getUA()},$.ua.set=function(a){_.setUA(a);var b=_.getResult();for(var c in b)$.ua[c]=b[c]}}}(this)}},e={};function f(a){var b=e[a];if(void 0!==b)return b.exports;var c=e[a]={exports:{}},g=!0;try{d[a].call(c.exports,c,c.exports,f),g=!1}finally{g&&delete e[a]}return c.exports}f.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",b.exports=f(226)},40881,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={isBot:function(){return h},userAgent:function(){return j},userAgentFromString:function(){return i}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=(d=a.r(6431))&&d.__esModule?d:{default:d};function h(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function i(a){return{...(0,g.default)(a),isBot:void 0!==a&&h(a)}}function j({headers:a}){return i(a.get("user-agent")||void 0)}},50792,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"URLPattern",{enumerable:!0,get:function(){return d}});let d="undefined"==typeof URLPattern?void 0:URLPattern},51455,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"after",{enumerable:!0,get:function(){return e}});let d=a.r(56704);function e(a){let b=d.workAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}},89969,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),d=a.r(51455),e=c,Object.keys(d).forEach(function(a){"default"===a||Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})})},96556,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60312,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},13091,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},17491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},61933,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},49640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},28340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},31382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(50640),h=a.r(28340);var i=((d={})[d.Static=1]="Static",d[d.Runtime=2]="Runtime",d[d.Dynamic=3]="Dynamic",d);class j{constructor(a=null){this.abortSignal=a,this.currentStage=1,this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),a&&a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0})}advanceStage(a){!(this.currentStage>=a)&&(this.currentStage=a,a>=2&&this.runtimeStagePromise.resolve(),a>=3&&this.dynamicStagePromise.resolve())}getStagePromise(a){switch(a){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},60384,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return D},PreludeState:function(){return Z},abortAndThrowOnSynchronousRequestDataAccess:function(){return C},abortOnSynchronousPlatformIOAccess:function(){return A},accessedDynamicData:function(){return L},annotateDynamicAccess:function(){return Q},consumeDynamicAccess:function(){return M},createDynamicTrackingState:function(){return t},createDynamicValidationState:function(){return u},createHangingInputAbortSignal:function(){return P},createRenderInBrowserAbortSignal:function(){return O},delayUntilRuntimeStage:function(){return aa},formatDynamicAPIAccesses:function(){return N},getFirstDynamicReason:function(){return v},isDynamicPostpone:function(){return G},isPrerenderInterruptedError:function(){return K},logDisallowedDynamicError:function(){return $},markCurrentScopeAsDynamic:function(){return w},postponeWithTracking:function(){return E},throwIfDisallowedDynamic:function(){return _},throwToInterruptStaticGeneration:function(){return x},trackAllowedDynamicAccess:function(){return Y},trackDynamicDataInDynamicRender:function(){return y},trackSynchronousPlatformIOAccessInDev:function(){return B},useDynamicRouteParams:function(){return R},useDynamicSearchParams:function(){return S}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(717))&&d.__esModule?d:{default:d},i=a.r(96556),j=a.r(60312),k=a.r(32319),l=a.r(56704),m=a.r(13091),n=a.r(17491),o=a.r(61933),p=a.r(49640),q=a.r(50640),r=a.r(31382),s="function"==typeof h.default.unstable_postpone;function t(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function u(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function w(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return E(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function x(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function y(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function z(a,b,c){let d=J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function A(a,b,c,d){let e=d.dynamicTracking;z(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function B(a){a.stagedRendering&&a.stagedRendering.advanceStage(r.RenderStage.Dynamic)}function C(a,b,c,d){if(!1===d.controller.signal.aborted){z(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function D({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();E(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function E(a,b,c){(function(){if(!s)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(F(a,b))}function F(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function G(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&H(a.message)}function H(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===H(F("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let I="NEXT_PRERENDER_INTERRUPTED";function J(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=I,b}function K(a){return"object"==typeof a&&null!==a&&a.digest===I&&"name"in a&&"message"in a&&a instanceof Error}function L(a){return a.length>0}function M(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function N(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function O(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function P(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function Q(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function R(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return E(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function S(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let T=/\n\s+at Suspense \(<anonymous>\)/,U=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),V=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),X=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function Y(a,b,c,d){if(!X.test(b)){if(V.test(b)){c.hasDynamicMetadata=!0;return}if(W.test(b)){c.hasDynamicViewport=!0;return}if(U.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(T.test(b)){c.hasAllowedDynamic=!0;return}else{var e,f;let g;if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let h=(e=`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,f=b,(g=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})).stack=g.name+": "+e+f,g);return void c.dynamicErrors.push(h)}}}var Z=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function $(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function _(a,b,c,d){if(d.syncDynamicErrorWithStack)throw $(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)$(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function aa(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},86309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(60312),g=a.r(24725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},29574,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"connection",{enumerable:!0,get:function(){return j}});let d=a.r(56704),e=a.r(32319),f=a.r(60384),g=a.r(60312),h=a.r(13091),i=a.r(86309);function j(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(b&&"after"===b.phase&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new g.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,h.makeHangingPromise)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,f.postponeWithTracking)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,f.throwToInterruptStaticGeneration)("connection",a,b);case"request":return(0,f.trackDynamicDataInDynamicRender)(b),Promise.resolve(void 0)}}(0,e.throwForMissingRequestStore)("connection")}a.r(31382)},43405,(a,b,c)=>{let d={NextRequest:a.r(88491).NextRequest,NextResponse:a.r(51978).NextResponse,ImageResponse:a.r(58176).ImageResponse,userAgentFromString:a.r(40881).userAgentFromString,userAgent:a.r(40881).userAgent,URLPattern:a.r(50792).URLPattern,after:a.r(89969).after,connection:a.r(29574).connection};b.exports=d,c.NextRequest=d.NextRequest,c.NextResponse=d.NextResponse,c.ImageResponse=d.ImageResponse,c.userAgentFromString=d.userAgentFromString,c.userAgent=d.userAgent,c.URLPattern=d.URLPattern,c.after=d.after,c.connection=d.connection},14896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return n},ReadonlyRequestCookiesError:function(){return i},RequestCookiesAdapter:function(){return j},appendMutableCookies:function(){return m},areCookiesMutableInCurrentPhase:function(){return p},createCookiesWithMutableAccessCheck:function(){return o},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return r}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63681),g=a.r(51409),h=a.r(56704);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new i}}class j{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return i.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let k=Symbol.for("next.mutated.cookies");function l(a){let b=a[k];return b&&Array.isArray(b)&&0!==b.length?b:[]}function m(a,b){let c=l(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class n{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,i=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},j=new Proxy(c,{get(a,b,c){switch(b){case k:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),j}finally{i()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),j}finally{i()}};default:return g.ReflectAdapter.get(a,b,c)}}});return j}}function o(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return q(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return q(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function p(a){return"action"===a.phase}function q(a,b){if(!p(a))throw new i}function r(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},8018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(717));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},81740,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(14896),e=a.r(63681),f=a.r(56704),g=a.r(32319),h=a.r(60384),i=a.r(60312),j=a.r(13091),k=a.r(8018),l=a.r(86309),m=a.r(50640);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(31382);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},29927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(51409);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},35754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(29927),e=a.r(56704),f=a.r(32319),g=a.r(60384),h=a.r(60312),i=a.r(13091),j=a.r(8018),k=a.r(86309),l=a.r(50640);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(31382);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},51125,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(32319),e=a.r(56704),f=a.r(60384),g=a.r(8018),h=a.r(60312),i=a.r(96556),j=a.r(50640);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(51409);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},5246,(a,b,c)=>{b.exports.cookies=a.r(81740).cookies,b.exports.headers=a.r(35754).headers,b.exports.draftMode=a.r(51125).draftMode},20916,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21170,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28859,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(21170),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},44868,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(21170),g=a.r(28859),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},89798,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},16155,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},34557,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},93845,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73808,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},1567,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=a.r(28859);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},94783,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(13091),e=a.r(73808),f=a.r(49640),g=a.r(1567),h=a.r(60384),i=a.r(96556);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60968,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(94783).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73727,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20916),g=a.r(44868),h=a.r(28859),i=a.r(16155),j=a.r(34557),k=a.r(93845),l=a.r(60968);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},9307,70396,39138,38904,a=>{"use strict";let b,c,d,e,f,g,h,i,j,k,l,m,n;var o,p,q=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},r=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};function s(a){let b=a?"__Secure-":"";return{sessionToken:{name:`${b}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},callbackUrl:{name:`${b}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},csrfToken:{name:`${a?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},pkceCodeVerifier:{name:`${b}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},state:{name:`${b}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},nonce:{name:`${b}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},webauthnChallenge:{name:`${b}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}}}}class t{constructor(a,b,c){if(cr.add(this),cs.set(this,{}),ct.set(this,void 0),cu.set(this,void 0),q(this,cu,c,"f"),q(this,ct,a,"f"),!b)return;const{name:d}=a;for(const[a,c]of Object.entries(b))a.startsWith(d)&&c&&(r(this,cs,"f")[a]=c)}get value(){return Object.keys(r(this,cs,"f")).sort((a,b)=>parseInt(a.split(".").pop()||"0")-parseInt(b.split(".").pop()||"0")).map(a=>r(this,cs,"f")[a]).join("")}chunk(a,b){let c=r(this,cr,"m",cw).call(this);for(let d of r(this,cr,"m",cv).call(this,{name:r(this,ct,"f").name,value:a,options:{...r(this,ct,"f").options,...b}}))c[d.name]=d;return Object.values(c)}clean(){return Object.values(r(this,cr,"m",cw).call(this))}}cs=new WeakMap,ct=new WeakMap,cu=new WeakMap,cr=new WeakSet,cv=function(a){let b=Math.ceil(a.value.length/3936);if(1===b)return r(this,cs,"f")[a.name]=a.value,[a];let c=[];for(let d=0;d<b;d++){let b=`${a.name}.${d}`,e=a.value.substr(3936*d,3936);c.push({...a,name:b,value:e}),r(this,cs,"f")[b]=e}return r(this,cu,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:a.value.length,chunks:c.map(a=>a.value.length+160)}),c},cw=function(){let a={};for(let b in r(this,cs,"f"))delete r(this,cs,"f")?.[b],a[b]={name:b,value:"",options:{...r(this,ct,"f").options,maxAge:0}};return a};class u extends Error{constructor(a,b){a instanceof Error?super(void 0,{cause:{err:a,...a.cause,...b}}):"string"==typeof a?(b instanceof Error&&(b={err:b,...b.cause}),super(a,b)):super(void 0,a),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const c=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${c}`}}class v extends u{}v.kind="signIn";class w extends u{}w.type="AdapterError";class x extends u{}x.type="AccessDenied";class y extends u{}y.type="CallbackRouteError";class z extends u{}z.type="ErrorPageLoop";class A extends u{}A.type="EventError";class B extends u{}B.type="InvalidCallbackUrl";class C extends v{constructor(){super(...arguments),this.code="credentials"}}C.type="CredentialsSignin";class D extends u{}D.type="InvalidEndpoints";class E extends u{}E.type="InvalidCheck";class F extends u{}F.type="JWTSessionError";class G extends u{}G.type="MissingAdapter";class H extends u{}H.type="MissingAdapterMethods";class I extends u{}I.type="MissingAuthorize";class J extends u{}J.type="MissingSecret";class K extends v{}K.type="OAuthAccountNotLinked";class L extends v{}L.type="OAuthCallbackError";class M extends u{}M.type="OAuthProfileParseError";class N extends u{}N.type="SessionTokenError";class O extends u{}O.type="SignOutError";class P extends u{}P.type="UnknownAction";class Q extends u{}Q.type="UnsupportedStrategy";class R extends u{}R.type="InvalidProvider";class S extends u{}S.type="UntrustedHost";class T extends u{}T.type="Verification";class U extends v{}U.type="MissingCSRF";let V=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class W extends u{}W.type="DuplicateConditionalUI";class X extends u{}X.type="MissingWebAuthnAutocomplete";class Y extends u{}Y.type="WebAuthnVerificationError";class Z extends v{}Z.type="AccountNotLinked";class $ extends u{}$.type="ExperimentalFeatureNotEnabled";let _=!1;function aa(a,b){try{return/^https?:/.test(new URL(a,a.startsWith("/")?b:void 0).protocol)}catch{return!1}}let ab=!1,ac=!1,ad=!1,ae=["createVerificationToken","useVerificationToken","getUserByEmail"],af=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],ag=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];var ah=a.i(54799);"function"!=typeof ah.hkdf||process.versions.electron||(b=async(...a)=>new Promise((b,c)=>{ah.hkdf(...a,(a,d)=>{a?c(a):b(new Uint8Array(d))})}));let ai=async(a,c,d,e,f)=>(b||((a,b,c,d,e)=>{let f=parseInt(a.substr(3),10)>>3||20,g=(0,ah.createHmac)(a,c.byteLength?c:new Uint8Array(f)).update(b).digest(),h=Math.ceil(e/f),i=new Uint8Array(f*h+d.byteLength+1),j=0,k=0;for(let b=1;b<=h;b++)i.set(d,k),i[k+d.byteLength]=b,i.set((0,ah.createHmac)(a,g).update(i.subarray(j,k+d.byteLength+1)).digest(),k),j=k,k+=f;return i.slice(0,e)}))(a,c,d,e,f);function aj(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function ak(a,b,c,d,e){return ai(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=aj(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),aj(c,"salt"),function(a){let b=aj(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(d),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(e,a))}let al=new TextEncoder,am=new TextDecoder;function an(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function ao(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function ap(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return ao(c,b,0),ao(c,a%0x100000000,4),c}function aq(a){let b=new Uint8Array(4);return ao(b,a),b}function ar(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}function as(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:am.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=am.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function at(a){let b=a;return("string"==typeof b&&(b=al.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}a.s(["decode",()=>as,"encode",()=>at],9634);let au=Symbol();class av extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class aw extends av{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class ax extends av{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class ay extends av{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class az extends av{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class aA extends av{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class aB extends av{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class aC extends av{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class aD extends av{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class aE extends av{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}function aF(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new az(`Unsupported JWE Algorithm: ${a}`)}}function aG(a,b){if(b.length<<3!==aF(a))throw new aB("Invalid Initialization Vector length")}function aH(a,b){let c=a.byteLength<<3;if(c!==b)throw new aB(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)}let aI=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function aJ(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==a.algorithm.name)throw aI("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw aI(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==a.algorithm.name)throw aI("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw aI(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw aI("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==a.algorithm.name)throw aI("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==a.algorithm.name)throw aI("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(parseInt(a.algorithm.hash.name.slice(4),10)!==c)throw aI(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}if(c&&!a.usages.includes(c))throw TypeError(`CryptoKey does not support this operation, its usages must include ${c}.`)}function aK(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let aL=(a,...b)=>aK("Key must be ",a,...b),aM=(a,b,...c)=>aK(`Key for the ${a} algorithm must be `,b,...c);function aN(a){if(!aO(a))throw Error("CryptoKey instance expected")}let aO=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},aP=a=>a?.[Symbol.toStringTag]==="KeyObject",aQ=a=>aO(a)||aP(a);async function aR(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(aL(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=an(e,d,i,ap(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function aS(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(aJ(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}async function aT(a,b,c,d,e){if(!aO(c)&&!(c instanceof Uint8Array))throw TypeError(aL(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)aG(a,d);else d=crypto.getRandomValues(new Uint8Array(aF(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&aH(c,parseInt(a.slice(-3),10)),aR(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&aH(c,parseInt(a.slice(1,4),10)),aS(a,b,c,d,e);default:throw new az("Unsupported JWE Content Encryption Algorithm")}}function aU(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function aV(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):(aJ(a,b,c),a)}async function aW(a,b,c){let d=await aV(b,a,"wrapKey");aU(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function aX(a,b,c){let d=await aV(b,a,"unwrapKey");aU(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}async function aY(a,b){let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))}function aZ(a){return an(aq(a.length),a)}async function a$(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set(aq(b),0),d.set(a,4),d.set(c,4+a.length);let e=await aY("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function a_(a,b,c,d,e=new Uint8Array,f=new Uint8Array){var g;aJ(a,"ECDH"),aJ(b,"ECDH","deriveBits");let h=an(aZ(ar(c)),aZ(e),aZ(f),aq(d),new Uint8Array);return a$(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,h)}function a0(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function a1(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new aB("PBES2 Salt Input must be 8 or more octets");let e=an(ar(b),Uint8Array.of(0),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):(aJ(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function a2(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await a1(e,a,d,b);return{encryptedKey:await aW(a.slice(-6),f,c),p2c:d,p2s:at(e)}}async function a3(a,b,c,d,e){let f=await a1(e,a,d,b);return aX(a.slice(-6),f,c)}function a4(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}let a5=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new az(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function a6(a,b,c){return aJ(b,a,"encrypt"),a4(a,b),new Uint8Array(await crypto.subtle.encrypt(a5(a),b,c))}async function a7(a,b,c){return aJ(b,a,"decrypt"),a4(a,b),new Uint8Array(await crypto.subtle.decrypt(a5(a),b,c))}function a8(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}let a9=a=>a8(a)&&"string"==typeof a.kty;async function ba(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new az('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new az('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new az('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new az('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new az('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}let bb=async(a,b,d,e=!1)=>{let f=(c||=new WeakMap).get(a);if(f?.[d])return f[d];let g=await ba({...b,alg:d});return e&&Object.freeze(a),f?f[d]=g:c.set(a,{[d]:g}),g};async function bc(a,b){if(a instanceof Uint8Array||aO(a))return a;if(aP(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let d,e=(c||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}d=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");d=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let c;switch(b){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:c},g,f?["encrypt"]:["decrypt"]);d=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===c&&(d=a.toCryptoKey({name:"ECDSA",namedCurve:c},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(d=a.toCryptoKey({name:"ECDH",namedCurve:c},g,f?[]:["deriveBits"]))}if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=d:c.set(a,{[b]:d}),d})(a,b)}catch(a){if(a instanceof TypeError)throw a}let d=a.export({format:"jwk"});return bb(a,d,b)}if(a9(a))return a.k?as(a.k):bb(a,a,b,!0);throw Error("unreachable")}function bd(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new az(`Unsupported JWE Algorithm: ${a}`)}}let be=a=>crypto.getRandomValues(new Uint8Array(bd(a)>>3));async function bf(a){if(aP(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:at(a)};if(!aO(a))throw TypeError(aL(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function bg(a){return bf(a)}async function bh(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function bi(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError(aL(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=an(f,d,c,ap(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await bh(e,m)}catch{}if(!g)throw new aA;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new aA;return h}async function bj(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(aJ(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,an(c,e)))}catch{throw new aA}}async function bk(a,b,c,d,e,f){if(!aO(b)&&!(b instanceof Uint8Array))throw TypeError(aL(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new aB("JWE Initialization Vector missing");if(!e)throw new aB("JWE Authentication Tag missing");switch(aG(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&aH(b,parseInt(a.slice(-3),10)),bi(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&aH(b,parseInt(a.slice(1,4),10)),bj(a,b,c,d,e,f);default:throw new az("Unsupported JWE Content Encryption Algorithm")}}async function bl(a,b,c,d){let e=a.slice(0,7),f=await aT(e,c,b,d,new Uint8Array);return{encryptedKey:f.ciphertext,iv:at(f.iv),tag:at(f.tag)}}async function bm(a,b,c,d,e){return bk(a.slice(0,7),b,c,d,e,new Uint8Array)}async function bn(a,b,c,d,e={}){let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if(aN(c),!a0(c))throw new az("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:j,apv:k}=e;i=e.epk?await bc(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:l,y:m,crv:n,kty:o}=await bg(i),p=await a_(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?bd(b):parseInt(a.slice(-5,-2),10),j,k);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),j&&(g.apu=at(j)),k&&(g.apv=at(k)),"ECDH-ES"===a){h=p;break}h=d||be(b);let q=a.slice(-6);f=await aW(q,p,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||be(b),aN(c),f=await a6(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||be(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await a2(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||be(b),f=await aW(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||be(b);let{iv:i}=e;({encryptedKey:f,...g}=await bl(a,c,h,i));break}default:throw new az('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}function bo(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}function bp(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new az(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)}let bq=a=>a?.[Symbol.toStringTag],br=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0};function bs(a,b,c){switch(a.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(a9(b)){if("oct"===b.kty&&"string"==typeof b.k&&br(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!aQ(b))throw TypeError(aM(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${bq(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c);break;default:((a,b,c)=>{if(a9(b))switch(c){case"decrypt":case"sign":if("oct"!==b.kty&&("AKP"===b.kty&&"string"==typeof b.priv||"string"==typeof b.d)&&br(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==b.kty&&void 0===b.d&&void 0===b.priv&&br(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!aQ(b))throw TypeError(aM(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${bq(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${bq(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${bq(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${bq(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${bq(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)}}class bt{#a;#b;#c;#d;#e;#f;#g;#h;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#a=a}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setSharedUnprotectedHeader(a){if(this.#c)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#c=a,this}setUnprotectedHeader(a){if(this.#d)throw TypeError("setUnprotectedHeader can only be called once");return this.#d=a,this}setAdditionalAuthenticatedData(a){return this.#e=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}async encrypt(a,b){let c,d,e,f,g,h;if(!this.#b&&!this.#d&&!this.#c)throw new aB("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!bo(this.#b,this.#d,this.#c))throw new aB("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#b,...this.#d,...this.#c};if(bp(aB,new Map,b?.crit,this.#b,i),void 0!==i.zip)throw new az('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:j,enc:k}=i;if("string"!=typeof j||!j)throw new aB('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof k||!k)throw new aB('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#f&&("dir"===j||"ECDH-ES"===j))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${j}`);bs("dir"===j?k:j,a,"encrypt");{let e,f=await bc(a,j);({cek:d,encryptedKey:c,parameters:e}=await bn(j,k,f,this.#f,this.#h)),e&&(b&&au in b?this.#d?this.#d={...this.#d,...e}:this.setUnprotectedHeader(e):this.#b?this.#b={...this.#b,...e}:this.setProtectedHeader(e))}if(this.#b?g=ar(f=at(JSON.stringify(this.#b))):(f="",g=new Uint8Array),this.#e){let a=ar(h=at(this.#e));e=an(g,ar("."),a)}else e=g;let{ciphertext:l,tag:m,iv:n}=await aT(k,this.#a,d,this.#g,e),o={ciphertext:at(l)};return n&&(o.iv=at(n)),m&&(o.tag=at(m)),c&&(o.encrypted_key=at(c)),h&&(o.aad=h),this.#b&&(o.protected=f),this.#c&&(o.unprotected=this.#c),this.#d&&(o.header=this.#d),o}}class bu{#i;constructor(a){this.#i=new bt(a)}setContentEncryptionKey(a){return this.#i.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#i.setInitializationVector(a),this}setProtectedHeader(a){return this.#i.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#i.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#i.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}let bv=a=>Math.floor(a.getTime()/1e3),bw=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function bx(a){let b,c=bw.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}function by(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let bz=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;class bA{#j;constructor(a){if(!a8(a))throw TypeError("JWT Claims Set MUST be an object");this.#j=structuredClone(a)}data(){return al.encode(JSON.stringify(this.#j))}get iss(){return this.#j.iss}set iss(a){this.#j.iss=a}get sub(){return this.#j.sub}set sub(a){this.#j.sub=a}get aud(){return this.#j.aud}set aud(a){this.#j.aud=a}set jti(a){this.#j.jti=a}set nbf(a){"number"==typeof a?this.#j.nbf=by("setNotBefore",a):a instanceof Date?this.#j.nbf=by("setNotBefore",bv(a)):this.#j.nbf=bv(new Date)+bx(a)}set exp(a){"number"==typeof a?this.#j.exp=by("setExpirationTime",a):a instanceof Date?this.#j.exp=by("setExpirationTime",bv(a)):this.#j.exp=bv(new Date)+bx(a)}set iat(a){void 0===a?this.#j.iat=bv(new Date):a instanceof Date?this.#j.iat=by("setIssuedAt",bv(a)):"string"==typeof a?this.#j.iat=by("setIssuedAt",bv(new Date)+bx(a)):this.#j.iat=by("setIssuedAt",a)}}class bB{#f;#g;#h;#b;#k;#l;#m;#n;constructor(a={}){this.#n=new bA(a)}setIssuer(a){return this.#n.iss=a,this}setSubject(a){return this.#n.sub=a,this}setAudience(a){return this.#n.aud=a,this}setJti(a){return this.#n.jti=a,this}setNotBefore(a){return this.#n.nbf=a,this}setExpirationTime(a){return this.#n.exp=a,this}setIssuedAt(a){return this.#n.iat=a,this}setProtectedHeader(a){if(this.#b)throw TypeError("setProtectedHeader can only be called once");return this.#b=a,this}setKeyManagementParameters(a){if(this.#h)throw TypeError("setKeyManagementParameters can only be called once");return this.#h=a,this}setContentEncryptionKey(a){if(this.#f)throw TypeError("setContentEncryptionKey can only be called once");return this.#f=a,this}setInitializationVector(a){if(this.#g)throw TypeError("setInitializationVector can only be called once");return this.#g=a,this}replicateIssuerAsHeader(){return this.#k=!0,this}replicateSubjectAsHeader(){return this.#l=!0,this}replicateAudienceAsHeader(){return this.#m=!0,this}async encrypt(a,b){let c=new bu(this.#n.data());return this.#b&&(this.#k||this.#l||this.#m)&&(this.#b={...this.#b,iss:this.#k?this.#n.iss:void 0,sub:this.#l?this.#n.sub:void 0,aud:this.#m?this.#n.aud:void 0}),c.setProtectedHeader(this.#b),this.#g&&c.setInitializationVector(this.#g),this.#f&&c.setContentEncryptionKey(this.#f),this.#h&&c.setKeyManagementParameters(this.#h),c.encrypt(a,b)}}var bC=a.i(9634),bC=bC;let bD=(a,b)=>{if("string"!=typeof a||!a)throw new aD(`${b} missing or invalid`)};async function bE(a,b){let c,d;if(a9(a))c=a;else if(aQ(a))c=await bg(a);else throw TypeError(aL(a,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(c.kty){case"AKP":bD(c.alg,'"alg" (Algorithm) Parameter'),bD(c.pub,'"pub" (Public key) Parameter'),d={alg:c.alg,kty:c.kty,pub:c.pub};break;case"EC":bD(c.crv,'"crv" (Curve) Parameter'),bD(c.x,'"x" (X Coordinate) Parameter'),bD(c.y,'"y" (Y Coordinate) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x,y:c.y};break;case"OKP":bD(c.crv,'"crv" (Subtype of Key Pair) Parameter'),bD(c.x,'"x" (Public Key) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x};break;case"RSA":bD(c.e,'"e" (Exponent) Parameter'),bD(c.n,'"n" (Modulus) Parameter'),d={e:c.e,kty:c.kty,n:c.n};break;case"oct":bD(c.k,'"k" (Key Value) Parameter'),d={k:c.k,kty:c.kty};break;default:throw new az('"kty" (Key Type) Parameter missing or unsupported')}let e=ar(JSON.stringify(d));return at(await aY(b,e))}async function bF(a,b,c){let d;if(!a8(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return as(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new az('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return ba({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return ba({...a,ext:d});case"EC":case"OKP":return ba({...a,alg:b,ext:d});default:throw new az('Unsupported "kty" (Key Type) Parameter value')}}async function bG(a,b,c,d,e){switch(a){case"dir":if(void 0!==c)throw new aB("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new aB("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!a8(d.epk))throw new aB('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(aN(b),!a0(b))throw new az("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await bF(d.epk,a);if(aN(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new aB('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=as(d.apu)}catch{throw new aB("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new aB('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=as(d.apv)}catch{throw new aB("Failed to base64url decode the apv")}}let h=await a_(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?bd(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new aB("JWE Encrypted Key missing");return aX(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new aB("JWE Encrypted Key missing");return aN(b),a7(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new aB("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new aB('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new aB('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new aB('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=as(d.p2s)}catch{throw new aB("Failed to base64url decode the p2s")}return a3(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new aB("JWE Encrypted Key missing");return aX(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new aB("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new aB('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new aB('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=as(d.iv)}catch{throw new aB("Failed to base64url decode the iv")}try{f=as(d.tag)}catch{throw new aB("Failed to base64url decode the tag")}return bm(a,b,c,e,f)}default:throw new az('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function bH(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}async function bI(a,b,c){let d,e,f,g,h,i,j;if(!a8(a))throw new aB("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new aB("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new aB("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new aB("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new aB("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new aB("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new aB("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new aB("JWE AAD incorrect type");if(void 0!==a.header&&!a8(a.header))throw new aB("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!a8(a.unprotected))throw new aB("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=as(a.protected);d=JSON.parse(am.decode(b))}catch{throw new aB("JWE Protected Header is invalid")}if(!bo(d,a.header,a.unprotected))throw new aB("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let k={...d,...a.header,...a.unprotected};if(bp(aB,new Map,c?.crit,d,k),void 0!==k.zip)throw new az('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:l,enc:m}=k;if("string"!=typeof l||!l)throw new aB("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof m||!m)throw new aB("missing JWE Encryption Algorithm (enc) in JWE Header");let n=c&&bH("keyManagementAlgorithms",c.keyManagementAlgorithms),o=c&&bH("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(n&&!n.has(l)||!n&&l.startsWith("PBES2"))throw new ay('"alg" (Algorithm) Header Parameter value not allowed');if(o&&!o.has(m))throw new ay('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=as(a.encrypted_key)}catch{throw new aB("Failed to base64url decode the encrypted_key")}let p=!1;"function"==typeof b&&(b=await b(d,a),p=!0),bs("dir"===l?m:l,b,"decrypt");let q=await bc(b,l);try{f=await bG(l,q,e,k,c)}catch(a){if(a instanceof TypeError||a instanceof aB||a instanceof az)throw a;f=be(m)}if(void 0!==a.iv)try{g=as(a.iv)}catch{throw new aB("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=as(a.tag)}catch{throw new aB("Failed to base64url decode the tag")}let r=void 0!==a.protected?ar(a.protected):new Uint8Array;i=void 0!==a.aad?an(r,ar("."),ar(a.aad)):r;try{j=as(a.ciphertext)}catch{throw new aB("Failed to base64url decode the ciphertext")}let s={plaintext:await bk(m,f,j,g,h,i)};if(void 0!==a.protected&&(s.protectedHeader=d),void 0!==a.aad)try{s.additionalAuthenticatedData=as(a.aad)}catch{throw new aB("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(s.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(s.unprotectedHeader=a.header),p)?{...s,key:q}:s}async function bJ(a,b,c){if(a instanceof Uint8Array&&(a=am.decode(a)),"string"!=typeof a)throw new aB("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new aB("Invalid Compact JWE");let j=await bI({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function bK(a,b,c){let d=await bJ(a,b,c),e=function(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(am.decode(b))}catch{}if(!a8(f))throw new aC("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||bz(a.typ)!==bz(h)))throw new aw('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new aw(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new aw('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new aw('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new aw('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=bx(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=bv(o||new Date);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new aw('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new aw('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new aw('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new aw('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new ax('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:bx(m)))throw new ax('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new aw('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new aw('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new aw('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new aw('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}let bL=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,bM=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,bN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,bO=/^[\u0020-\u003A\u003D-\u007E]*$/,bP=Object.prototype.toString,bQ=((i=function(){}).prototype=Object.create(null),i);function bR(a,b){let c=new bQ,d=a.length;if(d<2)return c;let e=b?.decode||bV,f=0;do{let b=a.indexOf("=",f);if(-1===b)break;let g=a.indexOf(";",f),h=-1===g?d:g;if(b>h){f=a.lastIndexOf(";",b-1)+1;continue}let i=bS(a,f,b),j=bT(a,b,i),k=a.slice(i,j);if(void 0===c[k]){let d=bS(a,b+1,h),f=bT(a,h,d),g=e(a.slice(d,f));c[k]=g}f=h+1}while(f<d)return c}function bS(a,b,c){do{let c=a.charCodeAt(b);if(32!==c&&9!==c)return b}while(++b<c)return c}function bT(a,b,c){for(;b>c;){let c=a.charCodeAt(--b);if(32!==c&&9!==c)return b+1}return c}function bU(a,b,c){let d=c?.encode||encodeURIComponent;if(!bL.test(a))throw TypeError(`argument name is invalid: ${a}`);let e=d(b);if(!bM.test(e))throw TypeError(`argument val is invalid: ${b}`);let f=a+"="+e;if(!c)return f;if(void 0!==c.maxAge){if(!Number.isInteger(c.maxAge))throw TypeError(`option maxAge is invalid: ${c.maxAge}`);f+="; Max-Age="+c.maxAge}if(c.domain){if(!bN.test(c.domain))throw TypeError(`option domain is invalid: ${c.domain}`);f+="; Domain="+c.domain}if(c.path){if(!bO.test(c.path))throw TypeError(`option path is invalid: ${c.path}`);f+="; Path="+c.path}if(c.expires){var g;if(g=c.expires,"[object Date]"!==bP.call(g)||!Number.isFinite(c.expires.valueOf()))throw TypeError(`option expires is invalid: ${c.expires}`);f+="; Expires="+c.expires.toUTCString()}if(c.httpOnly&&(f+="; HttpOnly"),c.secure&&(f+="; Secure"),c.partitioned&&(f+="; Partitioned"),c.priority)switch("string"==typeof c.priority?c.priority.toLowerCase():void 0){case"low":f+="; Priority=Low";break;case"medium":f+="; Priority=Medium";break;case"high":f+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${c.priority}`)}if(c.sameSite)switch("string"==typeof c.sameSite?c.sameSite.toLowerCase():c.sameSite){case!0:case"strict":f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"none":f+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${c.sameSite}`)}return f}function bV(a){if(-1===a.indexOf("%"))return a;try{return decodeURIComponent(a)}catch(b){return a}}a.s(["parse",()=>bR,"serialize",()=>bU],63805);var bW=a.i(63805);let{parse:bX}=bW,bY="A256CBC-HS512";async function bZ(a){let{token:b={},secret:c,maxAge:d=2592e3,salt:e}=a,f=Array.isArray(c)?c:[c],g=await b_(bY,f[0],e),h=await bE({kty:"oct",k:bC.encode(g)},`sha${g.byteLength<<3}`);return await new bB(b).setProtectedHeader({alg:"dir",enc:bY,kid:h}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti(crypto.randomUUID()).encrypt(g)}async function b$(a){let{token:b,secret:c,salt:d}=a,e=Array.isArray(c)?c:[c];if(!b)return null;let{payload:f}=await bK(b,async({kid:a,enc:b})=>{for(let c of e){let e=await b_(b,c,d);if(void 0===a||a===await bE({kty:"oct",k:bC.encode(e)},`sha${e.byteLength<<3}`))return e}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[bY,"A256GCM"]});return f}async function b_(a,b,c){let d;switch(a){case"A256CBC-HS512":d=64;break;case"A256GCM":d=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await ak("sha256",b,c,`Auth.js Generated Encryption Key (${c})`,d)}async function b0({options:a,paramValue:b,cookieValue:c}){let{url:d,callbacks:e}=a,f=d.origin;return b?f=await e.redirect({url:b,baseUrl:d.origin}):c&&(f=await e.redirect({url:c,baseUrl:d.origin})),{callbackUrl:f,callbackUrlCookie:f!==c?f:void 0}}let b1="\x1b[31m",b2="\x1b[0m",b3={error(a){let b=a instanceof u?a.type:a.name;if(console.error(`${b1}[auth][error]${b2} ${b}: ${a.message}`),a.cause&&"object"==typeof a.cause&&"err"in a.cause&&a.cause.err instanceof Error){let{err:b,...c}=a.cause;console.error(`${b1}[auth][cause]${b2}:`,b.stack),c&&console.error(`${b1}[auth][details]${b2}:`,JSON.stringify(c,null,2))}else a.stack&&console.error(a.stack.replace(/.*/,"").substring(1))},warn(a){console.warn(`\x1b[33m[auth][warn][${a}]${b2}`,"Read more: https://warnings.authjs.dev")},debug(a,b){console.log(`\x1b[90m[auth][debug]:${b2} ${a}`,JSON.stringify(b,null,2))}};function b4(a){let b={...b3};return a.debug||(b.debug=()=>{}),a.logger?.error&&(b.error=a.logger.error),a.logger?.warn&&(b.warn=a.logger.warn),a.logger?.debug&&(b.debug=a.logger.debug),a.logger??(a.logger=b),b}let b5=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{parse:b6,serialize:b7}=bW;async function b8(a){if(!("body"in a)||!a.body||"POST"!==a.method)return;let b=a.headers.get("content-type");return b?.includes("application/json")?await a.json():b?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await a.text())):void 0}async function b9(a,b){try{if("GET"!==a.method&&"POST"!==a.method)throw new P("Only GET and POST requests are supported");b.basePath??(b.basePath="/auth");let c=new URL(a.url),{action:d,providerId:e}=function(a,b){let c=a.match(RegExp(`^${b}(.+)`));if(null===c)throw new P(`Cannot parse action at ${a}`);let d=c.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==d.length&&2!==d.length)throw new P(`Cannot parse action at ${a}`);let[e,f]=d;if(!b5.includes(e)||f&&!["signin","callback","webauthn-options"].includes(e))throw new P(`Cannot parse action at ${a}`);return{action:e,providerId:"undefined"==f?void 0:f}}(c.pathname,b.basePath);return{url:c,action:d,providerId:e,method:a.method,headers:Object.fromEntries(a.headers),body:a.body?await b8(a):void 0,cookies:b6(a.headers.get("cookie")??"")??{},error:c.searchParams.get("error")??void 0,query:Object.fromEntries(c.searchParams)}}catch(d){let c=b4(b);c.error(d),c.debug("request",a)}}function ca(a){let b=new Headers(a.headers);a.cookies?.forEach(a=>{let{name:c,value:d,options:e}=a,f=b7(c,d,e);b.has("Set-Cookie")?b.append("Set-Cookie",f):b.set("Set-Cookie",f)});let c=a.body;"application/json"===b.get("content-type")?c=JSON.stringify(a.body):"application/x-www-form-urlencoded"===b.get("content-type")&&(c=new URLSearchParams(a.body).toString());let d=new Response(c,{headers:b,status:a.redirect?302:a.status??200});return a.redirect&&d.headers.set("Location",a.redirect),d}async function cb(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>a.toString(16).padStart(2,"0")).join("").toString()}function cc(a){return Array.from(crypto.getRandomValues(new Uint8Array(a))).reduce((a,b)=>a+("0"+b.toString(16)).slice(-2),"")}async function cd({options:a,cookieValue:b,isPost:c,bodyValue:d}){if(b){let[e,f]=b.split("|");if(f===await cb(`${e}${a.secret}`))return{csrfTokenVerified:c&&e===d,csrfToken:e}}let e=cc(32),f=await cb(`${e}${a.secret}`);return{cookie:`${e}|${f}`,csrfToken:e}}function ce(a,b){if(!b)throw new U(`CSRF token was missing during an action ${a}`)}function cf(a){return null!==a&&"object"==typeof a}function cg(a,...b){if(!b.length)return a;let c=b.shift();if(cf(a)&&cf(c))for(let b in c)cf(c[b])?(cf(a[b])||(a[b]=Array.isArray(c[b])?[]:{}),cg(a[b],c[b])):void 0!==c[b]&&(a[b]=c[b]);return cg(a,...b)}let ch=Symbol("skip-csrf-check"),ci=Symbol("return-type-raw"),cj=Symbol("custom-fetch"),ck=Symbol("conform-internal"),cl=a=>cn({id:a.sub??a.id??crypto.randomUUID(),name:a.name??a.nickname??a.preferred_username,email:a.email,image:a.picture}),cm=a=>cn({access_token:a.access_token,id_token:a.id_token,refresh_token:a.refresh_token,expires_at:a.expires_at,scope:a.scope,token_type:a.token_type,session_state:a.session_state});function cn(a){let b={};for(let[c,d]of Object.entries(a))void 0!==d&&(b[c]=d);return b}function co(a,b){if(!a&&b)return;if("string"==typeof a)return{url:new URL(a)};let c=new URL(a?.url??"https://authjs.dev");if(a?.params!=null)for(let[b,d]of Object.entries(a.params))"claims"===b&&(d=JSON.stringify(d)),c.searchParams.set(b,String(d));return{url:c,request:a?.request,conform:a?.conform,...a?.clientPrivateKey?{clientPrivateKey:a?.clientPrivateKey}:null}}let cp={signIn:()=>!0,redirect:({url:a,baseUrl:b})=>a.startsWith("/")?`${b}${a}`:new URL(a).origin===b?a:b,session:({session:a})=>({user:{name:a.user?.name,email:a.user?.email,image:a.user?.image},expires:a.expires?.toISOString?.()??a.expires}),jwt:({token:a})=>a};async function cq({authOptions:a,providerId:b,action:c,url:d,cookies:e,callbackUrl:f,csrfToken:g,csrfDisabled:h,isPost:i}){var j,k;let l=b4(a),{providers:m,provider:n}=function(a){let{providerId:b,config:c}=a,d=new URL(c.basePath??"/auth",a.url.origin),e=c.providers.map(a=>{let b="function"==typeof a?a():a,{options:e,...f}=b,g=e?.id??f.id,h=cg(f,e,{signinUrl:`${d}/signin/${g}`,callbackUrl:`${d}/callback/${g}`});if("oauth"===b.type||"oidc"===b.type){var i;let a,b,d,f;h.redirectProxyUrl??(h.redirectProxyUrl=e?.redirectProxyUrl??c.redirectProxyUrl);let g=((i=h).issuer&&(i.wellKnown??(i.wellKnown=`${i.issuer}/.well-known/openid-configuration`)),(a=co(i.authorization,i.issuer))&&!a.url?.searchParams.has("scope")&&a.url.searchParams.set("scope","openid profile email"),b=co(i.token,i.issuer),d=co(i.userinfo,i.issuer),f=i.checks??["pkce"],i.redirectProxyUrl&&(f.includes("state")||f.push("state"),i.redirectProxyUrl=`${i.redirectProxyUrl}/callback/${i.id}`),{...i,authorization:a,token:b,checks:f,userinfo:d,profile:i.profile??cl,account:i.account??cm});return g.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete g.redirectProxyUrl,g[cj]??(g[cj]=e?.[cj]),g}return h}),f=e.find(({id:a})=>a===b);if(b&&!f){let a=e.map(a=>a.id).join(", ");throw Error(`Provider with id "${b}" not found. Available providers: [${a}].`)}return{providers:e,provider:f}}({url:d,providerId:b,config:a}),o=!1;if((n?.type==="oauth"||n?.type==="oidc")&&n.redirectProxyUrl)try{o=new URL(n.redirectProxyUrl).origin===d.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${n.redirectProxyUrl}`)}let p={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...a,url:d,action:c,provider:n,cookies:cg(s(a.useSecureCookies??"https:"===d.protocol),a.cookies),providers:m,session:{strategy:a.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...a.session},jwt:{secret:a.secret,maxAge:a.session?.maxAge??2592e3,encode:bZ,decode:b$,...a.jwt},events:(j=a.events??{},k=l,Object.keys(j).reduce((a,b)=>(a[b]=async(...a)=>{try{let c=j[b];return await c(...a)}catch(a){k.error(new A(a))}},a),{})),adapter:function(a,b){if(a)return Object.keys(a).reduce((c,d)=>(c[d]=async(...c)=>{try{b.debug(`adapter_${d}`,{args:c});let e=a[d];return await e(...c)}catch(c){let a=new w(c);throw b.error(a),a}},c),{})}(a.adapter,l),callbacks:{...cp,...a.callbacks},logger:l,callbackUrl:d.origin,isOnRedirectProxy:o,experimental:{...a.experimental}},q=[];if(h)p.csrfTokenVerified=!0;else{let{csrfToken:a,cookie:b,csrfTokenVerified:c}=await cd({options:p,cookieValue:e?.[p.cookies.csrfToken.name],isPost:i,bodyValue:g});p.csrfToken=a,p.csrfTokenVerified=c,b&&q.push({name:p.cookies.csrfToken.name,value:b,options:p.cookies.csrfToken.options})}let{callbackUrl:r,callbackUrlCookie:t}=await b0({options:p,cookieValue:e?.[p.cookies.callbackUrl.name],paramValue:f});return p.callbackUrl=r,t&&q.push({name:p.cookies.callbackUrl.name,value:t,options:p.cookies.callbackUrl.options}),{options:p,cookies:q}}var cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH={},cI=[],cJ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,cK=Array.isArray;function cL(a,b){for(var c in b)a[c]=b[c];return a}function cM(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function cN(a,b,c,d,e){var f={type:a,props:b,key:c,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==e?++cz:e,__i:-1,__u:0};return null==e&&null!=cy.vnode&&cy.vnode(f),f}function cO(a){return a.children}function cP(a,b){this.props=a,this.context=b}function cQ(a,b){if(null==b)return a.__?cQ(a.__,a.__i+1):null;for(var c;b<a.__k.length;b++)if(null!=(c=a.__k[b])&&null!=c.__e)return c.__e;return"function"==typeof a.type?cQ(a):null}function cR(a){(!a.__d&&(a.__d=!0)&&cA.push(a)&&!cS.__r++||cB!==cy.debounceRendering)&&((cB=cy.debounceRendering)||cC)(cS)}function cS(){var a,b,c,d,e,f,g,h;for(cA.sort(cD);a=cA.shift();)a.__d&&(b=cA.length,d=void 0,f=(e=(c=a).__v).__e,g=[],h=[],c.__P&&((d=cL({},e)).__v=e.__v+1,cy.vnode&&cy.vnode(d),cX(c.__P,d,e,c.__n,c.__P.namespaceURI,32&e.__u?[f]:null,g,null==f?cQ(e):f,!!(32&e.__u),h),d.__v=e.__v,d.__.__k[d.__i]=d,function(a,b,c){b.__d=void 0;for(var d=0;d<c.length;d++)cY(c[d],c[++d],c[++d]);cy.__c&&cy.__c(b,a),a.some(function(b){try{a=b.__h,b.__h=[],a.some(function(a){a.call(b)})}catch(a){cy.__e(a,b.__v)}})}(g,d,h),d.__e!=f&&function a(b){var c,d;if(null!=(b=b.__)&&null!=b.__c){for(b.__e=b.__c.base=null,c=0;c<b.__k.length;c++)if(null!=(d=b.__k[c])&&null!=d.__e){b.__e=b.__c.base=d.__e;break}return a(b)}}(d)),cA.length>b&&cA.sort(cD));cS.__r=0}function cT(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q=d&&d.__k||cI,r=b.length;for(c.__d=i,function(a,b,c){var d,e,f,g,h,i=b.length,j=c.length,k=j,l=0;for(a.__k=[],d=0;d<i;d++)null!=(e=b[d])&&"boolean"!=typeof e&&"function"!=typeof e?(g=d+l,(e=a.__k[d]="string"==typeof e||"number"==typeof e||"bigint"==typeof e||e.constructor==String?cN(null,e,null,null,null):cK(e)?cN(cO,{children:e},null,null,null):void 0===e.constructor&&e.__b>0?cN(e.type,e.props,e.key,e.ref?e.ref:null,e.__v):e).__=a,e.__b=a.__b+1,f=null,-1!==(h=e.__i=function(a,b,c,d){var e=a.key,f=a.type,g=c-1,h=c+1,i=b[c];if(null===i||i&&e==i.key&&f===i.type&&0==(131072&i.__u))return c;if(d>+(null!=i&&0==(131072&i.__u)))for(;g>=0||h<b.length;){if(g>=0){if((i=b[g])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return g;g--}if(h<b.length){if((i=b[h])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return h;h++}}return -1}(e,c,g,k))&&(k--,(f=c[h])&&(f.__u|=131072)),null==f||null===f.__v?(-1==h&&l--,"function"!=typeof e.type&&(e.__u|=65536)):h!==g&&(h==g-1?l--:h==g+1?l++:(h>g?l--:l++,e.__u|=65536))):e=a.__k[d]=null;if(k)for(d=0;d<j;d++)null!=(f=c[d])&&0==(131072&f.__u)&&(f.__e==a.__d&&(a.__d=cQ(f)),function a(b,c,d){var e,f;if(cy.unmount&&cy.unmount(b),(e=b.ref)&&(e.current&&e.current!==b.__e||cY(e,null,c)),null!=(e=b.__c)){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(a){cy.__e(a,c)}e.base=e.__P=null}if(e=b.__k)for(f=0;f<e.length;f++)e[f]&&a(e[f],c,d||"function"!=typeof b.type);d||cM(b.__e),b.__c=b.__=b.__e=b.__d=void 0}(f,f))}(c,b,q),i=c.__d,l=0;l<r;l++)null!=(n=c.__k[l])&&(m=-1===n.__i?cH:q[n.__i]||cH,n.__i=l,cX(a,n,m,e,f,g,h,i,j,k),o=n.__e,n.ref&&m.ref!=n.ref&&(m.ref&&cY(m.ref,null,n),k.push(n.ref,n.__c||o,n)),null==p&&null!=o&&(p=o),65536&n.__u||m.__k===n.__k?i=function a(b,c,d){var e,f;if("function"==typeof b.type){for(e=b.__k,f=0;e&&f<e.length;f++)e[f]&&(e[f].__=b,c=a(e[f],c,d));return c}b.__e!=c&&(c&&b.type&&!d.contains(c)&&(c=cQ(b)),d.insertBefore(b.__e,c||null),c=b.__e);do c=c&&c.nextSibling;while(null!=c&&8===c.nodeType)return c}(n,i,a):"function"==typeof n.type&&void 0!==n.__d?i=n.__d:o&&(i=o.nextSibling),n.__d=void 0,n.__u&=-196609);c.__d=i,c.__e=p}function cU(a,b,c){"-"===b[0]?a.setProperty(b,null==c?"":c):a[b]=null==c?"":"number"!=typeof c||cJ.test(b)?c:c+"px"}function cV(a,b,c,d,e){var f;a:if("style"===b)if("string"==typeof c)a.style.cssText=c;else{if("string"==typeof d&&(a.style.cssText=d=""),d)for(b in d)c&&b in c||cU(a.style,b,"");if(c)for(b in c)d&&c[b]===d[b]||cU(a.style,b,c[b])}else if("o"===b[0]&&"n"===b[1])f=b!==(b=b.replace(/(PointerCapture)$|Capture$/i,"$1")),b=b.toLowerCase()in a||"onFocusOut"===b||"onFocusIn"===b?b.toLowerCase().slice(2):b.slice(2),a.l||(a.l={}),a.l[b+f]=c,c?d?c.u=d.u:(c.u=cE,a.addEventListener(b,f?cG:cF,f)):a.removeEventListener(b,f?cG:cF,f);else{if("http://www.w3.org/2000/svg"==e)b=b.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=b&&"height"!=b&&"href"!=b&&"list"!=b&&"form"!=b&&"tabIndex"!=b&&"download"!=b&&"rowSpan"!=b&&"colSpan"!=b&&"role"!=b&&"popover"!=b&&b in a)try{a[b]=null==c?"":c;break a}catch(a){}"function"==typeof c||(null==c||!1===c&&"-"!==b[4]?a.removeAttribute(b):a.setAttribute(b,"popover"==b&&1==c?"":c))}}function cW(a){return function(b){if(this.l){var c=this.l[b.type+a];if(null==b.t)b.t=cE++;else if(b.t<c.u)return;return c(cy.event?cy.event(b):b)}}}function cX(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=b.type;if(void 0!==b.constructor)return null;128&c.__u&&(i=!!(32&c.__u),f=[h=b.__e=c.__e]),(k=cy.__b)&&k(b);a:if("function"==typeof A)try{if(r=b.props,s="prototype"in A&&A.prototype.render,t=(k=A.contextType)&&d[k.__c],u=k?t?t.props.value:k.__:d,c.__c?q=(l=b.__c=c.__c).__=l.__E:(s?b.__c=l=new A(r,u):(b.__c=l=new cP(r,u),l.constructor=A,l.render=cZ),t&&t.sub(l),l.props=r,l.state||(l.state={}),l.context=u,l.__n=d,m=l.__d=!0,l.__h=[],l._sb=[]),s&&null==l.__s&&(l.__s=l.state),s&&null!=A.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=cL({},l.__s)),cL(l.__s,A.getDerivedStateFromProps(r,l.__s))),n=l.props,o=l.state,l.__v=b,m)s&&null==A.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),s&&null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(s&&null==A.getDerivedStateFromProps&&r!==n&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(r,u),!l.__e&&(null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(r,l.__s,u)||b.__v===c.__v)){for(b.__v!==c.__v&&(l.props=r,l.state=l.__s,l.__d=!1),b.__e=c.__e,b.__k=c.__k,b.__k.some(function(a){a&&(a.__=b)}),v=0;v<l._sb.length;v++)l.__h.push(l._sb[v]);l._sb=[],l.__h.length&&g.push(l);break a}null!=l.componentWillUpdate&&l.componentWillUpdate(r,l.__s,u),s&&null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(n,o,p)})}if(l.context=u,l.props=r,l.__P=a,l.__e=!1,w=cy.__r,x=0,s){for(l.state=l.__s,l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),y=0;y<l._sb.length;y++)l.__h.push(l._sb[y]);l._sb=[]}else do l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++x<25)l.state=l.__s,null!=l.getChildContext&&(d=cL(cL({},d),l.getChildContext())),s&&!m&&null!=l.getSnapshotBeforeUpdate&&(p=l.getSnapshotBeforeUpdate(n,o)),cT(a,cK(z=null!=k&&k.type===cO&&null==k.key?k.props.children:k)?z:[z],b,c,d,e,f,g,h,i,j),l.base=b.__e,b.__u&=-161,l.__h.length&&g.push(l),q&&(l.__E=l.__=null)}catch(a){if(b.__v=null,i||null!=f){for(b.__u|=i?160:128;h&&8===h.nodeType&&h.nextSibling;)h=h.nextSibling;f[f.indexOf(h)]=null,b.__e=h}else b.__e=c.__e,b.__k=c.__k;cy.__e(a,b,c)}else null==f&&b.__v===c.__v?(b.__k=c.__k,b.__e=c.__e):b.__e=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q=c.props,r=b.props,s=b.type;if("svg"===s?e="http://www.w3.org/2000/svg":"math"===s?e="http://www.w3.org/1998/Math/MathML":e||(e="http://www.w3.org/1999/xhtml"),null!=f){for(j=0;j<f.length;j++)if((n=f[j])&&"setAttribute"in n==!!s&&(s?n.localName===s:3===n.nodeType)){a=n,f[j]=null;break}}if(null==a){if(null===s)return document.createTextNode(r);a=document.createElementNS(e,s,r.is&&r),h&&(cy.__m&&cy.__m(b,f),h=!1),f=null}if(null===s)q===r||h&&a.data===r||(a.data=r);else{if(f=f&&cx.call(a.childNodes),q=c.props||cH,!h&&null!=f)for(q={},j=0;j<a.attributes.length;j++)q[(n=a.attributes[j]).name]=n.value;for(j in q)if(n=q[j],"children"==j);else if("dangerouslySetInnerHTML"==j)l=n;else if(!(j in r)){if("value"==j&&"defaultValue"in r||"checked"==j&&"defaultChecked"in r)continue;cV(a,j,null,n,e)}for(j in r)n=r[j],"children"==j?m=n:"dangerouslySetInnerHTML"==j?k=n:"value"==j?o=n:"checked"==j?p=n:h&&"function"!=typeof n||q[j]===n||cV(a,j,n,q[j],e);if(k)h||l&&(k.__html===l.__html||k.__html===a.innerHTML)||(a.innerHTML=k.__html),b.__k=[];else if(l&&(a.innerHTML=""),cT(a,cK(m)?m:[m],b,c,d,"foreignObject"===s?"http://www.w3.org/1999/xhtml":e,f,g,f?f[0]:c.__k&&cQ(c,0),h,i),null!=f)for(j=f.length;j--;)cM(f[j]);h||(j="value","progress"===s&&null==o?a.removeAttribute("value"):void 0===o||o===a[j]&&("progress"!==s||o)&&("option"!==s||o===q[j])||cV(a,j,o,q[j],e),j="checked",void 0!==p&&p!==a[j]&&cV(a,j,p,q[j],e))}return a}(c.__e,b,c,d,e,f,g,i,j);(k=cy.diffed)&&k(b)}function cY(a,b,c){try{if("function"==typeof a){var d="function"==typeof a.__u;d&&a.__u(),d&&null==b||(a.__u=a(b))}else a.current=b}catch(a){cy.__e(a,c)}}function cZ(a,b,c){return this.constructor(a,c)}cx=cI.slice,cy={__e:function(a,b,c,d){for(var e,f,g;b=b.__;)if((e=b.__c)&&!e.__)try{if((f=e.constructor)&&null!=f.getDerivedStateFromError&&(e.setState(f.getDerivedStateFromError(a)),g=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(a,d||{}),g=e.__d),g)return e.__E=e}catch(b){a=b}throw a}},cz=0,cP.prototype.setState=function(a,b){var c;c=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=cL({},this.state),"function"==typeof a&&(a=a(cL({},c),this.props)),a&&cL(c,a),null!=a&&this.__v&&(b&&this._sb.push(b),cR(this))},cP.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),cR(this))},cP.prototype.render=cO,cA=[],cC="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,cD=function(a,b){return a.__v.__b-b.__v.__b},cS.__r=0,cE=0,cF=cW(!1),cG=cW(!0);var c$=/[\s\n\\/='"\0<>]/,c_=/^(xlink|xmlns|xml)([A-Z])/,c0=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,c1=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,c2=new Set(["draggable","spellcheck"]),c3=/["&<]/;function c4(a){if(0===a.length||!1===c3.test(a))return a;for(var b=0,c=0,d="",e="";c<a.length;c++){switch(a.charCodeAt(c)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 60:e="&lt;";break;default:continue}c!==b&&(d+=a.slice(b,c)),d+=e,b=c+1}return c!==b&&(d+=a.slice(b,c)),d}var c5={},c6=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),c7=/[A-Z]/g;function c8(){this.__d=!0}function c9(a,b,c){if(!a.s){if(c instanceof de){if(!c.s)return void(c.o=c9.bind(null,a,b));1&b&&(b=c.s),c=c.v}if(c&&c.then)return void c.then(c9.bind(null,a,b),c9.bind(null,a,2));a.s=b,a.v=c;let d=a.o;d&&d(a)}}var da,db,dc,dd,de=function(){function a(){}return a.prototype.then=function(b,c){var d=new a,e=this.s;if(e){var f=1&e?b:c;if(f){try{c9(d,1,f(this.v))}catch(a){c9(d,2,a)}return d}return this}return this.o=function(a){try{var e=a.v;1&a.s?c9(d,1,b?b(e):e):c?c9(d,1,c(e)):c9(d,2,e)}catch(a){c9(d,2,a)}},d},a}(),df={},dg=[],dh=Array.isArray,di=Object.assign;function dj(a,b){var c,d=a.type,e=!0;return a.__c?(e=!1,(c=a.__c).state=c.__s):c=new d(a.props,b),a.__c=c,c.__v=a,c.props=a.props,c.context=b,c.__d=!0,null==c.state&&(c.state=df),null==c.__s&&(c.__s=c.state),d.getDerivedStateFromProps?c.state=di({},c.state,d.getDerivedStateFromProps(c.props,c.state)):e&&c.componentWillMount?(c.componentWillMount(),c.state=c.__s!==c.state?c.__s:c.state):!e&&c.componentWillUpdate&&c.componentWillUpdate(),dc&&dc(a),c.render(c.props,c.state,b)}var dk=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),dl=0;function dm(a,b,c,d,e,f){b||(b={});var g,h,i=b;"ref"in b&&(g=b.ref,delete b.ref);var j={type:a,props:i,key:c,ref:g,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--dl,__i:-1,__u:0,__source:e,__self:f};if("function"==typeof a&&(g=a.defaultProps))for(h in g)void 0===i[h]&&(i[h]=g[h]);return cy.vnode&&cy.vnode(j),j}async function dn(a,b){let c=window.SimpleWebAuthnBrowser;async function d(c){let d=new URL(`${a}/webauthn-options/${b}`);c&&d.searchParams.append("action",c),f().forEach(a=>{d.searchParams.append(a.name,a.value)});let e=await fetch(d);return e.ok?e.json():void console.error("Failed to fetch options",e)}function e(){let a=`#${b}-form`,c=document.querySelector(a);if(!c)throw Error(`Form '${a}' not found`);return c}function f(){return Array.from(e().querySelectorAll("input[data-form-field]"))}async function g(a,b){let c=e();if(a){let b=document.createElement("input");b.type="hidden",b.name="action",b.value=a,c.appendChild(b)}if(b){let a=document.createElement("input");a.type="hidden",a.name="data",a.value=JSON.stringify(b),c.appendChild(a)}return c.submit()}async function h(a,b){let d=await c.startAuthentication(a,b);return await g("authenticate",d)}async function i(a){f().forEach(a=>{if(a.required&&!a.value)throw Error(`Missing required field: ${a.name}`)});let b=await c.startRegistration(a);return await g("register",b)}async function j(){if(!c.browserSupportsWebAuthnAutofill())return;let a=await d("authenticate");if(!a)return void console.error("Failed to fetch option for autofill authentication");try{await h(a.options,!0)}catch(a){console.error(a)}}(async function(){let a=e();if(!c.browserSupportsWebAuthn()){a.style.display="none";return}a&&a.addEventListener("submit",async a=>{a.preventDefault();let b=await d(void 0);if(!b)return void console.error("Failed to fetch options for form submission");if("authenticate"===b.action)try{await h(b.options,!1)}catch(a){console.error(a)}else if("register"===b.action)try{await i(b.options)}catch(a){console.error(a)}})})(),j()}let dp={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},dq=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function dr({html:a,title:b,status:c,cookies:d,theme:e,headTags:f}){return{cookies:d,status:c,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${dq}</style><title>${b}</title>${f??""}</head><body class="__next-auth-theme-${e?.colorScheme??"auto"}"><div class="page">${function(a,b,c){var d=cy.__s;cy.__s=!0,da=cy.__b,db=cy.diffed,dc=cy.__r,dd=cy.unmount;var e=function(a,b,c){var d,e,f,g={};for(f in b)"key"==f?d=b[f]:"ref"==f?e=b[f]:g[f]=b[f];if(arguments.length>2&&(g.children=arguments.length>3?cx.call(arguments,2):c),"function"==typeof a&&null!=a.defaultProps)for(f in a.defaultProps)void 0===g[f]&&(g[f]=a.defaultProps[f]);return cN(a,g,d,e,null)}(cO,null);e.__k=[a];try{var f=function a(b,c,d,e,f,g,h){if(null==b||!0===b||!1===b||""===b)return"";var i=typeof b;if("object"!=i)return"function"==i?"":"string"==i?c4(b):b+"";if(dh(b)){var j,k="";f.__k=b;for(var l=0;l<b.length;l++){var m=b[l];if(null!=m&&"boolean"!=typeof m){var n,o=a(m,c,d,e,f,g,h);"string"==typeof o?k+=o:(j||(j=[]),k&&j.push(k),k="",dh(o)?(n=j).push.apply(n,o):j.push(o))}}return j?(k&&j.push(k),j):k}if(void 0!==b.constructor)return"";b.__=f,da&&da(b);var p=b.type,q=b.props;if("function"==typeof p){var r,s,t,u=c;if(p===cO){if("tpl"in q){for(var v="",w=0;w<q.tpl.length;w++)if(v+=q.tpl[w],q.exprs&&w<q.exprs.length){var x=q.exprs[w];if(null==x)continue;"object"==typeof x&&(void 0===x.constructor||dh(x))?v+=a(x,c,d,e,b,g,h):v+=x}return v}if("UNSTABLE_comment"in q)return"<!--"+c4(q.UNSTABLE_comment)+"-->";s=q.children}else{if(null!=(r=p.contextType)){var y=c[r.__c];u=y?y.props.value:r.__}var z=p.prototype&&"function"==typeof p.prototype.render;if(z)s=dj(b,u),t=b.__c;else{b.__c=t={__v:b,context:u,props:b.props,setState:c8,forceUpdate:c8,__d:!0,__h:[]};for(var A=0;t.__d&&A++<25;)t.__d=!1,dc&&dc(b),s=p.call(t,q,u);t.__d=!0}if(null!=t.getChildContext&&(c=di({},c,t.getChildContext())),z&&cy.errorBoundaries&&(p.getDerivedStateFromError||t.componentDidCatch)){s=null!=s&&s.type===cO&&null==s.key&&null==s.props.tpl?s.props.children:s;try{return a(s,c,d,e,b,g,h)}catch(f){return p.getDerivedStateFromError&&(t.__s=p.getDerivedStateFromError(f)),t.componentDidCatch&&t.componentDidCatch(f,df),t.__d?(s=dj(b,c),null!=(t=b.__c).getChildContext&&(c=di({},c,t.getChildContext())),a(s=null!=s&&s.type===cO&&null==s.key&&null==s.props.tpl?s.props.children:s,c,d,e,b,g,h)):""}finally{db&&db(b),b.__=null,dd&&dd(b)}}}s=null!=s&&s.type===cO&&null==s.key&&null==s.props.tpl?s.props.children:s;try{var B=a(s,c,d,e,b,g,h);return db&&db(b),b.__=null,cy.unmount&&cy.unmount(b),B}catch(f){if(!g&&h&&h.onError){var C=h.onError(f,b,function(f){return a(f,c,d,e,b,g,h)});if(void 0!==C)return C;var D=cy.__e;return D&&D(f,b),""}if(!g||!f||"function"!=typeof f.then)throw f;return f.then(function f(){try{return a(s,c,d,e,b,g,h)}catch(i){if(!i||"function"!=typeof i.then)throw i;return i.then(function(){return a(s,c,d,e,b,g,h)},f)}})}}var E,F="<"+p,G="";for(var H in q){var I=q[H];if("function"!=typeof I||"class"===H||"className"===H){switch(H){case"children":E=I;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in q)continue;H="for";break;case"className":if("class"in q)continue;H="class";break;case"defaultChecked":H="checked";break;case"defaultSelected":H="selected";break;case"defaultValue":case"value":switch(H="value",p){case"textarea":E=I;continue;case"select":e=I;continue;case"option":e!=I||"selected"in q||(F+=" selected")}break;case"dangerouslySetInnerHTML":G=I&&I.__html;continue;case"style":"object"==typeof I&&(I=function(a){var b="";for(var c in a){var d=a[c];if(null!=d&&""!==d){var e="-"==c[0]?c:c5[c]||(c5[c]=c.replace(c7,"-$&").toLowerCase()),f=";";"number"!=typeof d||e.startsWith("--")||c6.has(e)||(f="px;"),b=b+e+":"+d+f}}return b||void 0}(I));break;case"acceptCharset":H="accept-charset";break;case"httpEquiv":H="http-equiv";break;default:if(c_.test(H))H=H.replace(c_,"$1:$2").toLowerCase();else{if(c$.test(H))continue;("-"===H[4]||c2.has(H))&&null!=I?I+="":d?c1.test(H)&&(H="panose1"===H?"panose-1":H.replace(/([A-Z])/g,"-$1").toLowerCase()):c0.test(H)&&(H=H.toLowerCase())}}null!=I&&!1!==I&&(F=!0===I||""===I?F+" "+H:F+" "+H+'="'+("string"==typeof I?c4(I):I+"")+'"')}}if(c$.test(p))throw Error(p+" is not a valid HTML tag name in "+F+">");if(G||("string"==typeof E?G=c4(E):null!=E&&!1!==E&&!0!==E&&(G=a(E,c,"svg"===p||"foreignObject"!==p&&d,e,b,g,h))),db&&db(b),b.__=null,dd&&dd(b),!G&&dk.has(p))return F+"/>";var J="</"+p+">",K=F+">";return dh(G)?[K].concat(G,[J]):"string"!=typeof G?[K,G,J]:K+G+J}(a,df,!1,void 0,e,!1,void 0);return dh(f)?f.join(""):f}catch(a){if(a.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw a}finally{cy.__c&&cy.__c(a,dg),cy.__s=d,dg.length=0}}(a)}</div></body></html>`}}function ds(a){let{url:b,theme:c,query:d,cookies:e,pages:f,providers:g}=a;return{csrf:(a,b,c)=>a?(b.logger.warn("csrf-disabled"),c.push({name:b.cookies.csrfToken.name,value:"",options:{...b.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:c}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:b.csrfToken},cookies:c},providers:a=>({headers:{"Content-Type":"application/json"},body:a.reduce((a,{id:b,name:c,type:d,signinUrl:e,callbackUrl:f})=>(a[b]={id:b,name:c,type:d,signinUrl:e,callbackUrl:f},a),{})}),signin(b,h){if(b)throw new P("Unsupported action");if(f?.signIn){let b=`${f.signIn}${f.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:a.callbackUrl??"/"})}`;return h&&(b=`${b}&${new URLSearchParams({error:h})}`),{redirect:b,cookies:e}}let i=g?.find(a=>"webauthn"===a.type&&a.enableConditionalUI&&!!a.simpleWebAuthnBrowserVersion),j="";if(i){let{simpleWebAuthnBrowserVersion:a}=i;j=`<script src="https://unpkg.com/@simplewebauthn/browser@${a}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return dr({cookies:e,theme:c,html:function(a){let{csrfToken:b,providers:c=[],callbackUrl:d,theme:e,email:f,error:g}=a;"undefined"!=typeof document&&e?.brandColor&&document.documentElement.style.setProperty("--brand-color",e.brandColor),"undefined"!=typeof document&&e?.buttonText&&document.documentElement.style.setProperty("--button-text-color",e.buttonText);let h=g&&(dp[g]??dp.default),i=c.find(a=>"webauthn"===a.type&&a.enableConditionalUI)?.id;return dm("div",{className:"signin",children:[e?.brandColor&&dm("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${e.brandColor}}`}}),e?.buttonText&&dm("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${e.buttonText}
        }
      `}}),dm("div",{className:"card",children:[h&&dm("div",{className:"error",children:dm("p",{children:h})}),e?.logo&&dm("img",{src:e.logo,alt:"Logo",className:"logo"}),c.map((a,e)=>{let g,h,i;("oauth"===a.type||"oidc"===a.type)&&({bg:g="#fff",brandColor:h,logo:i=`https://authjs.dev/img/providers/${a.id}.svg`}=a.style??{});let j=h??g??"#fff";return dm("div",{className:"provider",children:["oauth"===a.type||"oidc"===a.type?dm("form",{action:a.signinUrl,method:"POST",children:[dm("input",{type:"hidden",name:"csrfToken",value:b}),d&&dm("input",{type:"hidden",name:"callbackUrl",value:d}),dm("button",{type:"submit",className:"button",style:{"--provider-brand-color":j},tabIndex:0,children:[dm("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",a.name]}),i&&dm("img",{loading:"lazy",height:24,src:i})]})]}):null,("email"===a.type||"credentials"===a.type||"webauthn"===a.type)&&e>0&&"email"!==c[e-1].type&&"credentials"!==c[e-1].type&&"webauthn"!==c[e-1].type&&dm("hr",{}),"email"===a.type&&dm("form",{action:a.signinUrl,method:"POST",children:[dm("input",{type:"hidden",name:"csrfToken",value:b}),dm("label",{className:"section-header",htmlFor:`input-email-for-${a.id}-provider`,children:"Email"}),dm("input",{id:`input-email-for-${a.id}-provider`,autoFocus:!0,type:"email",name:"email",value:f,placeholder:"email@example.com",required:!0}),dm("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),"credentials"===a.type&&dm("form",{action:a.callbackUrl,method:"POST",children:[dm("input",{type:"hidden",name:"csrfToken",value:b}),Object.keys(a.credentials).map(b=>dm("div",{children:[dm("label",{className:"section-header",htmlFor:`input-${b}-for-${a.id}-provider`,children:a.credentials[b].label??b}),dm("input",{name:b,id:`input-${b}-for-${a.id}-provider`,type:a.credentials[b].type??"text",placeholder:a.credentials[b].placeholder??"",...a.credentials[b]})]},`input-group-${a.id}`)),dm("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),"webauthn"===a.type&&dm("form",{action:a.callbackUrl,method:"POST",id:`${a.id}-form`,children:[dm("input",{type:"hidden",name:"csrfToken",value:b}),Object.keys(a.formFields).map(b=>dm("div",{children:[dm("label",{className:"section-header",htmlFor:`input-${b}-for-${a.id}-provider`,children:a.formFields[b].label??b}),dm("input",{name:b,"data-form-field":!0,id:`input-${b}-for-${a.id}-provider`,type:a.formFields[b].type??"text",placeholder:a.formFields[b].placeholder??"",...a.formFields[b]})]},`input-group-${a.id}`)),dm("button",{id:`submitButton-${a.id}`,type:"submit",tabIndex:0,children:["Sign in with ",a.name]})]}),("email"===a.type||"credentials"===a.type||"webauthn"===a.type)&&e+1<c.length&&dm("hr",{})]},a.id)})]}),i&&dm(cO,{children:dm("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${dn})(authURL, "${i}");
`}})})]})}({csrfToken:a.csrfToken,providers:a.providers?.filter(a=>["email","oauth","oidc"].includes(a.type)||"credentials"===a.type&&a.credentials||"webauthn"===a.type&&a.formFields||!1),callbackUrl:a.callbackUrl,theme:a.theme,error:h,...d}),title:"Sign In",headTags:j})},signout:()=>f?.signOut?{redirect:f.signOut,cookies:e}:dr({cookies:e,theme:c,html:function(a){let{url:b,csrfToken:c,theme:d}=a;return dm("div",{className:"signout",children:[d?.brandColor&&dm("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${d.brandColor}
        }
      `}}),d?.buttonText&&dm("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${d.buttonText}
        }
      `}}),dm("div",{className:"card",children:[d?.logo&&dm("img",{src:d.logo,alt:"Logo",className:"logo"}),dm("h1",{children:"Signout"}),dm("p",{children:"Are you sure you want to sign out?"}),dm("form",{action:b?.toString(),method:"POST",children:[dm("input",{type:"hidden",name:"csrfToken",value:c}),dm("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:a.csrfToken,url:b,theme:c}),title:"Sign Out"}),verifyRequest:a=>f?.verifyRequest?{redirect:`${f.verifyRequest}${b?.search??""}`,cookies:e}:dr({cookies:e,theme:c,html:function(a){let{url:b,theme:c}=a;return dm("div",{className:"verify-request",children:[c.brandColor&&dm("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${c.brandColor}
        }
      `}}),dm("div",{className:"card",children:[c.logo&&dm("img",{src:c.logo,alt:"Logo",className:"logo"}),dm("h1",{children:"Check your email"}),dm("p",{children:"A sign in link has been sent to your email address."}),dm("p",{children:dm("a",{className:"site",href:b.origin,children:b.host})})]})]})}({url:b,theme:c,...a}),title:"Verify Request"}),error:a=>f?.error?{redirect:`${f.error}${f.error.includes("?")?"&":"?"}error=${a}`,cookies:e}:dr({cookies:e,theme:c,...function(a){let{url:b,error:c="default",theme:d}=a,e=`${b}/signin`,f={default:{status:200,heading:"Error",message:dm("p",{children:dm("a",{className:"site",href:b?.origin,children:b?.host})})},Configuration:{status:500,heading:"Server error",message:dm("div",{children:[dm("p",{children:"There is a problem with the server configuration."}),dm("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:dm("div",{children:[dm("p",{children:"You do not have permission to sign in."}),dm("p",{children:dm("a",{className:"button",href:e,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:dm("div",{children:[dm("p",{children:"The sign in link is no longer valid."}),dm("p",{children:"It may have been used already or it may have expired."})]}),signin:dm("a",{className:"button",href:e,children:"Sign in"})}},{status:g,heading:h,message:i,signin:j}=f[c]??f.default;return{status:g,html:dm("div",{className:"error",children:[d?.brandColor&&dm("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${d?.brandColor}
        }
      `}}),dm("div",{className:"card",children:[d?.logo&&dm("img",{src:d?.logo,alt:"Logo",className:"logo"}),dm("h1",{children:h}),dm("div",{className:"message",children:i}),j]})]})}}({url:b,theme:c,error:a}),title:"Error"})}}function dt(a,b=Date.now()){return new Date(b+1e3*a)}async function du(a,b,c,d){if(!c?.providerAccountId||!c.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(c.type))throw Error("Provider not supported");let{adapter:e,jwt:f,events:g,session:{strategy:h,generateSessionToken:i}}=d;if(!e)return{user:b,account:c};let j=c,{createUser:k,updateUser:l,getUser:m,getUserByAccount:n,getUserByEmail:o,linkAccount:p,createSession:q,getSessionAndUser:r,deleteSession:s}=e,t=null,u=null,v=!1,w="jwt"===h;if(a)if(w)try{let b=d.cookies.sessionToken.name;(t=await f.decode({...f,token:a,salt:b}))&&"sub"in t&&t.sub&&(u=await m(t.sub))}catch{}else{let b=await r(a);b&&(t=b.session,u=b.user)}if("email"===j.type){let c=await o(b.email);return c?(u?.id!==c.id&&!w&&a&&await s(a),u=await l({id:c.id,emailVerified:new Date}),await g.updateUser?.({user:u})):(u=await k({...b,emailVerified:new Date}),await g.createUser?.({user:u}),v=!0),{session:t=w?{}:await q({sessionToken:i(),userId:u.id,expires:dt(d.session.maxAge)}),user:u,isNewUser:v}}if("webauthn"===j.type){let a=await n({providerAccountId:j.providerAccountId,provider:j.provider});if(a){if(u){if(a.id===u.id){let a={...j,userId:u.id};return{session:t,user:u,isNewUser:v,account:a}}throw new Z("The account is already associated with another user",{provider:j.provider})}t=w?{}:await q({sessionToken:i(),userId:a.id,expires:dt(d.session.maxAge)});let b={...j,userId:a.id};return{session:t,user:a,isNewUser:v,account:b}}{if(u){await p({...j,userId:u.id}),await g.linkAccount?.({user:u,account:j,profile:b});let a={...j,userId:u.id};return{session:t,user:u,isNewUser:v,account:a}}if(b.email?await o(b.email):null)throw new Z("Another account already exists with the same e-mail address",{provider:j.provider});u=await k({...b}),await g.createUser?.({user:u}),await p({...j,userId:u.id}),await g.linkAccount?.({user:u,account:j,profile:b}),t=w?{}:await q({sessionToken:i(),userId:u.id,expires:dt(d.session.maxAge)});let a={...j,userId:u.id};return{session:t,user:u,isNewUser:!0,account:a}}}let x=await n({providerAccountId:j.providerAccountId,provider:j.provider});if(x){if(u){if(x.id===u.id)return{session:t,user:u,isNewUser:v};throw new K("The account is already associated with another user",{provider:j.provider})}return{session:t=w?{}:await q({sessionToken:i(),userId:x.id,expires:dt(d.session.maxAge)}),user:x,isNewUser:v}}{let{provider:a}=d,{type:c,provider:e,providerAccountId:f,userId:h,...l}=j;if(j=Object.assign(a.account(l)??{},{providerAccountId:f,provider:e,type:c,userId:h}),u)return await p({...j,userId:u.id}),await g.linkAccount?.({user:u,account:j,profile:b}),{session:t,user:u,isNewUser:v};let m=b.email?await o(b.email):null;if(m){let a=d.provider;if(a?.allowDangerousEmailAccountLinking)u=m,v=!1;else throw new K("Another account already exists with the same e-mail address",{provider:j.provider})}else u=await k({...b,emailVerified:null}),v=!0;return await g.createUser?.({user:u}),await p({...j,userId:u.id}),await g.linkAccount?.({user:u,account:j,profile:b}),{session:t=w?{}:await q({sessionToken:i(),userId:u.id,expires:dt(d.session.maxAge)}),user:u,isNewUser:v}}}function dv(a,b){if(null==a)return!1;try{return a instanceof b||Object.getPrototypeOf(a)[Symbol.toStringTag]===b.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="oauth4webapi/v3.8.3");let dw="ERR_INVALID_ARG_VALUE",dx="ERR_INVALID_ARG_TYPE";function dy(a,b,c){let d=TypeError(a,{cause:c});return Object.assign(d,{code:b}),d}let dz=Symbol(),dA=Symbol(),dB=Symbol(),dC=Symbol(),dD=Symbol(),dE=Symbol();Symbol();let dF=new TextEncoder,dG=new TextDecoder;function dH(a){return"string"==typeof a?dF.encode(a):dG.decode(a)}function dI(a){return"string"==typeof a?f(a):e(a)}e=Uint8Array.prototype.toBase64?a=>(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a.toBase64({alphabet:"base64url",omitPadding:!0})):a=>{a instanceof ArrayBuffer&&(a=new Uint8Array(a));let b=[];for(let c=0;c<a.byteLength;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},f=Uint8Array.fromBase64?a=>{try{return Uint8Array.fromBase64(a,{alphabet:"base64url"})}catch(a){throw dy("The input to be decoded is not correctly encoded.",dw,a)}}:a=>{try{let b=atob(a.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}catch(a){throw dy("The input to be decoded is not correctly encoded.",dw,a)}};class dJ extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=eK,Error.captureStackTrace?.(this,this.constructor)}}class dK extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,b?.code&&(this.code=b?.code),Error.captureStackTrace?.(this,this.constructor)}}function dL(a,b,c){return new dK(a,{code:b,cause:c})}function dM(a){return!(null===a||"object"!=typeof a||Array.isArray(a))}function dN(a){dv(a,Headers)&&(a=Object.fromEntries(a.entries()));let b=new Headers(a??{});if(d&&!b.has("user-agent")&&b.set("user-agent",d),b.has("authorization"))throw dy('"options.headers" must not include the "authorization" header name',dw);return b}function dO(a,b){if(void 0!==b){if("function"==typeof b&&(b=b(a.href)),!(b instanceof AbortSignal))throw dy('"options.signal" must return or be an instance of AbortSignal',dx);return b}}function dP(a){return a.includes("//")?a.replace("//","/"):a}async function dQ(a,b,c,d){if(!(a instanceof URL))throw dy(`"${b}" must be an instance of URL`,dx);d4(a,d?.[dz]!==!0);let e=c(new URL(a.href)),f=dN(d?.headers);return f.set("accept","application/json"),(d?.[dC]||fetch)(e.href,{body:void 0,headers:Object.fromEntries(f.entries()),method:"GET",redirect:"manual",signal:dO(e,d?.signal)})}async function dR(a,b){return dQ(a,"issuerIdentifier",a=>{switch(b?.algorithm){case void 0:case"oidc":a.pathname=dP(`${a.pathname}/.well-known/openid-configuration`);break;case"oauth2":!function(a,b,c=!1){"/"===a.pathname?a.pathname=b:a.pathname=dP(`${b}/${c?a.pathname:a.pathname.replace(/(\/)$/,"")}`)}(a,".well-known/oauth-authorization-server");break;default:throw dy('"options.algorithm" must be "oidc" (default), or "oauth2"',dw)}return a},b)}function dS(a,b,c,d,e){try{if("number"!=typeof a||!Number.isFinite(a))throw dy(`${c} must be a number`,dx,e);if(a>0)return;if(b){if(0!==a)throw dy(`${c} must be a non-negative number`,dw,e);return}throw dy(`${c} must be a positive number`,dw,e)}catch(a){if(d)throw dL(a.message,d,e);throw a}}function dT(a,b,c,d){try{if("string"!=typeof a)throw dy(`${b} must be a string`,dx,d);if(0===a.length)throw dy(`${b} must not be empty`,dw,d)}catch(a){if(c)throw dL(a.message,c,d);throw a}}async function dU(a,b){if(!(a instanceof URL)&&a!==e4)throw dy('"expectedIssuerIdentifier" must be an instance of URL',dx);if(!dv(b,Response))throw dy('"response" must be an instance of Response',dx);if(200!==b.status)throw dL('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',eQ,b);eY(b);let c=await e3(b);if(dT(c.issuer,'"response" body "issuer" property',eO,{body:c}),a!==e4&&new URL(c.issuer).href!==a.href)throw dL('"response" body "issuer" property does not match the expected value',eV,{expected:a.href,body:c,attribute:"issuer"});return c}function dV(a){var b=a,c="application/json";if(el(b)!==c)throw function(a,...b){let c='"response" content-type must be ';if(b.length>2){let a=b.pop();c+=`${b.join(", ")}, or ${a}`}else 2===b.length?c+=`${b[0]} or ${b[1]}`:c+=b[0];return dL(c,eP,a)}(b,c)}function dW(){return dI(crypto.getRandomValues(new Uint8Array(32)))}async function dX(a){return dT(a,"codeVerifier"),dI(await crypto.subtle.digest("SHA-256",dH(a)))}function dY(a){let b=a?.[dA];return"number"==typeof b&&Number.isFinite(b)?b:0}function dZ(a){let b=a?.[dB];return"number"==typeof b&&Number.isFinite(b)&&-1!==Math.sign(b)?b:30}function d$(){return Math.floor(Date.now()/1e3)}function d_(a){if("object"!=typeof a||null===a)throw dy('"as" must be an object',dx);dT(a.issuer,'"as.issuer"')}function d0(a){if("object"!=typeof a||null===a)throw dy('"client" must be an object',dx);dT(a.client_id,'"client.client_id"')}function d1(a,b){let c=d$()+dY(b);return{jti:dW(),aud:a.issuer,exp:c+60,iat:c,nbf:c,iss:b.client_id,sub:b.client_id}}async function d2(a,b,c){if(!c.usages.includes("sign"))throw dy('CryptoKey instances used for signing assertions must include "sign" in their "usages"',dw);let d=`${dI(dH(JSON.stringify(a)))}.${dI(dH(JSON.stringify(b)))}`,e=dI(await crypto.subtle.sign(function(a){switch(a.algorithm.name){case"ECDSA":return{name:a.algorithm.name,hash:function(a){let{algorithm:b}=a;switch(b.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new dJ("unsupported ECDSA namedCurve",{cause:a})}}(a)};case"RSA-PSS":switch(eZ(a),a.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:a.algorithm.name,saltLength:parseInt(a.algorithm.hash.name.slice(-3),10)>>3};default:throw new dJ("unsupported RSA-PSS hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":return eZ(a),a.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return a.algorithm.name}throw new dJ("unsupported CryptoKey algorithm name",{cause:a})}(c),c,dH(d)));return`${d}.${e}`}let d3=URL.parse?(a,b)=>URL.parse(a,b):(a,b)=>{try{return new URL(a,b)}catch{return null}};function d4(a,b){if(b&&"https:"!==a.protocol)throw dL("only requests to HTTPS are allowed",eR,a);if("https:"!==a.protocol&&"http:"!==a.protocol)throw dL("only HTTP and HTTPS requests are allowed",eS,a)}function d5(a,b,c,d){let e;if("string"!=typeof a||!(e=d3(a)))throw dL(`authorization server metadata does not contain a valid ${c?`"as.mtls_endpoint_aliases.${b}"`:`"as.${b}"`}`,void 0===a?eW:eX,{attribute:c?`mtls_endpoint_aliases.${b}`:b});return d4(e,d),e}function d6(a,b,c,d){return c&&a.mtls_endpoint_aliases&&b in a.mtls_endpoint_aliases?d5(a.mtls_endpoint_aliases[b],b,c,d):d5(a[b],b,c,d)}class d7 extends Error{cause;code;error;status;error_description;response;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=eJ,this.cause=b.cause,this.error=b.cause.error,this.status=b.response.status,this.error_description=b.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:b.response}),Error.captureStackTrace?.(this,this.constructor)}}class d8 extends Error{cause;code;error;error_description;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=eL,this.cause=b.cause,this.error=b.cause.get("error"),this.error_description=b.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class d9 extends Error{cause;code;response;status;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=eI,this.cause=b.cause,this.status=b.response.status,this.response=b.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let ea="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",eb=RegExp("^[,\\s]*("+ea+")"),ec=RegExp("^[,\\s]*("+ea+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),ed=RegExp("^[,\\s]*"+("("+ea+")\\s*=\\s*(")+ea+")[,\\s]*(.*)"),ee=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function ef(a){if(a.status>399&&a.status<500){eY(a),dV(a);try{let b=await a.clone().json();if(dM(b)&&"string"==typeof b.error&&b.error.length)return b}catch{}}}async function eg(a,b,c){if(a.status!==b){let b;if(et(a),b=await ef(a))throw await a.body?.cancel(),new d7("server responded with an error in the response body",{cause:b,response:a});throw dL(`"response" is not a conform ${c} response (unexpected HTTP status code)`,eQ,a)}}function eh(a){if(!ey.has(a))throw dy('"options.DPoP" is not a valid DPoPHandle',dw)}async function ei(a,b,c,d,e,f){if(dT(a,'"accessToken"'),!(c instanceof URL))throw dy('"url" must be an instance of URL',dx);d4(c,f?.[dz]!==!0),d=dN(d),f?.DPoP&&(eh(f.DPoP),await f.DPoP.addProof(c,d,b.toUpperCase(),a)),d.set("authorization",`${d.has("dpop")?"DPoP":"Bearer"} ${a}`);let g=await (f?.[dC]||fetch)(c.href,{body:e,headers:Object.fromEntries(d.entries()),method:b,redirect:"manual",signal:dO(c,f?.signal)});return f?.DPoP?.cacheNonce(g,c),g}async function ej(a,b,c,d){d_(a),d0(b);let e=d6(a,"userinfo_endpoint",b.use_mtls_endpoint_aliases,d?.[dz]!==!0),f=dN(d?.headers);return b.userinfo_signed_response_alg?f.set("accept","application/jwt"):(f.set("accept","application/json"),f.append("accept","application/jwt")),ei(c,"GET",e,f,null,{...d,[dA]:dY(b)})}let ek=Symbol();function el(a){return a.headers.get("content-type")?.split(";")[0]}async function em(a,b,c,d,e){let f;if(d_(a),d0(b),!dv(d,Response))throw dy('"response" must be an instance of Response',dx);if(et(d),200!==d.status)throw dL('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',eQ,d);if(eY(d),"application/jwt"===el(d)){let{claims:c,jwt:g}=await e$(await d.text(),e_.bind(void 0,b.userinfo_signed_response_alg,a.userinfo_signing_alg_values_supported,void 0),dY(b),dZ(b),e?.[dE]).then(eu.bind(void 0,b.client_id)).then(ew.bind(void 0,a));eq.set(d,g),f=c}else{if(b.userinfo_signed_response_alg)throw dL("JWT UserInfo Response expected",eM,d);f=await e3(d)}if(dT(f.sub,'"response" body "sub" property',eO,{body:f}),c===ek);else if(dT(c,'"expectedSubject"'),f.sub!==c)throw dL('unexpected "response" body "sub" property value',eV,{expected:c,body:f,attribute:"sub"});return f}async function en(a,b,c,d,e,f,g){return await c(a,b,e,f),f.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(g?.[dC]||fetch)(d.href,{body:e,headers:Object.fromEntries(f.entries()),method:"POST",redirect:"manual",signal:dO(d,g?.signal)})}async function eo(a,b,c,d,e,f){let g=d6(a,"token_endpoint",b.use_mtls_endpoint_aliases,f?.[dz]!==!0);e.set("grant_type",d);let h=dN(f?.headers);h.set("accept","application/json"),f?.DPoP!==void 0&&(eh(f.DPoP),await f.DPoP.addProof(g,h,"POST"));let i=await en(a,b,c,g,e,h,f);return f?.DPoP?.cacheNonce(i,g),i}let ep=new WeakMap,eq=new WeakMap;function er(a){if(!a.id_token)return;let b=ep.get(a);if(!b)throw dy('"ref" was already garbage collected or did not resolve from the proper sources',dw);return b}async function es(a,b,c,d,e,f){if(d_(a),d0(b),!dv(c,Response))throw dy('"response" must be an instance of Response',dx);await eg(c,200,"Token Endpoint"),eY(c);let g=await e3(c);if(dT(g.access_token,'"response" body "access_token" property',eO,{body:g}),dT(g.token_type,'"response" body "token_type" property',eO,{body:g}),g.token_type=g.token_type.toLowerCase(),void 0!==g.expires_in){let a="number"!=typeof g.expires_in?parseFloat(g.expires_in):g.expires_in;dS(a,!0,'"response" body "expires_in" property',eO,{body:g}),g.expires_in=a}if(void 0!==g.refresh_token&&dT(g.refresh_token,'"response" body "refresh_token" property',eO,{body:g}),void 0!==g.scope&&"string"!=typeof g.scope)throw dL('"response" body "scope" property must be a string',eO,{body:g});if(void 0!==g.id_token){dT(g.id_token,'"response" body "id_token" property',eO,{body:g});let f=["aud","exp","iat","iss","sub"];!0===b.require_auth_time&&f.push("auth_time"),void 0!==b.default_max_age&&(dS(b.default_max_age,!0,'"client.default_max_age"'),f.push("auth_time")),d?.length&&f.push(...d);let{claims:h,jwt:i}=await e$(g.id_token,e_.bind(void 0,b.id_token_signed_response_alg,a.id_token_signing_alg_values_supported,"RS256"),dY(b),dZ(b),e).then(eC.bind(void 0,f)).then(ex.bind(void 0,a)).then(ev.bind(void 0,b.client_id));if(Array.isArray(h.aud)&&1!==h.aud.length){if(void 0===h.azp)throw dL('ID Token "aud" (audience) claim includes additional untrusted audiences',eU,{claims:h,claim:"aud"});if(h.azp!==b.client_id)throw dL('unexpected ID Token "azp" (authorized party) claim value',eU,{expected:b.client_id,claims:h,claim:"azp"})}void 0!==h.auth_time&&dS(h.auth_time,!0,'ID Token "auth_time" (authentication time)',eO,{claims:h}),eq.set(c,i),ep.set(g,h)}if(f?.[g.token_type]!==void 0)f[g.token_type](c,g);else if("dpop"!==g.token_type&&"bearer"!==g.token_type)throw new dJ("unsupported `token_type` value",{cause:{body:g}});return g}function et(a){let b;if(b=function(a){if(!dv(a,Response))throw dy('"response" must be an instance of Response',dx);let b=a.headers.get("www-authenticate");if(null===b)return;let c=[],d=b;for(;d;){let a,b=d.match(eb),e=b?.["1"].toLowerCase();if(!e)return;let f=d.substring(b[0].length);if(f&&!f.match(/^[\s,]/))return;let g=f.match(/^\s+(.*)$/),h=!!g;d=g?g[1]:void 0;let i={};if(h)for(;d;){let c,e;if(b=d.match(ec)){if([,c,e,d]=b,e.includes("\\"))try{e=JSON.parse(`"${e}"`)}catch{}i[c.toLowerCase()]=e;continue}if(b=d.match(ed)){[,c,e,d]=b,i[c.toLowerCase()]=e;continue}if(b=d.match(ee)){if(Object.keys(i).length)break;[,a,d]=b;break}return}else d=f||void 0;let j={scheme:e,parameters:i};a&&(j.token68=a),c.push(j)}if(c.length)return c}(a))throw new d9("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:b,response:a})}function eu(a,b){return void 0!==b.claims.aud?ev(a,b):b}function ev(a,b){if(Array.isArray(b.claims.aud)){if(!b.claims.aud.includes(a))throw dL('unexpected JWT "aud" (audience) claim value',eU,{expected:a,claims:b.claims,claim:"aud"})}else if(b.claims.aud!==a)throw dL('unexpected JWT "aud" (audience) claim value',eU,{expected:a,claims:b.claims,claim:"aud"});return b}function ew(a,b){return void 0!==b.claims.iss?ex(a,b):b}function ex(a,b){let c=a[e5]?.(b)??a.issuer;if(b.claims.iss!==c)throw dL('unexpected JWT "iss" (issuer) claim value',eU,{expected:c,claims:b.claims,claim:"iss"});return b}let ey=new WeakSet,ez=Symbol();async function eA(a,b,c,d,e,f,g){if(d_(a),d0(b),!ey.has(d))throw dy('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',dw);dT(e,'"redirectUri"');let h=e0(d,"code");if(!h)throw dL('no authorization code in "callbackParameters"',eO);let i=new URLSearchParams(g?.additionalParameters);return i.set("redirect_uri",e),i.set("code",h),f!==ez&&(dT(f,'"codeVerifier"'),i.set("code_verifier",f)),eo(a,b,c,"authorization_code",i,g)}let eB={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function eC(a,b){for(let c of a)if(void 0===b.claims[c])throw dL(`JWT "${c}" (${eB[c]}) claim missing`,eO,{claims:b.claims});return b}let eD=Symbol(),eE=Symbol();async function eF(a,b,c,d){return"string"==typeof d?.expectedNonce||"number"==typeof d?.maxAge||d?.requireIdToken?eG(a,b,c,d.expectedNonce,d.maxAge,d[dE],d.recognizedTokenTypes):eH(a,b,c,d?.[dE],d?.recognizedTokenTypes)}async function eG(a,b,c,d,e,f,g){let h=[];switch(d){case void 0:d=eD;break;case eD:break;default:dT(d,'"expectedNonce" argument'),h.push("nonce")}switch(e??=b.default_max_age){case void 0:e=eE;break;case eE:break;default:dS(e,!0,'"maxAge" argument'),h.push("auth_time")}let i=await es(a,b,c,h,f,g);dT(i.id_token,'"response" body "id_token" property',eO,{body:i});let j=er(i);if(e!==eE){let a=d$()+dY(b),c=dZ(b);if(j.auth_time+e<a-c)throw dL("too much time has elapsed since the last End-User authentication",eT,{claims:j,now:a,tolerance:c,claim:"auth_time"})}if(d===eD){if(void 0!==j.nonce)throw dL('unexpected ID Token "nonce" claim value',eU,{expected:void 0,claims:j,claim:"nonce"})}else if(j.nonce!==d)throw dL('unexpected ID Token "nonce" claim value',eU,{expected:d,claims:j,claim:"nonce"});return i}async function eH(a,b,c,d,e){let f=await es(a,b,c,void 0,d,e),g=er(f);if(g){if(void 0!==b.default_max_age){dS(b.default_max_age,!0,'"client.default_max_age"');let a=d$()+dY(b),c=dZ(b);if(g.auth_time+b.default_max_age<a-c)throw dL("too much time has elapsed since the last End-User authentication",eT,{claims:g,now:a,tolerance:c,claim:"auth_time"})}if(void 0!==g.nonce)throw dL('unexpected ID Token "nonce" claim value',eU,{expected:void 0,claims:g,claim:"nonce"})}return f}let eI="OAUTH_WWW_AUTHENTICATE_CHALLENGE",eJ="OAUTH_RESPONSE_BODY_ERROR",eK="OAUTH_UNSUPPORTED_OPERATION",eL="OAUTH_AUTHORIZATION_RESPONSE_ERROR",eM="OAUTH_JWT_USERINFO_EXPECTED",eN="OAUTH_PARSE_ERROR",eO="OAUTH_INVALID_RESPONSE",eP="OAUTH_RESPONSE_IS_NOT_JSON",eQ="OAUTH_RESPONSE_IS_NOT_CONFORM",eR="OAUTH_HTTP_REQUEST_FORBIDDEN",eS="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",eT="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",eU="OAUTH_JWT_CLAIM_COMPARISON_FAILED",eV="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",eW="OAUTH_MISSING_SERVER_METADATA",eX="OAUTH_INVALID_SERVER_METADATA";function eY(a){if(a.bodyUsed)throw dy('"response" body has been used already',dw)}function eZ(a){let{algorithm:b}=a;if("number"!=typeof b.modulusLength||b.modulusLength<2048)throw new dJ(`unsupported ${b.name} modulusLength`,{cause:a})}async function e$(a,b,c,d,e){let f,g,{0:h,1:i,length:j}=a.split(".");if(5===j)if(void 0!==e)a=await e(a),{0:h,1:i,length:j}=a.split(".");else throw new dJ("JWE decryption is not configured",{cause:a});if(3!==j)throw dL("Invalid JWT",eO,a);try{f=JSON.parse(dH(dI(h)))}catch(a){throw dL("failed to parse JWT Header body as base64url encoded JSON",eN,a)}if(!dM(f))throw dL("JWT Header must be a top level object",eO,a);if(b(f),void 0!==f.crit)throw new dJ('no JWT "crit" header parameter extensions are supported',{cause:{header:f}});try{g=JSON.parse(dH(dI(i)))}catch(a){throw dL("failed to parse JWT Payload body as base64url encoded JSON",eN,a)}if(!dM(g))throw dL("JWT Payload must be a top level object",eO,a);let k=d$()+c;if(void 0!==g.exp){if("number"!=typeof g.exp)throw dL('unexpected JWT "exp" (expiration time) claim type',eO,{claims:g});if(g.exp<=k-d)throw dL('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',eT,{claims:g,now:k,tolerance:d,claim:"exp"})}if(void 0!==g.iat&&"number"!=typeof g.iat)throw dL('unexpected JWT "iat" (issued at) claim type',eO,{claims:g});if(void 0!==g.iss&&"string"!=typeof g.iss)throw dL('unexpected JWT "iss" (issuer) claim type',eO,{claims:g});if(void 0!==g.nbf){if("number"!=typeof g.nbf)throw dL('unexpected JWT "nbf" (not before) claim type',eO,{claims:g});if(g.nbf>k+d)throw dL('unexpected JWT "nbf" (not before) claim value',eT,{claims:g,now:k,tolerance:d,claim:"nbf"})}if(void 0!==g.aud&&"string"!=typeof g.aud&&!Array.isArray(g.aud))throw dL('unexpected JWT "aud" (audience) claim type',eO,{claims:g});return{header:f,claims:g,jwt:a}}function e_(a,b,c,d){if(void 0!==a){if("string"==typeof a?d.alg!==a:!a.includes(d.alg))throw dL('unexpected JWT "alg" header parameter',eO,{header:d,expected:a,reason:"client configuration"});return}if(Array.isArray(b)){if(!b.includes(d.alg))throw dL('unexpected JWT "alg" header parameter',eO,{header:d,expected:b,reason:"authorization server metadata"});return}if(void 0!==c){if("string"==typeof c?d.alg!==c:"function"==typeof c?!c(d.alg):!c.includes(d.alg))throw dL('unexpected JWT "alg" header parameter',eO,{header:d,expected:c,reason:"default value"});return}throw dL('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:a,issuer:b,fallback:c})}function e0(a,b){let{0:c,length:d}=a.getAll(b);if(d>1)throw dL(`"${b}" parameter must be provided only once`,eO);return c}let e1=Symbol(),e2=Symbol();async function e3(a,b=dV){let c;try{c=await a.json()}catch(c){throw b(a),dL('failed to parse "response" body as JSON',eN,c)}if(!dM(c))throw dL('"response" body must be a top level object',eO,{body:c});return c}let e4=Symbol(),e5=Symbol();async function e6(a,b,c){let{cookies:d,logger:e}=c,f=d[a],g=new Date;g.setTime(g.getTime()+9e5),e.debug(`CREATE_${a.toUpperCase()}`,{name:f.name,payload:b,COOKIE_TTL:900,expires:g});let h=await bZ({...c.jwt,maxAge:900,token:{value:b},salt:f.name}),i={...f.options,expires:g};return{name:f.name,value:h,options:i}}async function e7(a,b,c){try{let{logger:d,cookies:e,jwt:f}=c;if(d.debug(`PARSE_${a.toUpperCase()}`,{cookie:b}),!b)throw new E(`${a} cookie was missing`);let g=await b$({...f,token:b,salt:e[a].name});if(g?.value)return g.value;throw Error("Invalid cookie")}catch(b){throw new E(`${a} value could not be parsed`,{cause:b})}}function e8(a,b,c){let{logger:d,cookies:e}=b,f=e[a];d.debug(`CLEAR_${a.toUpperCase()}`,{cookie:f}),c.push({name:f.name,value:"",options:{...e[a].options,maxAge:0}})}function e9(a,b){return async function(c,d,e){let{provider:f,logger:g}=e;if(!f?.checks?.includes(a))return;let h=c?.[e.cookies[b].name];g.debug(`USE_${b.toUpperCase()}`,{value:h});let i=await e7(b,h,e);return e8(b,e,d),i}}let fa={async create(a){let b=dW(),c=await dX(b);return{cookie:await e6("pkceCodeVerifier",b,a),value:c}},use:e9("pkce","pkceCodeVerifier")},fb="encodedState",fc={async create(a,b){let{provider:c}=a;if(!c.checks.includes("state")){if(b)throw new E("State data was provided but the provider is not configured to use state");return}let d={origin:b,random:dW()},e=await bZ({secret:a.jwt.secret,token:d,salt:fb,maxAge:900});return{cookie:await e6("state",e,a),value:e}},use:e9("state","state"),async decode(a,b){try{b.logger.debug("DECODE_STATE",{state:a});let c=await b$({secret:b.jwt.secret,token:a,salt:fb});if(c)return c;throw Error("Invalid state")}catch(a){throw new E("State could not be decoded",{cause:a})}}},fd={async create(a){if(!a.provider.checks.includes("nonce"))return;let b=dW();return{cookie:await e6("nonce",b,a),value:b}},use:e9("nonce","nonce")},fe="encodedWebauthnChallenge",ff={create:async(a,b,c)=>({cookie:await e6("webauthnChallenge",await bZ({secret:a.jwt.secret,token:{challenge:b,registerData:c},salt:fe,maxAge:900}),a)}),async use(a,b,c){let d=b?.[a.cookies.webauthnChallenge.name],e=await e7("webauthnChallenge",d,a),f=await b$({secret:a.jwt.secret,token:e,salt:fe});if(e8("webauthnChallenge",a,c),!f)throw new E("WebAuthn challenge was missing");return f}};function fg(a){return encodeURIComponent(a).replace(/%20/g,"+")}async function fh(a,b,c){var d,e;let f,g,h,i,j,{logger:k,provider:l}=c,{token:m,userinfo:n}=l;if(m?.url&&"authjs.dev"!==m.url.host||n?.url&&"authjs.dev"!==n.url.host)f={issuer:l.issuer??"https://authjs.dev",token_endpoint:m?.url.toString(),userinfo_endpoint:n?.url.toString()};else{let a=new URL(l.issuer),b=await dR(a,{[dz]:!0,[dC]:l[cj]});if(!(f=await dU(a,b)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!f.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let o={client_id:l.clientId,...l.client};switch(o.token_endpoint_auth_method){case void 0:case"client_secret_basic":g=(a,b,c,d)=>{var e,f;let g,h,i;d.set("authorization",(e=l.clientId,f=l.clientSecret,g=fg(e),h=fg(f),i=btoa(`${g}:${h}`),`Basic ${i}`))};break;case"client_secret_post":dT(d=l.clientSecret,'"clientSecret"'),g=(a,b,c,e)=>{c.set("client_id",b.client_id),c.set("client_secret",d)};break;case"client_secret_jwt":dT(e=l.clientSecret,'"clientSecret"'),j=void 0,g=async(a,b,c,d)=>{i||=await crypto.subtle.importKey("raw",dH(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let f={alg:"HS256"},g=d1(a,b);j?.(f,g);let h=`${dI(dH(JSON.stringify(f)))}.${dI(dH(JSON.stringify(g)))}`,k=await crypto.subtle.sign(i.algorithm,i,dH(h));c.set("client_id",b.client_id),c.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),c.set("client_assertion",`${h}.${dI(new Uint8Array(k))}`)};break;case"private_key_jwt":g=function(a,b){let{key:c,kid:d}=a instanceof CryptoKey?{key:a}:a?.key instanceof CryptoKey?(void 0!==a.kid&&dT(a.kid,'"kid"'),{key:a.key,kid:a.kid}):{};var e='"clientPrivateKey.key"';if(!(c instanceof CryptoKey))throw dy(`${e} must be a CryptoKey`,dx);if("private"!==c.type)throw dy(`${e} must be a private CryptoKey`,dw);return async(a,e,f,g)=>{let h={alg:function(a){switch(a.algorithm.name){case"RSA-PSS":switch(a.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new dJ("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":switch(a.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new dJ("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"ECDSA":switch(a.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new dJ("unsupported EcKeyAlgorithm namedCurve",{cause:a})}case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return a.algorithm.name;case"EdDSA":return"Ed25519";default:throw new dJ("unsupported CryptoKey algorithm name",{cause:a})}}(c),kid:d},i=d1(a,e);b?.[dD]?.(h,i),f.set("client_id",e.client_id),f.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),f.set("client_assertion",await d2(h,i,c))}}(l.token.clientPrivateKey,{[dD](a,b){b.aud=[f.issuer,f.token_endpoint]}});break;case"none":g=(a,b,c,d)=>{c.set("client_id",b.client_id)};break;default:throw Error("unsupported client authentication method")}let p=[],q=await fc.use(b,p,c);try{h=function(a,b,c,d){var e;if(d_(a),d0(b),c instanceof URL&&(c=c.searchParams),!(c instanceof URLSearchParams))throw dy('"parameters" must be an instance of URLSearchParams, or URL',dx);if(e0(c,"response"))throw dL('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',eO,{parameters:c});let f=e0(c,"iss"),g=e0(c,"state");if(!f&&a.authorization_response_iss_parameter_supported)throw dL('response parameter "iss" (issuer) missing',eO,{parameters:c});if(f&&f!==a.issuer)throw dL('unexpected "iss" (issuer) response parameter value',eO,{expected:a.issuer,parameters:c});switch(d){case void 0:case e2:if(void 0!==g)throw dL('unexpected "state" response parameter encountered',eO,{expected:void 0,parameters:c});break;case e1:break;default:if(dT(d,'"expectedState" argument'),g!==d)throw dL(void 0===g?'response parameter "state" missing':'unexpected "state" response parameter value',eO,{expected:d,parameters:c})}if(e0(c,"error"))throw new d8("authorization response from the server is an error",{cause:c});let h=e0(c,"id_token"),i=e0(c,"token");if(void 0!==h||void 0!==i)throw new dJ("implicit and hybrid flows are not supported");return e=new URLSearchParams(c),ey.add(e),e}(f,o,new URLSearchParams(a),l.checks.includes("state")?q:e1)}catch(a){if(a instanceof d8){let b={providerId:l.id,...Object.fromEntries(a.cause.entries())};throw k.debug("OAuthCallbackError",b),new L("OAuth Provider returned an error",b)}throw a}let r=await fa.use(b,p,c),s=l.callbackUrl;!c.isOnRedirectProxy&&l.redirectProxyUrl&&(s=l.redirectProxyUrl);let t=await eA(f,o,g,h,s,r??"decoy",{[dz]:!0,[dC]:(...a)=>(l.checks.includes("pkce")||a[1].body.delete("code_verifier"),(l[cj]??fetch)(...a))});l.token?.conform&&(t=await l.token.conform(t.clone())??t);let u={},v="oidc"===l.type;if(l[ck])switch(l.id){case"microsoft-entra-id":case"azure-ad":{let a=await t.clone().json();if(a.error){let b={providerId:l.id,...a};throw new L(`OAuth Provider returned an error: ${a.error}`,b)}let{tid:b}=function(a){let b,c;if("string"!=typeof a)throw new aC("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new aC("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new aC("Invalid JWT");if(!d)throw new aC("JWTs must contain a payload");try{b=as(d)}catch{throw new aC("Failed to base64url decode the payload")}try{c=JSON.parse(am.decode(b))}catch{throw new aC("Failed to parse the decoded payload as JSON")}if(!a8(c))throw new aC("Invalid JWT Claims Set");return c}(a.id_token);if("string"==typeof b){let a=f.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",c=new URL(f.issuer.replace(a,b)),d=await dR(c,{[dC]:l[cj]});f=await dU(c,d)}}}let w=await eF(f,o,t,{expectedNonce:await fd.use(b,p,c),requireIdToken:v});if(v){let b=er(w);if(u=b,l[ck]&&"apple"===l.id)try{u.user=JSON.parse(a?.user)}catch{}if(!1===l.idToken){let a=await ej(f,o,w.access_token,{[dC]:l[cj],[dz]:!0});u=await em(f,o,b.sub,a)}}else if(n?.request){let a=await n.request({tokens:w,provider:l});a instanceof Object&&(u=a)}else if(n?.url){let a=await ej(f,o,w.access_token,{[dC]:l[cj],[dz]:!0});u=await a.json()}else throw TypeError("No userinfo endpoint configured");return w.expires_in&&(w.expires_at=Math.floor(Date.now()/1e3)+Number(w.expires_in)),{...await fi(u,l,w,k),profile:u,cookies:p}}async function fi(a,b,c,d){try{let d=await b.profile(a,c);return{user:{...d,id:crypto.randomUUID(),email:d.email?.toLowerCase()},account:{...c,provider:b.id,type:b.type,providerAccountId:d.id??crypto.randomUUID()}}}catch(c){d.debug("getProfile error details",a),d.error(new M(c,{provider:b.id}))}}async function fj(a,b,c,d){let e=await fo(a,b,c),{cookie:f}=await ff.create(a,e.challenge,c);return{status:200,cookies:[...d??[],f],body:{action:"register",options:e},headers:{"Content-Type":"application/json"}}}async function fk(a,b,c,d){let e=await fn(a,b,c),{cookie:f}=await ff.create(a,e.challenge);return{status:200,cookies:[...d??[],f],body:{action:"authenticate",options:e},headers:{"Content-Type":"application/json"}}}async function fl(a,b,c){let d,{adapter:e,provider:f}=a,g=b.body&&"string"==typeof b.body.data?JSON.parse(b.body.data):void 0;if(!g||"object"!=typeof g||!("id"in g)||"string"!=typeof g.id)throw new u("Invalid WebAuthn Authentication response");let h=fr(fq(g.id)),i=await e.getAuthenticator(h);if(!i)throw new u(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:h})}`);let{challenge:j}=await ff.use(a,b.cookies,c);try{var k;let c=f.getRelayingParty(a,b);d=await f.simpleWebAuthn.verifyAuthenticationResponse({...f.verifyAuthenticationOptions,expectedChallenge:j,response:g,authenticator:{...k=i,credentialDeviceType:k.credentialDeviceType,transports:fs(k.transports),credentialID:fq(k.credentialID),credentialPublicKey:fq(k.credentialPublicKey)},expectedOrigin:c.origin,expectedRPID:c.id})}catch(a){throw new Y(a)}let{verified:l,authenticationInfo:m}=d;if(!l)throw new Y("WebAuthn authentication response could not be verified");try{let{newCounter:a}=m;await e.updateAuthenticatorCounter(i.credentialID,a)}catch(a){throw new w(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:h,oldCounter:i.counter,newCounter:m.newCounter})}`,a)}let n=await e.getAccount(i.providerAccountId,f.id);if(!n)throw new u(`WebAuthn account not found in database: ${JSON.stringify({credentialID:h,providerAccountId:i.providerAccountId})}`);let o=await e.getUser(n.userId);if(!o)throw new u(`WebAuthn user not found in database: ${JSON.stringify({credentialID:h,providerAccountId:i.providerAccountId,userID:n.userId})}`);return{account:n,user:o}}async function fm(a,b,c){var d;let e,{provider:f}=a,g=b.body&&"string"==typeof b.body.data?JSON.parse(b.body.data):void 0;if(!g||"object"!=typeof g||!("id"in g)||"string"!=typeof g.id)throw new u("Invalid WebAuthn Registration response");let{challenge:h,registerData:i}=await ff.use(a,b.cookies,c);if(!i)throw new u("Missing user registration data in WebAuthn challenge cookie");try{let c=f.getRelayingParty(a,b);e=await f.simpleWebAuthn.verifyRegistrationResponse({...f.verifyRegistrationOptions,expectedChallenge:h,response:g,expectedOrigin:c.origin,expectedRPID:c.id})}catch(a){throw new Y(a)}if(!e.verified||!e.registrationInfo)throw new Y("WebAuthn registration response could not be verified");let j={providerAccountId:fr(e.registrationInfo.credentialID),provider:a.provider.id,type:f.type},k={providerAccountId:j.providerAccountId,counter:e.registrationInfo.counter,credentialID:fr(e.registrationInfo.credentialID),credentialPublicKey:fr(e.registrationInfo.credentialPublicKey),credentialBackedUp:e.registrationInfo.credentialBackedUp,credentialDeviceType:e.registrationInfo.credentialDeviceType,transports:(d=g.response.transports,d?.join(","))};return{user:i,account:j,authenticator:k}}async function fn(a,b,c){let{provider:d,adapter:e}=a,f=c&&c.id?await e.listAuthenticatorsByUserId(c.id):null,g=d.getRelayingParty(a,b);return await d.simpleWebAuthn.generateAuthenticationOptions({...d.authenticationOptions,rpID:g.id,allowCredentials:f?.map(a=>({id:fq(a.credentialID),type:"public-key",transports:fs(a.transports)}))})}async function fo(a,b,c){let{provider:d,adapter:e}=a,f=c.id?await e.listAuthenticatorsByUserId(c.id):null,g=cc(32),h=d.getRelayingParty(a,b);return await d.simpleWebAuthn.generateRegistrationOptions({...d.registrationOptions,userID:g,userName:c.email,userDisplayName:c.name??void 0,rpID:h.id,rpName:h.name,excludeCredentials:f?.map(a=>({id:fq(a.credentialID),type:"public-key",transports:fs(a.transports)}))})}function fp(a){let{provider:b,adapter:c}=a;if(!c)throw new G("An adapter is required for the WebAuthn provider");if(!b||"webauthn"!==b.type)throw new R("Provider must be WebAuthn");return{...a,provider:b,adapter:c}}function fq(a){return new Uint8Array(Buffer.from(a,"base64"))}function fr(a){return Buffer.from(a).toString("base64")}function fs(a){return a?a.split(","):void 0}async function ft(a,b,c,d){if(!b.provider)throw new R("Callback route called without provider");let{query:e,body:f,method:g,headers:h}=a,{provider:i,adapter:j,url:k,callbackUrl:l,pages:m,jwt:n,events:o,callbacks:p,session:{strategy:q,maxAge:r},logger:s}=b,t="jwt"===q;try{if("oauth"===i.type||"oidc"===i.type){let g,h=i.authorization?.url.searchParams.get("response_mode")==="form_post"?f:e;if(b.isOnRedirectProxy&&h?.state){let a=await fc.decode(h.state,b);if(a?.origin&&new URL(a.origin).origin!==b.url.origin){let b=`${a.origin}?${new URLSearchParams(h)}`;return s.debug("Proxy redirecting to",b),{redirect:b,cookies:d}}}let q=await fh(h,a.cookies,b);q.cookies.length&&d.push(...q.cookies),s.debug("authorization result",q);let{user:u,account:v,profile:w}=q;if(!u||!v||!w)return{redirect:`${k}/signin`,cookies:d};if(j){let{getUserByAccount:a}=j;g=await a({providerAccountId:v.providerAccountId,provider:i.id})}let x=await fu({user:g??u,account:v,profile:w},b);if(x)return{redirect:x,cookies:d};let{user:y,session:z,isNewUser:A}=await du(c.value,u,v,b);if(t){let a={name:y.name,email:y.email,picture:y.image,sub:y.id?.toString()},e=await p.jwt({token:a,user:y,account:v,profile:w,isNewUser:A,trigger:A?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await n.encode({...n,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*r);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:z.sessionToken,options:{...b.cookies.sessionToken.options,expires:z.expires}});if(await o.signIn?.({user:y,account:v,profile:w,isNewUser:A}),A&&m.newUser)return{redirect:`${m.newUser}${m.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:l})}`,cookies:d};return{redirect:l,cookies:d}}if("email"===i.type){let a=e?.token,f=e?.email;if(!a){let b=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!a}});throw b.name="Configuration",b}let g=i.secret??b.secret,h=await j.useVerificationToken({identifier:f,token:await cb(`${a}${g}`)}),k=!!h,q=k&&h.expires.valueOf()<Date.now();if(!k||q||f&&h.identifier!==f)throw new T({hasInvite:k,expired:q});let{identifier:s}=h,u=await j.getUserByEmail(s)??{id:crypto.randomUUID(),email:s,emailVerified:null},v={providerAccountId:u.email,userId:u.id,type:"email",provider:i.id},w=await fu({user:u,account:v},b);if(w)return{redirect:w,cookies:d};let{user:x,session:y,isNewUser:z}=await du(c.value,u,v,b);if(t){let a={name:x.name,email:x.email,picture:x.image,sub:x.id?.toString()},e=await p.jwt({token:a,user:x,account:v,isNewUser:z,trigger:z?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await n.encode({...n,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*r);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:y.sessionToken,options:{...b.cookies.sessionToken.options,expires:y.expires}});if(await o.signIn?.({user:x,account:v,isNewUser:z}),z&&m.newUser)return{redirect:`${m.newUser}${m.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:l})}`,cookies:d};return{redirect:l,cookies:d}}if("credentials"===i.type&&"POST"===g){let a=f??{};Object.entries(e??{}).forEach(([a,b])=>k.searchParams.set(a,b));let j=await i.authorize(a,new Request(k,{headers:h,method:g,body:JSON.stringify(f)}));if(j)j.id=j.id?.toString()??crypto.randomUUID();else throw new C;let m={providerAccountId:j.id,type:"credentials",provider:i.id},q=await fu({user:j,account:m,credentials:a},b);if(q)return{redirect:q,cookies:d};let s={name:j.name,email:j.email,picture:j.image,sub:j.id},t=await p.jwt({token:s,user:j,account:m,isNewUser:!1,trigger:"signIn"});if(null===t)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,e=await n.encode({...n,token:t,salt:a}),f=new Date;f.setTime(f.getTime()+1e3*r);let g=c.chunk(e,{expires:f});d.push(...g)}return await o.signIn?.({user:j,account:m}),{redirect:l,cookies:d}}else if("webauthn"===i.type&&"POST"===g){let e,f,g,h=a.body?.action;if("string"!=typeof h||"authenticate"!==h&&"register"!==h)throw new u("Invalid action parameter");let i=fp(b);switch(h){case"authenticate":{let b=await fl(i,a,d);e=b.user,f=b.account;break}case"register":{let c=await fm(b,a,d);e=c.user,f=c.account,g=c.authenticator}}await fu({user:e,account:f},b);let{user:j,isNewUser:k,session:q,account:s}=await du(c.value,e,f,b);if(!s)throw new u("Error creating or finding account");if(g&&j.id&&await i.adapter.createAuthenticator({...g,userId:j.id}),t){let a={name:j.name,email:j.email,picture:j.image,sub:j.id?.toString()},e=await p.jwt({token:a,user:j,account:s,isNewUser:k,trigger:k?"signUp":"signIn"});if(null===e)d.push(...c.clean());else{let a=b.cookies.sessionToken.name,f=await n.encode({...n,token:e,salt:a}),g=new Date;g.setTime(g.getTime()+1e3*r);let h=c.chunk(f,{expires:g});d.push(...h)}}else d.push({name:b.cookies.sessionToken.name,value:q.sessionToken,options:{...b.cookies.sessionToken.options,expires:q.expires}});if(await o.signIn?.({user:j,account:s,isNewUser:k}),k&&m.newUser)return{redirect:`${m.newUser}${m.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:l})}`,cookies:d};return{redirect:l,cookies:d}}throw new R(`Callback for provider type (${i.type}) is not supported`)}catch(b){if(b instanceof u)throw b;let a=new y(b,{provider:i.id});throw s.debug("callback route error details",{method:g,query:e,body:f}),a}}async function fu(a,b){let c,{signIn:d,redirect:e}=b.callbacks;try{c=await d(a)}catch(a){if(a instanceof u)throw a;throw new x(a)}if(!c)throw new x("AccessDenied");if("string"==typeof c)return await e({url:c,baseUrl:b.url.origin})}async function fv(a,b,c,d,e){let{adapter:f,jwt:g,events:h,callbacks:i,logger:j,session:{strategy:k,maxAge:l}}=a,m={body:null,headers:{"Content-Type":"application/json",...!d&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:c},n=b.value;if(!n)return m;if("jwt"===k){try{let c=a.cookies.sessionToken.name,f=await g.decode({...g,token:n,salt:c});if(!f)throw Error("Invalid JWT");let j=await i.jwt({token:f,...d&&{trigger:"update"},session:e}),k=dt(l);if(null!==j){let a={user:{name:j.name,email:j.email,image:j.picture},expires:k.toISOString()},d=await i.session({session:a,token:j});m.body=d;let e=await g.encode({...g,token:j,salt:c}),f=b.chunk(e,{expires:k});m.cookies?.push(...f),await h.session?.({session:d,token:j})}else m.cookies?.push(...b.clean())}catch(a){j.error(new F(a)),m.cookies?.push(...b.clean())}return m}try{let{getSessionAndUser:c,deleteSession:g,updateSession:j}=f,k=await c(n);if(k&&k.session.expires.valueOf()<Date.now()&&(await g(n),k=null),k){let{user:b,session:c}=k,f=a.session.updateAge,g=c.expires.valueOf()-1e3*l+1e3*f,o=dt(l);g<=Date.now()&&await j({sessionToken:n,expires:o});let p=await i.session({session:{...c,user:b},user:b,newSession:e,...d?{trigger:"update"}:{}});m.body=p,m.cookies?.push({name:a.cookies.sessionToken.name,value:n,options:{...a.cookies.sessionToken.options,expires:o}}),await h.session?.({session:p})}else n&&m.cookies?.push(...b.clean())}catch(a){j.error(new N(a))}return m}async function fw(a,b){let c,d,{logger:e,provider:f}=b,g=f.authorization?.url;if(!g||"authjs.dev"===g.host){let a=new URL(f.issuer),b=await dR(a,{[dC]:f[cj],[dz]:!0}),c=await dU(a,b).catch(b=>{if(!(b instanceof TypeError)||"Invalid URL"!==b.message)throw b;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${a}`)});if(!c.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");g=new URL(c.authorization_endpoint)}let h=g.searchParams,i=f.callbackUrl;!b.isOnRedirectProxy&&f.redirectProxyUrl&&(i=f.redirectProxyUrl,d=f.callbackUrl,e.debug("using redirect proxy",{redirect_uri:i,data:d}));let j=Object.assign({response_type:"code",client_id:f.clientId,redirect_uri:i,...f.authorization?.params},Object.fromEntries(f.authorization?.url.searchParams??[]),a);for(let a in j)h.set(a,j[a]);let k=[];f.authorization?.url.searchParams.get("response_mode")==="form_post"&&(b.cookies.state.options.sameSite="none",b.cookies.state.options.secure=!0,b.cookies.nonce.options.sameSite="none",b.cookies.nonce.options.secure=!0);let l=await fc.create(b,d);if(l&&(h.set("state",l.value),k.push(l.cookie)),f.checks?.includes("pkce"))if(c&&!c.code_challenge_methods_supported?.includes("S256"))"oidc"===f.type&&(f.checks=["nonce"]);else{let{value:a,cookie:c}=await fa.create(b);h.set("code_challenge",a),h.set("code_challenge_method","S256"),k.push(c)}let m=await fd.create(b);return m&&(h.set("nonce",m.value),k.push(m.cookie)),"oidc"!==f.type||g.searchParams.has("scope")||g.searchParams.set("scope","openid profile email"),e.debug("authorization url is ready",{url:g,cookies:k,provider:f}),{redirect:g.toString(),cookies:k}}async function fx(a,b){let c,{body:d}=a,{provider:e,callbacks:f,adapter:g}=b,h=(e.normalizeIdentifier??function(a){if(!a)throw Error("Missing email from request body.");let[b,c]=a.toLowerCase().trim().split("@");return c=c.split(",")[0],`${b}@${c}`})(d?.email),i={id:crypto.randomUUID(),email:h,emailVerified:null},j=await g.getUserByEmail(h)??i,k={providerAccountId:h,userId:j.id,type:"email",provider:e.id};try{c=await f.signIn({user:j,account:k,email:{verificationRequest:!0}})}catch(a){throw new x(a)}if(!c)throw new x("AccessDenied");if("string"==typeof c)return{redirect:await f.redirect({url:c,baseUrl:b.url.origin})};let{callbackUrl:l,theme:m}=b,n=await e.generateVerificationToken?.()??cc(32),o=new Date(Date.now()+(e.maxAge??86400)*1e3),p=e.secret??b.secret,q=new URL(b.basePath,b.url.origin),r=e.sendVerificationRequest({identifier:h,token:n,expires:o,url:`${q}/callback/${e.id}?${new URLSearchParams({callbackUrl:l,token:n,email:h})}`,provider:e,theme:m,request:new Request(a.url,{headers:a.headers,method:a.method,body:"POST"===a.method?JSON.stringify(a.body??{}):void 0})}),s=g.createVerificationToken?.({identifier:h,token:await cb(`${n}${p}`),expires:o});return await Promise.all([r,s]),{redirect:`${q}/verify-request?${new URLSearchParams({provider:e.id,type:e.type})}`}}async function fy(a,b,c){let d=`${c.url.origin}${c.basePath}/signin`;if(!c.provider)return{redirect:d,cookies:b};switch(c.provider.type){case"oauth":case"oidc":{let{redirect:d,cookies:e}=await fw(a.query,c);return e&&b.push(...e),{redirect:d,cookies:b}}case"email":return{...await fx(a,c),cookies:b};default:return{redirect:d,cookies:b}}}async function fz(a,b,c){let{jwt:d,events:e,callbackUrl:f,logger:g,session:h}=c,i=b.value;if(!i)return{redirect:f,cookies:a};try{if("jwt"===h.strategy){let a=c.cookies.sessionToken.name,b=await d.decode({...d,token:i,salt:a});await e.signOut?.({token:b})}else{let a=await c.adapter?.deleteSession(i);await e.signOut?.({session:a})}}catch(a){g.error(new O(a))}return a.push(...b.clean()),{redirect:f,cookies:a}}async function fA(a,b){let{adapter:c,jwt:d,session:{strategy:e}}=a,f=b.value;if(!f)return null;if("jwt"===e){let b=a.cookies.sessionToken.name,c=await d.decode({...d,token:f,salt:b});if(c&&c.sub)return{id:c.sub,name:c.name,email:c.email,image:c.picture}}else{let a=await c?.getSessionAndUser(f);if(a)return a.user}return null}async function fB(a,b,c,d){let e=fp(b),{provider:f}=e,{action:g}=a.query??{};if("register"!==g&&"authenticate"!==g&&void 0!==g)return{status:400,body:{error:"Invalid action"},cookies:d,headers:{"Content-Type":"application/json"}};let h=await fA(b,c),i=h?{user:h,exists:!0}:await f.getUserInfo(b,a),j=i?.user;switch(function(a,b,c){let{user:d,exists:e=!1}=c??{};switch(a){case"authenticate":return"authenticate";case"register":if(d&&b===e)return"register";break;case void 0:if(!b)if(!d)return"authenticate";else if(e)return"authenticate";else return"register"}return null}(g,!!h,i)){case"authenticate":return fk(e,a,j,d);case"register":if("string"==typeof j?.email)return fj(e,a,j,d);break;default:return{status:400,body:{error:"Invalid request"},cookies:d,headers:{"Content-Type":"application/json"}}}}async function fC(a,b){let{action:c,providerId:d,error:e,method:f}=a,g=b.skipCSRFCheck===ch,{options:h,cookies:i}=await cq({authOptions:b,action:c,providerId:d,url:a.url,callbackUrl:a.body?.callbackUrl??a.query?.callbackUrl,csrfToken:a.body?.csrfToken,cookies:a.cookies,isPost:"POST"===f,csrfDisabled:g}),j=new t(h.cookies.sessionToken,a.cookies,h.logger);if("GET"===f){let b=ds({...h,query:a.query,cookies:i});switch(c){case"callback":return await ft(a,h,j,i);case"csrf":return b.csrf(g,h,i);case"error":return b.error(e);case"providers":return b.providers(h.providers);case"session":return await fv(h,j,i);case"signin":return b.signin(d,e);case"signout":return b.signout();case"verify-request":return b.verifyRequest();case"webauthn-options":return await fB(a,h,j,i)}}else{let{csrfTokenVerified:b}=h;switch(c){case"callback":return"credentials"===h.provider.type&&ce(c,b),await ft(a,h,j,i);case"session":return ce(c,b),await fv(h,j,i,!0,a.body?.data);case"signin":return ce(c,b),await fy(a,i,h);case"signout":return ce(c,b),await fz(i,j,h)}}throw new P(`Cannot handle action: ${c}`)}function fD(a,b,c,d,e){let f,g=e?.basePath,h=d.AUTH_URL??d.NEXTAUTH_URL;if(h)f=new URL(h),g&&"/"!==g&&"/"!==f.pathname&&(f.pathname!==g&&b4(e).warn("env-url-basepath-mismatch"),f.pathname="/");else{let a=c.get("x-forwarded-host")??c.get("host"),d=c.get("x-forwarded-proto")??b??"https",e=d.endsWith(":")?d:d+":";f=new URL(`${e}//${a}`)}let i=f.toString().replace(/\/$/,"");if(g){let b=g?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${i}/${b}/${a}`)}return new URL(`${i}/${a}`)}async function fE(a,b){let c=b4(b),d=await b9(a,b);if(!d)return Response.json("Bad request.",{status:400});let e=function(a,b){let{url:c}=a,d=[];if(!_&&b.debug&&d.push("debug-enabled"),!b.trustHost)return new S(`Host must be trusted. URL was: ${a.url}`);if(!b.secret?.length)return new J("Please define a `secret`");let e=a.query?.callbackUrl;if(e&&!aa(e,c.origin))return new B(`Invalid callback URL. Received: ${e}`);let{callbackUrl:f}=s(b.useSecureCookies??"https:"===c.protocol),g=a.cookies?.[b.cookies?.callbackUrl?.name??f.name];if(g&&!aa(g,c.origin))return new B(`Invalid callback URL. Received: ${g}`);let h=!1;for(let a of b.providers){let b="function"==typeof a?a():a;if(("oauth"===b.type||"oidc"===b.type)&&!(b.issuer??b.options?.issuer)){let a,{authorization:c,token:d,userinfo:e}=b;if("string"==typeof c||c?.url?"string"==typeof d||d?.url?"string"==typeof e||e?.url||(a="userinfo"):a="token":a="authorization",a)return new D(`Provider "${b.id}" is missing both \`issuer\` and \`${a}\` endpoint config. At least one of them is required`)}if("credentials"===b.type)ab=!0;else if("email"===b.type)ac=!0;else if("webauthn"===b.type){var i;if(ad=!0,b.simpleWebAuthnBrowserVersion&&(i=b.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(i)))return new u(`Invalid provider config for "${b.id}": simpleWebAuthnBrowserVersion "${b.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(b.enableConditionalUI){if(h)return new W("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(h=!0,!Object.values(b.formFields).some(a=>a.autocomplete&&a.autocomplete.toString().indexOf("webauthn")>-1))return new X(`Provider "${b.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(ab){let a=b.session?.strategy==="database",c=!b.providers.some(a=>"credentials"!==("function"==typeof a?a():a).type);if(a&&c)return new Q("Signing in with credentials only supported if JWT strategy is enabled");if(b.providers.some(a=>{let b="function"==typeof a?a():a;return"credentials"===b.type&&!b.authorize}))return new I("Must define an authorize() handler to use credentials authentication provider")}let{adapter:j,session:k}=b,l=[];if(ac||k?.strategy==="database"||!k?.strategy&&j)if(ac){if(!j)return new G("Email login requires an adapter");l.push(...ae)}else{if(!j)return new G("Database session requires an adapter");l.push(...af)}if(ad){if(!b.experimental?.enableWebAuthn)return new $("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(d.push("experimental-webauthn"),!j)return new G("WebAuthn requires an adapter");l.push(...ag)}if(j){let a=l.filter(a=>!(a in j));if(a.length)return new H(`Required adapter methods were missing: ${a.join(", ")}`)}return _||(_=!0),d}(d,b);if(Array.isArray(e))e.forEach(c.warn);else if(e){if(c.error(e),!new Set(["signin","signout","error","verify-request"]).has(d.action)||"GET"!==d.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:a,theme:f}=b,g=a?.error&&d.url.searchParams.get("callbackUrl")?.startsWith(a.error);if(!a?.error||g)return g&&c.error(new z(`The error page ${a?.error} should not require authentication`)),ca(ds({theme:f}).error("Configuration"));let h=`${d.url.origin}${a.error}?error=Configuration`;return Response.redirect(h)}let f=a.headers?.has("X-Auth-Return-Redirect"),g=b.raw===ci;try{let a=await fC(d,b);if(g)return a;let c=ca(a),e=c.headers.get("Location");if(!f||!e)return c;return Response.json({url:e},{headers:c.headers})}catch(l){c.error(l);let e=l instanceof u;if(e&&g&&!f)throw l;if("POST"===a.method&&"session"===d.action)return Response.json(null,{status:400});let h=new URLSearchParams({error:l instanceof u&&V.has(l.type)?l.type:"Configuration"});l instanceof C&&h.set("code",l.code);let i=e&&l.kind||"error",j=b.pages?.[i]??`${b.basePath}/${i.toLowerCase()}`,k=`${d.url.origin}${j}?${h}`;if(f)return Response.json({url:k});return Response.redirect(k)}}var fF=a.i(43405);function fG(a){let b=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!b)return a;let{origin:c}=new URL(b),{href:d,origin:e}=a.nextUrl;return new fF.NextRequest(d.replace(e,c),a)}function fH(a){try{a.secret??(a.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let b=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!b)return;let{pathname:c}=new URL(b);if("/"===c)return;a.basePath||(a.basePath=c)}catch{}finally{a.basePath||(a.basePath="/api/auth"),function(a,b,c=!1){try{let d=a.AUTH_URL;d&&(b.basePath?c||b4(b).warn("env-url-basepath-redundant"):b.basePath=new URL(d).pathname)}catch{}finally{b.basePath??(b.basePath="/auth")}if(!b.secret?.length){b.secret=[];let c=a.AUTH_SECRET;for(let d of(c&&b.secret.push(c),[1,2,3])){let c=a[`AUTH_SECRET_${d}`];c&&b.secret.unshift(c)}}b.redirectProxyUrl??(b.redirectProxyUrl=a.AUTH_REDIRECT_PROXY_URL),b.trustHost??(b.trustHost=!!(a.AUTH_URL??a.AUTH_TRUST_HOST??a.VERCEL??a.CF_PAGES??"production"!==a.NODE_ENV)),b.providers=b.providers.map(b=>{let{id:c}="function"==typeof b?b({}):b,d=c.toUpperCase().replace(/-/g,"_"),e=a[`AUTH_${d}_ID`],f=a[`AUTH_${d}_SECRET`],g=a[`AUTH_${d}_ISSUER`],h=a[`AUTH_${d}_KEY`],i="function"==typeof b?b({clientId:e,clientSecret:f,issuer:g,apiKey:h}):b;return"oauth"===i.type||"oidc"===i.type?(i.clientId??(i.clientId=e),i.clientSecret??(i.clientSecret=f),i.issuer??(i.issuer=g)):"email"===i.type&&(i.apiKey??(i.apiKey=h)),i})}(process.env,a,!0)}}var fI=a.i(5246);async function fJ(a,b){return fE(new Request(fD("session",a.get("x-forwarded-proto"),a,process.env,b),{headers:{cookie:a.get("cookie")??""}}),{...b,callbacks:{...b.callbacks,async session(...a){let c=await b.callbacks?.session?.(...a)??{...a[0].session,expires:a[0].session.expires?.toISOString?.()??a[0].session.expires};return{user:a[0].user??a[0].token,...c}}}})}function fK(a){return"function"==typeof a}function fL(a,b){return"function"==typeof a?async(...c)=>{if(!c.length){let c=await (0,fI.headers)(),d=await a(void 0);return b?.(d),fJ(c,d).then(a=>a.json())}if(c[0]instanceof Request){let d=c[0],e=c[1],f=await a(d);return b?.(f),fM([d,e],f)}if(fK(c[0])){let d=c[0];return async(...c)=>{let e=await a(c[0]);return b?.(e),fM(c,e,d)}}let d="req"in c[0]?c[0].req:c[0],e="res"in c[0]?c[0].res:c[1],f=await a(d);return b?.(f),fJ(new Headers(d.headers),f).then(async a=>{let b=await a.json();for(let b of a.headers.getSetCookie())"headers"in e?e.headers.append("set-cookie",b):e.appendHeader("set-cookie",b);return b})}:(...b)=>{if(!b.length)return Promise.resolve((0,fI.headers)()).then(b=>fJ(b,a).then(a=>a.json()));if(b[0]instanceof Request)return fM([b[0],b[1]],a);if(fK(b[0])){let c=b[0];return async(...b)=>fM(b,a,c).then(a=>a)}let c="req"in b[0]?b[0].req:b[0],d="res"in b[0]?b[0].res:b[1];return fJ(new Headers(c.headers),a).then(async a=>{let b=await a.json();for(let b of a.headers.getSetCookie())"headers"in d?d.headers.append("set-cookie",b):d.appendHeader("set-cookie",b);return b})}}async function fM(a,b,c){let d=fG(a[0]),e=await fJ(d.headers,b),f=await e.json(),g=!0;b.callbacks?.authorized&&(g=await b.callbacks.authorized({request:d,auth:f}));let h=fF.NextResponse.next?.();if(g instanceof Response){var i,j,k;let a,c;h=g;let e=g.headers.get("Location"),{pathname:f}=d.nextUrl;e&&(i=f,j=new URL(e).pathname,k=b,a=j.replace(`${i}/`,""),c=Object.values(k.pages??{}),(fN.has(a)||c.includes(j))&&j===i)&&(g=!0)}else if(c)d.auth=f,h=await c(d,a[1])??fF.NextResponse.next();else if(!g){let a=b.pages?.signIn??`${b.basePath}/signin`;if(d.nextUrl.pathname!==a){let b=d.nextUrl.clone();b.pathname=a,b.searchParams.set("callbackUrl",d.nextUrl.href),h=fF.NextResponse.redirect(b)}}let l=new Response(h?.body,h);for(let a of e.headers.getSetCookie())l.headers.append("set-cookie",a);return l}let fN=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var fO=a.i(73727);async function fP(a,b={},c,d){let e=new Headers(await (0,fI.headers)()),{redirect:f=!0,redirectTo:g,...h}=b instanceof FormData?Object.fromEntries(b):b,i=g?.toString()??e.get("Referer")??"/",j=fD("signin",e.get("x-forwarded-proto"),e,process.env,d);if(!a)return j.searchParams.append("callbackUrl",i),f&&(0,fO.redirect)(j.toString()),j.toString();let k=`${j}/${a}?${new URLSearchParams(c)}`,l={};for(let b of d.providers){let{options:c,...d}="function"==typeof b?b():b,e=c?.id??d.id;if(e===a){l={id:e,type:c?.type??d.type};break}}if(!l.id){let a=`${j}?${new URLSearchParams({callbackUrl:i})}`;return f&&(0,fO.redirect)(a),a}"credentials"===l.type&&(k=k.replace("signin","callback")),e.set("Content-Type","application/x-www-form-urlencoded");let m=new Request(k,{method:"POST",headers:e,body:new URLSearchParams({...h,callbackUrl:i})}),n=await fE(m,{...d,raw:ci,skipCSRFCheck:ch}),o=await (0,fI.cookies)();for(let a of n?.cookies??[])o.set(a.name,a.value,a.options);let p=(n instanceof Response?n.headers.get("Location"):n.redirect)??k;return f?(0,fO.redirect)(p):p}async function fQ(a,b){let c=new Headers(await (0,fI.headers)());c.set("Content-Type","application/x-www-form-urlencoded");let d=fD("signout",c.get("x-forwarded-proto"),c,process.env,b),e=new URLSearchParams({callbackUrl:a?.redirectTo??c.get("Referer")??"/"}),f=new Request(d,{method:"POST",headers:c,body:e}),g=await fE(f,{...b,raw:ci,skipCSRFCheck:ch}),h=await (0,fI.cookies)();for(let a of g?.cookies??[])h.set(a.name,a.value,a.options);return a?.redirect??!0?(0,fO.redirect)(g.redirect):g}async function fR(a,b){let c=new Headers(await (0,fI.headers)());c.set("Content-Type","application/json");let d=new Request(fD("session",c.get("x-forwarded-proto"),c,process.env,b),{method:"POST",headers:c,body:JSON.stringify({data:a})}),e=await fE(d,{...b,raw:ci,skipCSRFCheck:ch}),f=await (0,fI.cookies)();for(let a of e?.cookies??[])f.set(a.name,a.value,a.options);return e.body}a.s([],70396);let fS=Symbol.for("drizzle:entityKind");function fT(a,b){if(!a||"object"!=typeof a)return!1;if(a instanceof b)return!0;if(!Object.prototype.hasOwnProperty.call(b,fS))throw Error(`Class "${b.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let c=Object.getPrototypeOf(a).constructor;if(c)for(;c;){if(fS in c&&c[fS]===b[fS])return!0;c=Object.getPrototypeOf(c)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class fU{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [fS]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}class fV{static [fS]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}let fW=Symbol.for("drizzle:Name");class fX{static [fS]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new fY(a,this)}}class fY{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [fS]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[fW],...d,c[0].table[fW],...e];return a??`${f.join("_")}_fk`}}function fZ(a,...b){return a(...b)}function f$(a,b){return`${a[fW]}_${b.join("_")}_unique`}class f_{constructor(a,b){this.name=b,this.columns=a}static [fS]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new f1(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class f0{static [fS]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new f_(a,this.name)}}class f1{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??f$(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [fS]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function f2(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class f3 extends fV{foreignKeyConfigs=[];static [fS]="PgColumnBuilder";array(a){return new f7(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>fZ((c,d)=>{let e=new fX(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new f5(a,this.config)}}class f4 extends fU{constructor(a,b){b.uniqueName||(b.uniqueName=f$(a,[b.name])),super(a,b),this.table=a}static [fS]="PgColumn"}class f5 extends f4{static [fS]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class f6{static [fS]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class f7 extends f3{static [fS]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new f8(a,this.config,b)}}class f8 extends f4{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [fS]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=f2(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=f2(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:fT(this.baseColumn,f8)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}class f9 extends f3{static [fS]="PgEnumObjectColumnBuilder";constructor(a,b){super(a,"string","PgEnumObjectColumn"),this.config.enum=b}build(a){return new ga(a,this.config)}}class ga extends f4{static [fS]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}let gb=Symbol.for("drizzle:isPgEnum");class gc extends f3{static [fS]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new gd(a,this.config)}}class gd extends f4{static [fS]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}class ge{static [fS]="Subquery";constructor(a,b,c,d=!1,e=[]){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d,usedTables:e}}}class gf extends ge{static [fS]="WithSubquery"}let gg=(a,b)=>g?(h||(h=g.trace.getTracer("drizzle-orm","0.45.1")),fZ((c,d)=>d.startActiveSpan(a,a=>{try{return b(a)}catch(b){throw a.setStatus({code:c.SpanStatusCode.ERROR,message:b instanceof Error?b.message:"Unknown error"}),b}finally{a.end()}}),g,h)):b(),gh=Symbol.for("drizzle:ViewBaseConfig"),gi=Symbol.for("drizzle:Schema"),gj=Symbol.for("drizzle:Columns"),gk=Symbol.for("drizzle:ExtraConfigColumns"),gl=Symbol.for("drizzle:OriginalName"),gm=Symbol.for("drizzle:BaseName"),gn=Symbol.for("drizzle:IsAlias"),go=Symbol.for("drizzle:ExtraConfigBuilder"),gp=Symbol.for("drizzle:IsDrizzleTable");class gq{static [fS]="Table";static Symbol={Name:fW,Schema:gi,OriginalName:gl,Columns:gj,ExtraConfigColumns:gk,BaseName:gm,IsAlias:gn,ExtraConfigBuilder:go};[fW];[gl];[gi];[gj];[gk];[gm];[gn]=!1;[gp]=!0;[go]=void 0;constructor(a,b,c){this[fW]=this[gl]=a,this[gi]=b,this[gm]=c}}function gr(a){return`${a[gi]??"public"}.${a[fW]}`}class gs{static [fS]="FakePrimitiveParam"}function gt(a){return null!=a&&"function"==typeof a.getSQL}class gu{static [fS]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new gv([this])}}class gv{constructor(a){for(const b of(this.queryChunks=a,a))if(fT(b,gq)){const a=b[gq.Symbol.Schema];this.usedTables.push(void 0===a?b[gq.Symbol.Name]:a+"."+b[gq.Symbol.Name])}}static [fS]="SQL";decoder=gx;shouldInlineParams=!1;usedTables=[];append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return gg("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:d,escapeName:e,escapeParam:f,prepareTyping:g,inlineParams:h,paramStartIndex:i}=c;var j=a.map(a=>{if(fT(a,gu))return{sql:a.value.join(""),params:[]};if(fT(a,gw))return{sql:e(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new gu("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new gu(", "));return b.push(new gu(")")),this.buildQueryFromSourceParams(b,c)}if(fT(a,gv))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:h||a.shouldInlineParams});if(fT(a,gq)){let b=a[gq.Symbol.Schema],c=a[gq.Symbol.Name];return{sql:void 0===b||a[gn]?e(c):e(b)+"."+e(c),params:[]}}if(fT(a,fU)){let c=d.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:e(c),params:[]};let f=a.table[gq.Symbol.Schema];return{sql:a.table[gn]||void 0===f?e(a.table[gq.Symbol.Name])+"."+e(c):e(f)+"."+e(a.table[gq.Symbol.Name])+"."+e(c),params:[]}}if(fT(a,gG)){let b=a[gh].schema,c=a[gh].name;return{sql:void 0===b||a[gh].isAlias?e(c):e(b)+"."+e(c),params:[]}}if(fT(a,gz)){if(fT(a.value,gD))return{sql:f(i.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if(fT(b,gv))return this.buildQueryFromSourceParams([b],c);if(h)return{sql:this.mapInlineParam(b,c),params:[]};let d=["none"];return g&&(d=[g(a.encoder)]),{sql:f(i.value++,b),params:[b],typings:d}}return fT(a,gD)?{sql:f(i.value++,a),params:[a],typings:["none"]}:fT(a,gv.Aliased)&&void 0!==a.fieldAlias?{sql:e(a.fieldAlias),params:[]}:fT(a,ge)?a._.isWith?{sql:e(a._.alias),params:[]}:this.buildQueryFromSourceParams([new gu("("),a._.sql,new gu(") "),new gw(a._.alias)],c):a&&"function"==typeof a&&gb in a&&!0===a[gb]?a.schema?{sql:e(a.schema)+"."+e(a.enumName),params:[]}:{sql:e(a.enumName),params:[]}:gt(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],c):this.buildQueryFromSourceParams([new gu("("),a.getSQL(),new gu(")")],c):h?{sql:this.mapInlineParam(a,c),params:[]}:{sql:f(i.value++,a),params:[a],typings:["none"]}});let k={sql:"",params:[]};for(let a of j)k.sql+=a.sql,k.params.push(...a.params),a.typings?.length&&(k.typings||(k.typings=[]),k.typings.push(...a.typings));return k}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new gv.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class gw{constructor(a){this.value=a}static [fS]="Name";brand;getSQL(){return new gv([this])}}let gx={mapFromDriverValue:a=>a},gy={mapToDriverValue:a=>a};({...gx,...gy});class gz{constructor(a,b=gy){this.value=a,this.encoder=b}static [fS]="Param";brand;getSQL(){return new gv([this])}}function gA(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new gu(a[0])),b.entries()))c.push(e,new gu(a[d+1]));return new gv(c)}(nE=gA||(gA={})).empty=function(){return new gv([])},nE.fromList=function(a){return new gv(a)},nE.raw=function(a){return new gv([new gu(a)])},nE.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new gv(c)},nE.identifier=function(a){return new gw(a)},nE.placeholder=function(a){return new gD(a)},nE.param=function(a,b){return new gz(a,b)};var gB=gv||(gv={});class gC{constructor(a,b){this.sql=a,this.fieldAlias=b}static [fS]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new gC(this.sql,this.fieldAlias)}}gB.Aliased=gC;class gD{constructor(a){this.name=a}static [fS]="Placeholder";getSQL(){return new gv([this])}}function gE(a,b){return a.map(a=>{if(fT(a,gD)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if(fT(a,gz)&&fT(a.value,gD)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}let gF=Symbol.for("drizzle:IsDrizzleView");class gG{static [fS]="View";[gh];[gF]=!0;constructor({name:a,schema:b,selectedFields:c,query:d}){this[gh]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new gv([this])}}fU.prototype.getSQL=function(){return new gv([this])},gq.prototype.getSQL=function(){return new gv([this])},ge.prototype.getSQL=function(){return new gv([this])};class gH{constructor(a){this.table=a}static [fS]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class gI{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [fS]="TableAliasProxyHandler";get(a,b){if(b===gq.Symbol.IsAlias)return!0;if(b===gq.Symbol.Name||this.replaceOriginalName&&b===gq.Symbol.OriginalName)return this.alias;if(b===gh)return{...a[gh],name:this.alias,isAlias:!0};if(b===gq.Symbol.Columns){let b=a[gq.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new gH(new Proxy(a,this)))}),c}let c=a[b];return fT(c,fU)?new Proxy(c,new gH(new Proxy(a,this))):c}}class gJ{constructor(a){this.alias=a}static [fS]="RelationTableAliasProxyHandler";get(a,b){return"sourceTable"===b?gK(a.sourceTable,this.alias):a[b]}}function gK(a,b){return new Proxy(a,new gI(b,!1))}function gL(a,b){return new Proxy(a,new gH(new Proxy(a.table,new gI(b,!1))))}function gM(a,b){return new gv.Aliased(gN(a.sql,b),a.fieldAlias)}function gN(a,b){return gA.join(a.queryChunks.map(a=>fT(a,fU)?gL(a,b):fT(a,gv)?gN(a,b):fT(a,gv.Aliased)?gM(a,b):a))}class gO{static [fS]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if("_"===b)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(b===gh)return{...a[gh],selectedFields:new Proxy(a[gh].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=(fT(a,ge)?a._.selectedFields:fT(a,gG)?a[gh].selectedFields:a)[b];if(fT(c,gv.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if(fT(c,gv)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return fT(c,fU)?this.config.alias?new Proxy(c,new gH(new Proxy(c.table,new gI(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new gO(this.config))}}class gP extends gv{constructor(a){super(gP.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=gP.buildCount(a.source,a.filters)}sql;static [fS]="MySqlCountBuilder";[Symbol.toStringTag]="MySqlCountBuilder";session;static buildEmbeddedCount(a,b){return gA`(select count(*) from ${a}${gA.raw(" where ").if(b)}${b})`}static buildCount(a,b){return gA`select count(*) as count from ${a}${gA.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class gQ{static [fS]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}class gR{constructor(a,b){this.name=a,this.value=b}static [fS]="MySqlCheckBuilder";brand;build(a){return new gS(a,this)}}class gS{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [fS]="MySqlCheck";name;value}class gT{static [fS]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new gU(a,this)}}class gU{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [fS]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[fW],...d,c[0].table[fW],...e];return a??`${f.join("_")}_fk`}}class gV{constructor(a,b){this.name=a,this.unique=b}static [fS]="MySqlIndexBuilderOn";on(...a){return new gW(this.name,a,this.unique)}}class gW{static [fS]="MySqlIndexBuilder";config;constructor(a,b,c){this.config={name:a,columns:b,unique:c}}using(a){return this.config.using=a,this}algorithm(a){return this.config.algorithm=a,this}lock(a){return this.config.lock=a,this}build(a){return new gX(this.config,a)}}class gX{static [fS]="MySqlIndex";config;constructor(a,b){this.config={...a,table:b}}}function gY(a,b){return Object.entries(a).reduce((a,[c,d])=>{if("string"!=typeof c)return a;let e=b?[...b,c]:[c];return fT(d,fU)||fT(d,gv)||fT(d,gv.Aliased)||fT(d,ge)?a.push({path:e,field:d}):fT(d,gq)?a.push(...gY(d[gq.Symbol.Columns],e)):a.push(...gY(d,e)),a},[])}function gZ(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function g$(a,b){let c=Object.entries(b).filter(([,a])=>void 0!==a).map(([b,c])=>fT(c,gv)||fT(c,fU)?[b,c]:[b,new gz(c,a[gq.Symbol.Columns][b])]);if(0===c.length)throw Error("No values to set");return Object.fromEntries(c)}function g_(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function g0(a){return a[gq.Symbol.Columns]}function g1(a){return fT(a,ge)?a._.alias:fT(a,gG)?a[gh].name:fT(a,gv)?void 0:a[gq.Symbol.IsAlias]?a[gq.Symbol.Name]:a[gq.Symbol.BaseName]}function g2(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}let g3="undefined"==typeof TextDecoder?null:new TextDecoder;function g4(a,b){return`${a[fW]}_${b.join("_")}_unique`}class g5{constructor(a,b){this.name=b,this.columns=a}static [fS]="MySqlUniqueConstraintBuilder";columns;build(a){return new g7(a,this.columns,this.name)}}class g6{static [fS]="MySqlUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new g5(a,this.name)}}class g7{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??g4(this.table,this.columns.map(a=>a.name))}static [fS]="MySqlUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}class g8 extends fV{static [fS]="MySqlColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>{let e;return e=new gT(()=>({columns:[a],foreignColumns:[c()]})),d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})}}class g9 extends fU{constructor(a,b){b.uniqueName||(b.uniqueName=g4(a,[b.name])),super(a,b),this.table=a}static [fS]="MySqlColumn"}class ha extends g8{static [fS]="MySqlColumnBuilderWithAutoIncrement";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class hb extends g9{static [fS]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}class hc extends ha{static [fS]="MySqlBigInt53Builder";constructor(a,b=!1){super(a,"number","MySqlBigInt53"),this.config.unsigned=b}build(a){return new hd(a,this.config)}}class hd extends hb{static [fS]="MySqlBigInt53";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class he extends ha{static [fS]="MySqlBigInt64Builder";constructor(a,b=!1){super(a,"bigint","MySqlBigInt64"),this.config.unsigned=b}build(a){return new hf(a,this.config)}}class hf extends hb{static [fS]="MySqlBigInt64";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return BigInt(a)}}function hg(a,b){let{name:c,config:d}=g2(a,b);return"number"===d.mode?new hc(c,d.unsigned):new he(c,d.unsigned)}class hh extends g8{static [fS]="MySqlBinaryBuilder";constructor(a,b){super(a,"string","MySqlBinary"),this.config.length=b}build(a){return new hi(a,this.config)}}class hi extends g9{static [fS]="MySqlBinary";length=this.config.length;mapFromDriverValue(a){if("string"==typeof a)return a;if(Buffer.isBuffer(a))return a.toString();let b=[];for(let c of a)b.push(49===c?"1":"0");return b.join("")}getSQLType(){return void 0===this.length?"binary":`binary(${this.length})`}}function hj(a,b={}){let{name:c,config:d}=g2(a,b);return new hh(c,d.length)}class hk extends g8{static [fS]="MySqlBooleanBuilder";constructor(a){super(a,"boolean","MySqlBoolean")}build(a){return new hl(a,this.config)}}class hl extends g9{static [fS]="MySqlBoolean";getSQLType(){return"boolean"}mapFromDriverValue(a){return"boolean"==typeof a?a:1===a}}function hm(a){return new hk(a??"")}class hn extends g8{static [fS]="MySqlCharBuilder";constructor(a,b){super(a,"string","MySqlChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new ho(a,this.config)}}class ho extends g9{static [fS]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function hp(a,b={}){let{name:c,config:d}=g2(a,b);return new hn(c,d)}class hq extends g8{static [fS]="MySqlCustomColumnBuilder";constructor(a,b,c){super(a,"custom","MySqlCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new hr(a,this.config)}}class hr extends g9{static [fS]="MySqlCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function hs(a){return(b,c)=>{let{name:d,config:e}=g2(b,c);return new hq(d,e,a)}}class ht extends g8{static [fS]="MySqlDateBuilder";constructor(a){super(a,"date","MySqlDate")}build(a){return new hu(a,this.config)}}class hu extends g9{static [fS]="MySqlDate";constructor(a,b){super(a,b)}getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}}class hv extends g8{static [fS]="MySqlDateStringBuilder";constructor(a){super(a,"string","MySqlDateString")}build(a){return new hw(a,this.config)}}class hw extends g9{static [fS]="MySqlDateString";constructor(a,b){super(a,b)}getSQLType(){return"date"}}function hx(a,b){let{name:c,config:d}=g2(a,b);return d?.mode==="string"?new hv(c):new ht(c)}class hy extends g8{static [fS]="MySqlDateTimeBuilder";constructor(a,b){super(a,"date","MySqlDateTime"),this.config.fsp=b?.fsp}build(a){return new hz(a,this.config)}}class hz extends g9{static [fS]="MySqlDateTime";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}mapToDriverValue(a){return a.toISOString().replace("T"," ").replace("Z","")}mapFromDriverValue(a){return new Date(a.replace(" ","T")+"Z")}}class hA extends g8{static [fS]="MySqlDateTimeStringBuilder";constructor(a,b){super(a,"string","MySqlDateTimeString"),this.config.fsp=b?.fsp}build(a){return new hB(a,this.config)}}class hB extends g9{static [fS]="MySqlDateTimeString";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}}function hC(a,b){let{name:c,config:d}=g2(a,b);return d?.mode==="string"?new hA(c,d):new hy(c,d)}class hD extends ha{static [fS]="MySqlDecimalBuilder";constructor(a,b){super(a,"string","MySqlDecimal"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new hE(a,this.config)}}class hE extends hb{static [fS]="MySqlDecimal";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?a+="decimal":a+=`decimal(${this.precision})`,a="decimal(10,0)"===a||"decimal(10)"===a?"decimal":a,this.unsigned?`${a} unsigned`:a}}class hF extends ha{static [fS]="MySqlDecimalNumberBuilder";constructor(a,b){super(a,"number","MySqlDecimalNumber"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new hG(a,this.config)}}class hG extends hb{static [fS]="MySqlDecimalNumber";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?a+="decimal":a+=`decimal(${this.precision})`,a="decimal(10,0)"===a||"decimal(10)"===a?"decimal":a,this.unsigned?`${a} unsigned`:a}}class hH extends ha{static [fS]="MySqlDecimalBigIntBuilder";constructor(a,b){super(a,"bigint","MySqlDecimalBigInt"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new hI(a,this.config)}}class hI extends hb{static [fS]="MySqlDecimalBigInt";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?a+="decimal":a+=`decimal(${this.precision})`,a="decimal(10,0)"===a||"decimal(10)"===a?"decimal":a,this.unsigned?`${a} unsigned`:a}}function hJ(a,b={}){let{name:c,config:d}=g2(a,b),e=d?.mode;return"number"===e?new hF(c,d):"bigint"===e?new hH(c,d):new hD(c,d)}class hK extends ha{static [fS]="MySqlDoubleBuilder";constructor(a,b){super(a,"number","MySqlDouble"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new hL(a,this.config)}}class hL extends hb{static [fS]="MySqlDouble";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`double(${this.precision},${this.scale})`:void 0===this.precision?a+="double":a+=`double(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function hM(a,b){let{name:c,config:d}=g2(a,b);return new hK(c,d)}class hN extends g8{static [fS]="MySqlEnumColumnBuilder";constructor(a,b){super(a,"string","MySqlEnumColumn"),this.config.enumValues=b}build(a){return new hO(a,this.config)}}class hO extends g9{static [fS]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(a=>`'${a}'`).join(",")})`}}class hP extends g8{static [fS]="MySqlEnumObjectColumnBuilder";constructor(a,b){super(a,"string","MySqlEnumObjectColumn"),this.config.enumValues=b}build(a){return new hQ(a,this.config)}}class hQ extends g9{static [fS]="MySqlEnumObjectColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(a=>`'${a}'`).join(",")})`}}function hR(a,b){if("string"==typeof a&&Array.isArray(b)||Array.isArray(a)){let c="string"==typeof a&&a.length>0?a:"",d=("string"==typeof a?b:a)??[];if(0===d.length)throw Error(`You have an empty array for "${c}" enum values`);return new hN(c,d)}if("string"==typeof a&&"object"==typeof b||"object"==typeof a){let c="object"==typeof a?"":a,d="object"==typeof a?Object.values(a):"object"==typeof b?Object.values(b):[];if(0===d.length)throw Error(`You have an empty array for "${c}" enum values`);return new hP(c,d)}}class hS extends ha{static [fS]="MySqlFloatBuilder";constructor(a,b){super(a,"number","MySqlFloat"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new hT(a,this.config)}}class hT extends hb{static [fS]="MySqlFloat";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`float(${this.precision},${this.scale})`:void 0===this.precision?a+="float":a+=`float(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function hU(a,b){let{name:c,config:d}=g2(a,b);return new hS(c,d)}class hV extends ha{static [fS]="MySqlIntBuilder";constructor(a,b){super(a,"number","MySqlInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new hW(a,this.config)}}class hW extends hb{static [fS]="MySqlInt";getSQLType(){return`int${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function hX(a,b){let{name:c,config:d}=g2(a,b);return new hV(c,d)}class hY extends g8{static [fS]="MySqlJsonBuilder";constructor(a){super(a,"json","MySqlJson")}build(a){return new hZ(a,this.config)}}class hZ extends g9{static [fS]="MySqlJson";getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}}function h$(a){return new hY(a??"")}class h_ extends ha{static [fS]="MySqlMediumIntBuilder";constructor(a,b){super(a,"number","MySqlMediumInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new h0(a,this.config)}}class h0 extends hb{static [fS]="MySqlMediumInt";getSQLType(){return`mediumint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function h1(a,b){let{name:c,config:d}=g2(a,b);return new h_(c,d)}class h2 extends ha{static [fS]="MySqlRealBuilder";constructor(a,b){super(a,"number","MySqlReal"),this.config.precision=b?.precision,this.config.scale=b?.scale}build(a){return new h3(a,this.config)}}class h3 extends hb{static [fS]="MySqlReal";precision=this.config.precision;scale=this.config.scale;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`real(${this.precision}, ${this.scale})`:void 0===this.precision?"real":`real(${this.precision})`}}function h4(a,b={}){let{name:c,config:d}=g2(a,b);return new h2(c,d)}class h5 extends ha{static [fS]="MySqlSerialBuilder";constructor(a){super(a,"number","MySqlSerial"),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(a){return new h6(a,this.config)}}class h6 extends hb{static [fS]="MySqlSerial";getSQLType(){return"serial"}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function h7(a){return new h5(a??"")}class h8 extends ha{static [fS]="MySqlSmallIntBuilder";constructor(a,b){super(a,"number","MySqlSmallInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new h9(a,this.config)}}class h9 extends hb{static [fS]="MySqlSmallInt";getSQLType(){return`smallint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function ia(a,b){let{name:c,config:d}=g2(a,b);return new h8(c,d)}class ib extends g8{static [fS]="MySqlTextBuilder";constructor(a,b,c){super(a,"string","MySqlText"),this.config.textType=b,this.config.enumValues=c.enum}build(a){return new ic(a,this.config)}}class ic extends g9{static [fS]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}function id(a,b={}){let{name:c,config:d}=g2(a,b);return new ib(c,"text",d)}function ie(a,b={}){let{name:c,config:d}=g2(a,b);return new ib(c,"tinytext",d)}function ig(a,b={}){let{name:c,config:d}=g2(a,b);return new ib(c,"mediumtext",d)}function ih(a,b={}){let{name:c,config:d}=g2(a,b);return new ib(c,"longtext",d)}class ii extends g8{static [fS]="MySqlTimeBuilder";constructor(a,b){super(a,"string","MySqlTime"),this.config.fsp=b?.fsp}build(a){return new ij(a,this.config)}}class ij extends g9{static [fS]="MySqlTime";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`time${a}`}}function ik(a,b){let{name:c,config:d}=g2(a,b);return new ii(c,d)}class il extends g8{static [fS]="MySqlDateColumnBuilder";defaultNow(){return this.default(gA`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class im extends g9{static [fS]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class io extends il{static [fS]="MySqlTimestampBuilder";constructor(a,b){super(a,"date","MySqlTimestamp"),this.config.fsp=b?.fsp}build(a){return new ip(a,this.config)}}class ip extends im{static [fS]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}mapFromDriverValue(a){return new Date(a+"+0000")}mapToDriverValue(a){return a.toISOString().slice(0,-1).replace("T"," ")}}class iq extends il{static [fS]="MySqlTimestampStringBuilder";constructor(a,b){super(a,"string","MySqlTimestampString"),this.config.fsp=b?.fsp}build(a){return new ir(a,this.config)}}class ir extends im{static [fS]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}}function is(a,b={}){let{name:c,config:d}=g2(a,b);return d?.mode==="string"?new iq(c,d):new io(c,d)}class it extends ha{static [fS]="MySqlTinyIntBuilder";constructor(a,b){super(a,"number","MySqlTinyInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new iu(a,this.config)}}class iu extends hb{static [fS]="MySqlTinyInt";getSQLType(){return`tinyint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function iv(a,b){let{name:c,config:d}=g2(a,b);return new it(c,d)}class iw extends g8{static [fS]="MySqlVarBinaryBuilder";constructor(a,b){super(a,"string","MySqlVarBinary"),this.config.length=b?.length}build(a){return new ix(a,this.config)}}class ix extends g9{static [fS]="MySqlVarBinary";length=this.config.length;mapFromDriverValue(a){if("string"==typeof a)return a;if(Buffer.isBuffer(a))return a.toString();let b=[];for(let c of a)b.push(49===c?"1":"0");return b.join("")}getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}function iy(a,b){let{name:c,config:d}=g2(a,b);return new iw(c,d)}class iz extends g8{static [fS]="MySqlVarCharBuilder";constructor(a,b){super(a,"string","MySqlVarChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new iA(a,this.config)}}class iA extends g9{static [fS]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function iB(a,b){let{name:c,config:d}=g2(a,b);return new iz(c,d)}class iC extends g8{static [fS]="MySqlYearBuilder";constructor(a){super(a,"number","MySqlYear")}build(a){return new iD(a,this.config)}}class iD extends g9{static [fS]="MySqlYear";getSQLType(){return"year"}}function iE(a){return new iC(a??"")}let iF=Symbol.for("drizzle:MySqlInlineForeignKeys");class iG extends gq{static [fS]="MySqlTable";static Symbol=Object.assign({},gq.Symbol,{InlineForeignKeys:iF});[gq.Symbol.Columns];[iF]=[];[gq.Symbol.ExtraConfigBuilder]=void 0}let iH=(a,b,c)=>(function(a,b,c,d,e=a){let f=new iG(a,d,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({bigint:hg,binary:hj,boolean:hm,char:hp,customType:hs,date:hx,datetime:hC,decimal:hJ,double:hM,mysqlEnum:hR,float:hU,int:hX,json:h$,mediumint:h1,real:h4,serial:h7,smallint:ia,text:id,time:ik,timestamp:is,tinyint:iv,varbinary:iy,varchar:iB,year:iE,longtext:ih,mediumtext:ig,tinytext:ie}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[iF].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[gq.Symbol.Columns]=g,h[gq.Symbol.ExtraConfigColumns]=g,c&&(h[iG.Symbol.ExtraConfigBuilder]=c),h})(a,b,c,void 0,a);function iI(...a){return a[0].columns?new iJ(a[0].columns,a[0].name):new iJ(a)}class iJ{static [fS]="MySqlPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new iK(a,this.columns,this.name)}}class iK{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [fS]="MySqlPrimaryKey";columns;name;getName(){return this.name??`${this.table[iG.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function iL(a){return fT(a,iG)?[`${a[gq.Symbol.BaseName]}`]:fT(a,ge)?a._.usedTables??[]:fT(a,gv)?a.usedTables??[]:[]}function iM(a){return a.map(a=>"object"==typeof a?a.config.name:a)}function iN(a){return Array.isArray(a)?a:[a]}Symbol.for("drizzle:MySqlViewConfig");class iO extends gQ{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [fS]="MySqlDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,void 0,void 0,void 0,{type:"delete",tables:iL(this.config.table)})}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}function iP(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function iQ(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function iR(a){return a}class iS{static [fS]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?iP:"camelCase"===a?iQ:iR}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[gq.Symbol.Schema]??"public",c=a.table[gq.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[gq.Symbol.Schema]??"public",c=a[gq.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[gq.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class iT extends Error{static [fS]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class iU extends Error{constructor(a,b,c){super(`Failed query: ${a}
params: ${b}`),this.query=a,this.params=b,this.cause=c,Error.captureStackTrace(this,iU),c&&(this.cause=c)}}class iV extends iT{static [fS]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}class iW extends f3{static [fS]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class iX extends iW{static [fS]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new iY(a,this.config)}}class iY extends f4{static [fS]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class iZ extends iW{static [fS]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new i$(a,this.config)}}class i$ extends f4{static [fS]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function i_(a,b){let{name:c,config:d}=g2(a,b);return"number"===d.mode?new iX(c):new iZ(c)}class i0 extends f3{static [fS]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new i1(a,this.config)}}class i1 extends f4{static [fS]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class i2 extends f3{static [fS]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new i3(a,this.config)}}class i3 extends f4{static [fS]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function i4(a,b){let{name:c,config:d}=g2(a,b);return"number"===d.mode?new i0(c):new i2(c)}class i5 extends f3{static [fS]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new i6(a,this.config)}}class i6 extends f4{static [fS]="PgBoolean";getSQLType(){return"boolean"}}function i7(a){return new i5(a??"")}class i8 extends f3{static [fS]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new i9(a,this.config)}}class i9 extends f4{static [fS]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function ja(a,b={}){let{name:c,config:d}=g2(a,b);return new i8(c,d)}class jb extends f3{static [fS]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new jc(a,this.config)}}class jc extends f4{static [fS]="PgCidr";getSQLType(){return"cidr"}}function jd(a){return new jb(a??"")}class je extends f3{static [fS]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new jf(a,this.config)}}class jf extends f4{static [fS]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function jg(a){return(b,c)=>{let{name:d,config:e}=g2(b,c);return new je(d,e,a)}}class jh extends f3{static [fS]="PgDateColumnBaseBuilder";defaultNow(){return this.default(gA`now()`)}}class ji extends jh{static [fS]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new jj(a,this.config)}}class jj extends f4{static [fS]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return"string"==typeof a?new Date(a):a}mapToDriverValue(a){return a.toISOString()}}class jk extends jh{static [fS]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new jl(a,this.config)}}class jl extends f4{static [fS]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(a){return"string"==typeof a?a:a.toISOString().slice(0,-14)}}function jm(a,b){let{name:c,config:d}=g2(a,b);return d?.mode==="date"?new ji(c):new jk(c)}class jn extends f3{static [fS]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new jo(a,this.config)}}class jo extends f4{static [fS]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function jp(a){return new jn(a??"")}class jq extends f3{static [fS]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new jr(a,this.config)}}class jr extends f4{static [fS]="PgInet";getSQLType(){return"inet"}}function js(a){return new jq(a??"")}class jt extends iW{static [fS]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new ju(a,this.config)}}class ju extends f4{static [fS]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function jv(a){return new jt(a??"")}class jw extends f3{static [fS]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new jx(a,this.config)}}class jx extends f4{static [fS]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function jy(a,b={}){let{name:c,config:d}=g2(a,b);return new jw(c,d)}class jz extends f3{static [fS]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new jA(a,this.config)}}class jA extends f4{static [fS]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function jB(a){return new jz(a??"")}class jC extends f3{static [fS]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new jD(a,this.config)}}class jD extends f4{static [fS]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function jE(a){return new jC(a??"")}class jF extends f3{static [fS]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new jG(a,this.config)}}class jG extends f4{static [fS]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class jH extends f3{static [fS]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new jI(a,this.config)}}class jI extends f4{static [fS]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function jJ(a,b){let{name:c,config:d}=g2(a,b);return d?.mode&&"tuple"!==d.mode?new jH(c):new jF(c)}class jK extends f3{static [fS]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new jL(a,this.config)}}class jL extends f4{static [fS]="PgMacaddr";getSQLType(){return"macaddr"}}function jM(a){return new jK(a??"")}class jN extends f3{static [fS]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new jO(a,this.config)}}class jO extends f4{static [fS]="PgMacaddr8";getSQLType(){return"macaddr8"}}function jP(a){return new jN(a??"")}class jQ extends f3{static [fS]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new jR(a,this.config)}}class jR extends f4{static [fS]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class jS extends f3{static [fS]="PgNumericNumberBuilder";constructor(a,b,c){super(a,"number","PgNumericNumber"),this.config.precision=b,this.config.scale=c}build(a){return new jT(a,this.config)}}class jT extends f4{static [fS]="PgNumericNumber";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class jU extends f3{static [fS]="PgNumericBigIntBuilder";constructor(a,b,c){super(a,"bigint","PgNumericBigInt"),this.config.precision=b,this.config.scale=c}build(a){return new jV(a,this.config)}}class jV extends f4{static [fS]="PgNumericBigInt";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function jW(a,b){let{name:c,config:d}=g2(a,b),e=d?.mode;return"number"===e?new jS(c,d?.precision,d?.scale):"bigint"===e?new jU(c,d?.precision,d?.scale):new jQ(c,d?.precision,d?.scale)}class jX extends f3{static [fS]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new jY(a,this.config)}}class jY extends f4{static [fS]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class jZ extends f3{static [fS]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new j$(a,this.config)}}class j$ extends f4{static [fS]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function j_(a,b){let{name:c,config:d}=g2(a,b);return d?.mode&&"tuple"!==d.mode?new jZ(c):new jX(c)}function j0(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function j1(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=j0(b,c),d=j0(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class j2 extends f3{static [fS]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new j3(a,this.config)}}class j3 extends f4{static [fS]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return j1(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class j4 extends f3{static [fS]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new j5(a,this.config)}}class j5 extends f4{static [fS]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=j1(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function j6(a,b){let{name:c,config:d}=g2(a,b);return d?.mode&&"tuple"!==d.mode?new j4(c):new j2(c)}class j7 extends f3{static [fS]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new j8(a,this.config)}}class j8 extends f4{static [fS]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function j9(a){return new j7(a??"")}class ka extends f3{static [fS]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new kb(a,this.config)}}class kb extends f4{static [fS]="PgSerial";getSQLType(){return"serial"}}function kc(a){return new ka(a??"")}class kd extends iW{static [fS]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new ke(a,this.config)}}class ke extends f4{static [fS]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function kf(a){return new kd(a??"")}class kg extends f3{static [fS]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new kh(a,this.config)}}class kh extends f4{static [fS]="PgSmallSerial";getSQLType(){return"smallserial"}}function ki(a){return new kg(a??"")}class kj extends f3{static [fS]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new kk(a,this.config)}}class kk extends f4{static [fS]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function kl(a,b={}){let{name:c,config:d}=g2(a,b);return new kj(c,d)}class km extends jh{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [fS]="PgTimeBuilder";build(a){return new kn(a,this.config)}}class kn extends f4{static [fS]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function ko(a,b={}){let{name:c,config:d}=g2(a,b);return new km(c,d.withTimezone??!1,d.precision)}class kp extends jh{static [fS]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new kq(a,this.config)}}class kq extends f4{static [fS]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(a){return"string"==typeof a?new Date(this.withTimezone?a:a+"+0000"):a}mapToDriverValue=a=>a.toISOString()}class kr extends jh{static [fS]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new ks(a,this.config)}}class ks extends f4{static [fS]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(a){if("string"==typeof a)return a;let b=a.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let c=a.getTimezoneOffset();return`${b}${c<=0?"+":"-"}${Math.floor(Math.abs(c)/60).toString().padStart(2,"0")}`}return b}}function kt(a,b={}){let{name:c,config:d}=g2(a,b);return d?.mode==="string"?new kr(c,d.withTimezone??!1,d.precision):new kp(c,d?.withTimezone??!1,d?.precision)}class ku extends f3{static [fS]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default(gA`gen_random_uuid()`)}build(a){return new kv(a,this.config)}}class kv extends f4{static [fS]="PgUUID";getSQLType(){return"uuid"}}function kw(a){return new ku(a??"")}class kx extends f3{static [fS]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new ky(a,this.config)}}class ky extends f4{static [fS]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function kz(a,b={}){let{name:c,config:d}=g2(a,b);return new kx(c,d)}class kA extends f3{static [fS]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new kB(a,this.config)}}class kB extends f4{static [fS]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function kC(a,b){let{name:c,config:d}=g2(a,b);return new kA(c,d)}class kD extends f3{static [fS]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new kE(a,this.config)}}class kE extends f4{static [fS]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function kF(a,b){let{name:c,config:d}=g2(a,b);return new kD(c,d)}class kG extends f3{static [fS]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new kH(a,this.config)}}class kH extends f4{static [fS]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function kI(a,b){let{name:c,config:d}=g2(a,b);return new kG(c,d)}class kJ extends f3{static [fS]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new kK(a,this.config)}}class kK extends f4{static [fS]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function kL(a,b){let{name:c,config:d}=g2(a,b);return new kJ(c,d)}let kM=Symbol.for("drizzle:PgInlineForeignKeys"),kN=Symbol.for("drizzle:EnableRLS");class kO extends gq{static [fS]="PgTable";static Symbol=Object.assign({},gq.Symbol,{InlineForeignKeys:kM,EnableRLS:kN});[kM]=[];[kN]=!1;[gq.Symbol.ExtraConfigBuilder]=void 0;[gq.Symbol.ExtraConfigColumns]={}}let kP=(a,b,c)=>(function(a,b,c,d,e=a){let f=new kO(a,d,e),g="function"==typeof b?b({bigint:i_,bigserial:i4,boolean:i7,char:ja,cidr:jd,customType:jg,date:jm,doublePrecision:jp,inet:js,integer:jv,interval:jy,json:jB,jsonb:jE,line:jJ,macaddr:jM,macaddr8:jP,numeric:jW,point:j_,geometry:j6,real:j9,serial:kc,smallint:kf,smallserial:ki,text:kl,time:ko,timestamp:kt,uuid:kw,varchar:kz,bit:kC,halfvec:kF,sparsevec:kI,vector:kL}):b,h=Object.fromEntries(Object.entries(g).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[kM].push(...b.buildForeignKeys(c,f)),[a,c]})),i=Object.fromEntries(Object.entries(g).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(f)]))),j=Object.assign(f,h);return j[gq.Symbol.Columns]=h,j[gq.Symbol.ExtraConfigColumns]=i,c&&(j[kO.Symbol.ExtraConfigBuilder]=c),Object.assign(j,{enableRLS:()=>(j[kO.Symbol.EnableRLS]=!0,j)})})(a,b,c,void 0);function kQ(...a){return a[0].columns?new kR(a[0].columns,a[0].name):new kR(a)}class kR{static [fS]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new kS(a,this.columns,this.name)}}class kS{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [fS]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[kO.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function kT(a,b){return"object"!=typeof b||null===b||!("mapToDriverValue"in b)||"function"!=typeof b.mapToDriverValue||gt(a)||fT(a,gz)||fT(a,gD)||fT(a,fU)||fT(a,gq)||fT(a,gG)?a:new gz(a,b)}let kU=(a,b)=>gA`${a} = ${kT(b,a)}`,kV=(a,b)=>gA`${a} <> ${kT(b,a)}`;function kW(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new gv(1===b.length?b:[new gu("("),gA.join(b,new gu(" and ")),new gu(")")])}function kX(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new gv(1===b.length?b:[new gu("("),gA.join(b,new gu(" or ")),new gu(")")])}function kY(a){return gA`not ${a}`}let kZ=(a,b)=>gA`${a} > ${kT(b,a)}`,k$=(a,b)=>gA`${a} >= ${kT(b,a)}`,k_=(a,b)=>gA`${a} < ${kT(b,a)}`,k0=(a,b)=>gA`${a} <= ${kT(b,a)}`;function k1(a,b){return Array.isArray(b)?0===b.length?gA`false`:gA`${a} in ${b.map(b=>kT(b,a))}`:gA`${a} in ${kT(b,a)}`}function k2(a,b){return Array.isArray(b)?0===b.length?gA`true`:gA`${a} not in ${b.map(b=>kT(b,a))}`:gA`${a} not in ${kT(b,a)}`}function k3(a){return gA`${a} is null`}function k4(a){return gA`${a} is not null`}function k5(a){return gA`exists ${a}`}function k6(a){return gA`not exists ${a}`}function k7(a,b,c){return gA`${a} between ${kT(b,a)} and ${kT(c,a)}`}function k8(a,b,c){return gA`${a} not between ${kT(b,a)} and ${kT(c,a)}`}function k9(a,b){return gA`${a} like ${b}`}function la(a,b){return gA`${a} not like ${b}`}function lb(a,b){return gA`${a} ilike ${b}`}function lc(a,b){return gA`${a} not ilike ${b}`}function ld(a){return gA`${a} asc`}function le(a){return gA`${a} desc`}class lf{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[gq.Symbol.Name]}static [fS]="Relation";referencedTableName;fieldName}class lg{constructor(a,b){this.table=a,this.config=b}static [fS]="Relations"}class lh extends lf{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [fS]="One";withFieldName(a){let b=new lh(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class li extends lf{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [fS]="Many";withFieldName(a){let b=new li(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function lj(){return{and:kW,between:k7,eq:kU,exists:k5,gt:kZ,gte:k$,ilike:lb,inArray:k1,isNull:k3,isNotNull:k4,like:k9,lt:k_,lte:k0,ne:kV,not:kY,notBetween:k8,notExists:k6,notLike:la,notIlike:lc,notInArray:k2,or:kX,sql:gA}}function lk(){return{sql:gA,asc:ld,desc:le}}function ll(a,b){return new lg(a,a=>Object.fromEntries(Object.entries(b(a)).map(([a,b])=>[a,b.withFieldName(a)])))}function lm(a,b,c){if(fT(c,lh)&&c.config)return{fields:c.config.fields,references:c.config.references};let d=b[gr(c.referencedTable)];if(!d)throw Error(`Table "${c.referencedTable[gq.Symbol.Name]}" not found in schema`);let e=a[d];if(!e)throw Error(`Table "${d}" not found in schema`);let f=c.sourceTable,g=b[gr(f)];if(!g)throw Error(`Table "${f[gq.Symbol.Name]}" not found in schema`);let h=[];for(let a of Object.values(e.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&h.push(a);if(h.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${d}"`):Error(`There are multiple relations between "${d}" and "${c.sourceTable[gq.Symbol.Name]}". Please specify relation name`);if(h[0]&&fT(h[0],lh)&&h[0].config)return{fields:h[0].config.references,references:h[0].config.fields};throw Error(`There is not enough information to infer relation "${g}.${c.fieldName}"`)}function ln(a){return{one:function(b,c){return new lh(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new li(a,b,c)}}}function lo(a,b,c,d,e=a=>a){let f={};for(let[g,h]of d.entries())if(h.isJson){let d=b.relations[h.tsKey],i=c[g],j="string"==typeof i?JSON.parse(i):i;f[h.tsKey]=fT(d,lh)?j&&lo(a,a[h.relationTableTsKey],j,h.selection,e):j.map(b=>lo(a,a[h.relationTableTsKey],b,h.selection,e))}else{let a,b=e(c[g]),d=h.field;a=fT(d,fU)?d:fT(d,gv)?d.decoder:d.sql.decoder,f[h.tsKey]=null===b?null:a.mapFromDriverValue(b)}return f}class lp extends gG{static [fS]="MySqlViewBase"}class lq{static [fS]="MySqlDialect";casing;constructor(a){this.casing=new iS(a?.casing)}async migrate(a,b,c){let d=c.migrationsTable??"__drizzle_migrations",e=gA`
			create table if not exists ${gA.identifier(d)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await b.execute(e);let f=(await b.all(gA`select id, hash, created_at from ${gA.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for(let c of a)if(!f||Number(f.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(gA.raw(a));await b.execute(gA`insert into ${gA.identifier(d)} (\`hash\`, \`created_at\`) values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`\`${a}\``}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[gA`with `];for(let[c,d]of a.entries())b.push(gA`${gA.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push(gA`, `);return b.push(gA` `),gA.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d,limit:e,orderBy:f}){let g=this.buildWithCTE(d),h=c?gA` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,i=b?gA` where ${b}`:void 0,j=this.buildOrderBy(f),k=this.buildLimit(e);return gA`${g}delete from ${a}${i}${j}${k}${h}`}buildUpdateSet(a,b){let c=a[gq.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return gA.join(d.flatMap((a,d)=>{let f=c[a],g=f.onUpdateFn?.(),h=b[a]??(fT(g,gv)?g:gA.param(g,f)),i=gA`${gA.identifier(this.casing.getColumnCasing(f))} = ${h}`;return d<e-1?[i,gA.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,limit:f,orderBy:g}){let h=this.buildWithCTE(e),i=this.buildUpdateSet(a,b),j=d?gA` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,k=c?gA` where ${c}`:void 0,l=this.buildOrderBy(g),m=this.buildLimit(f);return gA`${h}update ${a} set ${i}${k}${l}${m}${j}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if(fT(a,gv.Aliased)&&a.isSelectionField)e.push(gA.identifier(a.fieldAlias));else if(fT(a,gv.Aliased)||fT(a,gv)){let c=fT(a,gv.Aliased)?a.sql:a;b?e.push(new gv(c.queryChunks.map(a=>fT(a,g9)?gA.identifier(this.casing.getColumnCasing(a)):a))):e.push(c),fT(a,gv.Aliased)&&e.push(gA` as ${gA.identifier(a.fieldAlias)}`)}else if(fT(a,fU))b?e.push(gA.identifier(this.casing.getColumnCasing(a))):e.push(a);else if(fT(a,ge)){let b=Object.entries(a._.selectedFields);if(1===b.length){let c=b[0][1],d=fT(c,gv)?c.decoder:fT(c,fU)?{mapFromDriverValue:a=>c.mapFromDriverValue(a)}:c.sql.decoder;d&&(a._.sql.decoder=d)}e.push(a)}return d<c-1&&e.push(gA`, `),e});return gA.join(d)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?gA` limit ${a}`:void 0}buildOrderBy(a){return a&&a.length>0?gA` order by ${gA.join(a,gA`, `)}`:void 0}buildIndex({indexes:a,indexFor:b}){return a&&a.length>0?gA` ${gA.raw(b)} INDEX (${gA.raw(a.join(", "))})`:void 0}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:f,joins:g,orderBy:h,groupBy:i,limit:j,offset:k,lockingClause:l,distinct:m,setOperators:n,useIndex:o,forceIndex:p,ignoreIndex:q}){let r,s=c??gY(b);for(let a of s){let b;if(fT(a.field,fU)&&a.field.table[fW]!==(fT(f,ge)?f._.alias:fT(f,lp)?f[gh].name:fT(f,gv)?void 0:f[fW])&&(b=a.field.table,!g?.some(({alias:a})=>a===(b[gq.Symbol.IsAlias]?b[fW]:b[gq.Symbol.BaseName])))){let b=a.field.table[fW];throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let t=!g||0===g.length,u=this.buildWithCTE(a),v=m?gA` distinct`:void 0,w=this.buildSelection(s,{isSingleTable:t}),x=fT(f,gq)&&f[gq.Symbol.IsAlias]?gA`${gA`${gA.identifier(f[gq.Symbol.Schema]??"")}.`.if(f[gq.Symbol.Schema])}${gA.identifier(f[gq.Symbol.OriginalName])} ${gA.identifier(f[gq.Symbol.Name])}`:f,y=[];if(g)for(let[a,b]of g.entries()){0===a&&y.push(gA` `);let c=b.table,d=b.lateral?gA` lateral`:void 0,e=b.on?gA` on ${b.on}`:void 0;if(fT(c,iG)){let a=c[iG.Symbol.Name],f=c[iG.Symbol.Schema],g=c[iG.Symbol.OriginalName],h=a===g?void 0:b.alias,i=this.buildIndex({indexes:b.useIndex,indexFor:"USE"}),j=this.buildIndex({indexes:b.forceIndex,indexFor:"FORCE"}),k=this.buildIndex({indexes:b.ignoreIndex,indexFor:"IGNORE"});y.push(gA`${gA.raw(b.joinType)} join${d} ${f?gA`${gA.identifier(f)}.`:void 0}${gA.identifier(g)}${i}${j}${k}${h&&gA` ${gA.identifier(h)}`}${e}`)}else if(fT(c,gG)){let a=c[gh].name,f=c[gh].schema,g=c[gh].originalName,h=a===g?void 0:b.alias;y.push(gA`${gA.raw(b.joinType)} join${d} ${f?gA`${gA.identifier(f)}.`:void 0}${gA.identifier(g)}${h&&gA` ${gA.identifier(h)}`}${e}`)}else y.push(gA`${gA.raw(b.joinType)} join${d} ${c}${e}`);a<g.length-1&&y.push(gA` `)}let z=gA.join(y),A=d?gA` where ${d}`:void 0,B=e?gA` having ${e}`:void 0,C=this.buildOrderBy(h),D=i&&i.length>0?gA` group by ${gA.join(i,gA`, `)}`:void 0,E=this.buildLimit(j),F=k?gA` offset ${k}`:void 0,G=this.buildIndex({indexes:o,indexFor:"USE"}),H=this.buildIndex({indexes:p,indexFor:"FORCE"}),I=this.buildIndex({indexes:q,indexFor:"IGNORE"});if(l){let{config:a,strength:b}=l;r=gA` for ${gA.raw(b)}`,a.noWait?r.append(gA` nowait`):a.skipLocked&&r.append(gA` skip locked`)}let J=gA`${u}select${v} ${w} from ${x}${G}${H}${I}${z}${A}${D}${B}${C}${E}${F}${r}`;return n.length>0?this.buildSetOperations(J,n):J}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:g}}){let h,i=gA`(${a.getSQL()}) `,j=gA`(${d.getSQL()})`;if(f&&f.length>0){let a=[];for(let b of f)if(fT(b,g9))a.push(gA.identifier(this.casing.getColumnCasing(b)));else if(fT(b,gv)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];fT(c,g9)&&(b.queryChunks[a]=gA.identifier(this.casing.getColumnCasing(c)))}a.push(gA`${b}`)}else a.push(gA`${b}`);h=gA` order by ${gA.join(a,gA`, `)} `}let k="object"==typeof e||"number"==typeof e&&e>=0?gA` limit ${e}`:void 0,l=gA.raw(`${b} ${c?"all ":""}`),m=g?gA` offset ${g}`:void 0;return gA`${i}${l}${j}${h}${k}${m}`}buildInsertQuery({table:a,values:b,ignore:c,onConflict:d,select:e}){let f=[],g=Object.entries(a[gq.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),h=g.map(([,a])=>gA.identifier(this.casing.getColumnCasing(a))),i=[];if(e)fT(b,gv)?f.push(b):f.push(b.getSQL());else for(let[a,c]of(f.push(gA.raw("values ")),b.entries())){let d={},e=[];for(let[a,b]of g){let f=c[a];if(void 0===f||fT(f,gz)&&void 0===f.value)if(void 0!==b.defaultFn){let c=b.defaultFn();d[a]=c;let f=fT(c,gv)?c:gA.param(c,b);e.push(f)}else if(b.default||void 0===b.onUpdateFn)e.push(gA`default`);else{let a=b.onUpdateFn(),c=fT(a,gv)?a:gA.param(a,b);e.push(c)}else b.defaultFn&&fT(f,gz)&&(d[a]=f.value),e.push(f)}i.push(d),f.push(e),a<b.length-1&&f.push(gA`, `)}let j=gA.join(f),k=c?gA` ignore`:void 0,l=d?gA` on duplicate key ${d}`:void 0;return{sql:gA`insert${k} into ${a} ${h} ${j}${l}`,generatedIds:i}}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:i}){let j,k,l,m,n,o=[],p=[];if(!0===f)o=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:gL(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,gL(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,lj()):f.where;m=a&&gN(a,g)}let h=[],i=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),i.push(b));i.length>0&&(i=a?i.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!i.includes(a)))}else i=Object.keys(e.columns);for(let a of i){let b=e.columns[a];h.push({tsKey:a,value:b})}let n=[];if(f.with&&(n=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:gA}):f.extras))h.push({tsKey:a,value:gM(b,g)});for(let{tsKey:a,value:b}of h)o.push({dbKey:fT(b,gv.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:fT(b,fU)?gL(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let q="function"==typeof f.orderBy?f.orderBy(d,lk()):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(q)||(q=[q]),l=q.map(a=>fT(a,fU)?gL(a,g):gN(a,g)),j=f.limit,k=f.offset,n)){let f=lm(b,c,h),i=c[gr(h.referencedTable)],j=`${g}_${d}`,k=kW(...f.fields.map((a,b)=>kU(gL(f.references[b],j),gL(a,g)))),l=this.buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:fT(h,lh)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:j,joinOn:k,nestedQueryRelation:h}),m=gA`${gA.identifier(j)}.${gA.identifier("data")}`.as(d);p.push({on:gA`true`,table:new ge(l.sql,{},j),alias:j,joinType:"left",lateral:!0}),o.push({dbKey:d,tsKey:d,field:m,relationTableTsKey:i,isJson:!0,selection:l.selection})}}if(0===o.length)throw new iT({message:`No fields selected for table "${e.tsName}" ("${g}")`});if(m=kW(i,m),h){let a=gA`json_array(${gA.join(o.map(({field:a,tsKey:b,isJson:c})=>c?gA`${gA.identifier(`${g}_${b}`)}.${gA.identifier("data")}`:fT(a,gv.Aliased)?a.sql:a),gA`, `)})`;fT(h,li)&&(a=gA`coalesce(json_arrayagg(${a}), json_array())`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:e.tsName,selection:o}];void 0!==j||void 0!==k||(l?.length??0)>0?(n=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:[{path:[],field:gA.raw("*")},...(l?.length??0)>0?[{path:[],field:gA`row_number() over (order by ${gA.join(l,gA`, `)})`}]:[]],where:m,limit:j,offset:k,setOperators:[]}),m=void 0,j=void 0,k=void 0,l=void 0):n=gK(d,g),n=this.buildSelectQuery({table:fT(n,iG)?n:new ge(n,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:m,limit:j,offset:k,orderBy:l,setOperators:[]})}else n=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:o.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:m,limit:j,offset:k,orderBy:l,setOperators:[]});return{tableTsKey:e.tsName,sql:n,selection:o}}buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:i}){let j,k=[],l,m,n=[],o;if(!0===f)k=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:gL(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,gL(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,lj()):f.where;o=a&&gN(a,g)}let h=[],i=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),i.push(b));i.length>0&&(i=a?i.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!i.includes(a)))}else i=Object.keys(e.columns);for(let a of i){let b=e.columns[a];h.push({tsKey:a,value:b})}let j=[];if(f.with&&(j=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:gA}):f.extras))h.push({tsKey:a,value:gM(b,g)});for(let{tsKey:a,value:b}of h)k.push({dbKey:fT(b,gv.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:fT(b,fU)?gL(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof f.orderBy?f.orderBy(d,lk()):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(p)||(p=[p]),n=p.map(a=>fT(a,fU)?gL(a,g):gN(a,g)),l=f.limit,m=f.offset,j)){let f=lm(b,c,h),i=c[gr(h.referencedTable)],j=`${g}_${d}`,l=kW(...f.fields.map((a,b)=>kU(gL(f.references[b],j),gL(a,g)))),m=this.buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:fT(h,lh)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:j,joinOn:l,nestedQueryRelation:h}),n=gA`(${m.sql})`;fT(h,li)&&(n=gA`coalesce(${n}, json_array())`);let o=n.as(d);k.push({dbKey:d,tsKey:d,field:o,relationTableTsKey:i,isJson:!0,selection:m.selection})}}if(0===k.length)throw new iT({message:`No fields selected for table "${e.tsName}" ("${g}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(o=kW(i,o),h){let a=gA`json_array(${gA.join(k.map(({field:a})=>fT(a,g9)?gA.identifier(this.casing.getColumnCasing(a)):fT(a,gv.Aliased)?a.sql:a),gA`, `)})`;fT(h,li)&&(a=gA`json_arrayagg(${a})`);let b=[{dbKey:"data",tsKey:"data",field:a,isJson:!0,relationTableTsKey:e.tsName,selection:k}];void 0!==l||void 0!==m||n.length>0?(j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:[{path:[],field:gA.raw("*")},...n.length>0?[{path:[],field:gA`row_number() over (order by ${gA.join(n,gA`, `)})`}]:[]],where:o,limit:l,offset:m,setOperators:[]}),o=void 0,l=void 0,m=void 0,n=void 0):j=gK(d,g),j=this.buildSelectQuery({table:fT(j,iG)?j:new ge(j,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),where:o,limit:l,offset:m,orderBy:n,setOperators:[]})}else j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:k.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),where:o,limit:l,offset:m,orderBy:n,setOperators:[]});return{tableTsKey:e.tsName,sql:j,selection:k}}}class lr{static [fS]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class ls{static [fS]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}from(a,b){let c,d=!!this.fields;c=this.fields?this.fields:fT(a,ge)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):fT(a,lp)?a[gh].selectedFields:fT(a,gv)?{}:g0(a);let e=[],f=[],g=[];return fT(a,iG)&&b&&"string"!=typeof b&&(b.useIndex&&(e=iM(iN(b.useIndex))),b.forceIndex&&(f=iM(iN(b.forceIndex))),b.ignoreIndex&&(g=iM(iN(b.ignoreIndex)))),new lu({table:a,fields:c,isPartialSelect:d,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct,useIndex:e,forceIndex:f,ignoreIndex:g})}}class lt extends lr{static [fS]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g,useIndex:h,forceIndex:i,ignoreIndex:j}){for(const k of(super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[],useIndex:h,forceIndex:i,ignoreIndex:j},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b,config:this.config},this.tableName=g1(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},iL(a)))this.usedTables.add(k)}getUsedTables(){return[...this.usedTables]}createJoin(a,b){return(c,d,e)=>{let f="cross"===a,g=f?void 0:d,h=f?d:e,i=this.tableName,j=g1(c);for(let a of iL(c))this.usedTables.add(a);if("string"==typeof j&&this.config.joins?.some(a=>a.alias===j))throw Error(`Alias "${j}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof i&&(this.config.fields={[i]:this.config.fields}),"string"==typeof j&&!fT(c,gv))){let a=fT(c,ge)?c._.selectedFields:fT(c,gG)?c[gh].selectedFields:c[gq.Symbol.Columns];this.config.fields[j]=a}"function"==typeof g&&(g=g(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]);let k=[],l=[],m=[];if(fT(c,iG)&&h&&"string"!=typeof h&&(h.useIndex&&(k=iM(iN(h.useIndex))),h.forceIndex&&(l=iM(iN(h.forceIndex))),h.ignoreIndex&&(m=iM(iN(h.ignoreIndex)))),this.config.joins.push({on:g,table:c,joinType:a,alias:j,useIndex:k,forceIndex:l,ignoreIndex:m,lateral:b}),"string"==typeof j)switch(a){case"left":this.joinsNotNullableMap[j]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[j]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[j]=!0}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(a,b){return c=>{let d="function"==typeof c?c(lw()):c;if(!gZ(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){let b=[];if(b.push(...iL(this.config.table)),this.config.joins)for(let a of this.config.joins)b.push(...iL(a.table));return new Proxy(new ge(this.getSQL(),this.config.fields,a,!1,[...new Set(b)]),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gO({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(a){return this.cacheConfig=void 0===a?{config:{},enable:!0,autoInvalidate:!0}:!1===a?{enable:!1}:{enable:!0,autoInvalidate:!0,...a},this}}class lu extends lt{static [fS]="MySqlSelect";prepare(){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let a=gY(this.config.fields),b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),a,void 0,void 0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator()}function lv(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!gZ(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}g_(lu,[gQ]);let lw=()=>({union:lx,unionAll:ly,intersect:lz,intersectAll:lA,except:lB,exceptAll:lC}),lx=lv("union",!1),ly=lv("union",!0),lz=lv("intersect",!1),lA=lv("intersect",!0),lB=lv("except",!1),lC=lv("except",!0);class lD{static [fS]="MySqlQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=fT(a,lq)?a:void 0,this.dialectConfig=fT(a,lq)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new ls({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new ls({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new ls({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new ls({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new lq(this.dialectConfig)),this.dialect}}class lE{constructor(a,b,c){this.table=a,this.session=b,this.dialect=c}static [fS]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[gq.Symbol.Columns];for(let d of Object.keys(a)){let e=a[d];b[d]=fT(e,gv)?e:new gz(e,c[d])}return b});return new lF(this.table,b,this.shouldIgnore,this.session,this.dialect)}select(a){let b="function"==typeof a?a(new lD):a;if(!fT(b,gv)&&!gZ(this.table[gj],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new lF(this.table,b,this.shouldIgnore,this.session,this.dialect,!0)}}class lF extends gQ{constructor(a,b,c,d,e,f){super(),this.session=d,this.dialect=e,this.config={table:a,values:b,select:f,ignore:c}}static [fS]="MySqlInsert";config;cacheConfig;onDuplicateKeyUpdate(a){let b=this.dialect.buildUpdateSet(this.config.table,g$(this.config.table,a.set));return this.config.onConflict=gA`update ${b}`,this}$returningId(){let a=[];for(let[b,c]of Object.entries(this.config.table[gq.Symbol.Columns]))c.primary&&a.push({field:c,path:[b]});return this.config.returning=a,this}getSQL(){return this.dialect.buildInsertQuery(this.config).sql}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){let{sql:a,generatedIds:b}=this.dialect.buildInsertQuery(this.config);return this.session.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,b,this.config.returning,{type:"insert",tables:iL(this.config.table)},this.cacheConfig)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}class lG{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [fS]="MySqlUpdateBuilder";set(a){return new lH(this.table,g$(this.table,a),this.session,this.dialect,this.withList)}}class lH extends gQ{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e}}static [fS]="MySqlUpdate";config;cacheConfig;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,void 0,void 0,this.config.returning,{type:"insert",tables:iL(this.config.table)},this.cacheConfig)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}class lI{constructor(a,b,c,d,e,f,g,h){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.mode=h}static [fS]="MySqlRelationalQueryBuilder";findMany(a){return new lJ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many",this.mode)}findFirst(a){return new lJ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first",this.mode)}}class lJ extends gQ{constructor(a,b,c,d,e,f,g,h,i,j){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.queryMode=i,this.mode=j}static [fS]="MySqlRelationalQuery";prepare(){let{query:a,builtQuery:b}=this._toSQL();return this.session.prepareQuery(b,void 0,b=>{let c=b.map(b=>lo(this.schema,this.tableConfig,b,a.selection));return"first"===this.queryMode?c[0]:c})}_getQuery(){return"planetscale"===this.mode?this.dialect.buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){let a=this._getQuery();return{builtQuery:this.dialect.sqlToQuery(a.sql),query:a}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class lK{constructor(a,b,c,d){if(this.dialect=a,this.session=b,this.mode=d,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new lI(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b,this.mode);this.$cache={invalidate:async a=>{}}}static [fS]="MySqlDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new lD(c.dialect))),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new gP({source:a,filters:b,session:this.session})}$cache;with(...a){let b=this;return{select:function(c){return new ls({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new ls({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new lG(c,b.session,b.dialect,a)},delete:function(c){return new iO(c,b.session,b.dialect,a)}}}select(a){return new ls({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new ls({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new lG(a,this.session,this.dialect)}insert(a){return new lE(a,this.session,this.dialect)}delete(a){return new iO(a,this.session,this.dialect)}execute(a){return this.session.execute("string"==typeof a?gA.raw(a):a.getSQL())}transaction(a,b){return this.session.transaction(a,b)}}class lL{constructor(a,b){this.name=a,this.value=b}static [fS]="PgCheckBuilder";brand;build(a){return new lM(a,this)}}class lM{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [fS]="PgCheck";name;value}class lN{constructor(a,b){this.unique=a,this.name=b}static [fS]="PgIndexBuilderOn";on(...a){return new lO(a.map(a=>{if(fT(a,gv))return a;let b=new f6(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!1,this.name)}onOnly(...a){return new lO(a.map(a=>{if(fT(a,gv))return a;let b=new f6(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,b}),this.unique,!0,this.name)}using(a,...b){return new lO(b.map(a=>{if(fT(a,gv))return a;let b=new f6(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!0,this.name,a)}}class lO{static [fS]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new lP(this.config,a)}}class lP{static [fS]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}class lQ{constructor(a,b){this.name=a,b&&(this.as=b.as,this.for=b.for,this.to=b.to,this.using=b.using,this.withCheck=b.withCheck)}static [fS]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(a){return this._linkedTable=a,this}}let lR=Symbol.for("drizzle:PgViewConfig");class lS extends gG{static [fS]="PgViewBase"}class lT{static [fS]="PgDialect";casing;constructor(a){this.casing=new iS(a?.casing)}async migrate(a,b,c){let d="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",f=gA`
			CREATE TABLE IF NOT EXISTS ${gA.identifier(e)}.${gA.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute(gA`CREATE SCHEMA IF NOT EXISTS ${gA.identifier(e)}`),await b.execute(f);let g=(await b.all(gA`select id, hash, created_at from ${gA.identifier(e)}.${gA.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(gA.raw(a));await b.execute(gA`insert into ${gA.identifier(e)}.${gA.identifier(d)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[gA`with `];for(let[c,d]of a.entries())b.push(gA`${gA.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push(gA`, `);return b.push(gA` `),gA.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d}){let e=this.buildWithCTE(d),f=c?gA` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,g=b?gA` where ${b}`:void 0;return gA`${e}delete from ${a}${g}${f}`}buildUpdateSet(a,b){let c=a[gq.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return gA.join(d.flatMap((a,d)=>{let f=c[a],g=f.onUpdateFn?.(),h=b[a]??(fT(g,gv)?g:gA.param(g,f)),i=gA`${gA.identifier(this.casing.getColumnCasing(f))} = ${h}`;return d<e-1?[i,gA.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,from:f,joins:g}){let h=this.buildWithCTE(e),i=a[kO.Symbol.Name],j=a[kO.Symbol.Schema],k=a[kO.Symbol.OriginalName],l=i===k?void 0:i,m=gA`${j?gA`${gA.identifier(j)}.`:void 0}${gA.identifier(k)}${l&&gA` ${gA.identifier(l)}`}`,n=this.buildUpdateSet(a,b),o=f&&gA.join([gA.raw(" from "),this.buildFromTable(f)]),p=this.buildJoins(g),q=d?gA` returning ${this.buildSelection(d,{isSingleTable:!f})}`:void 0,r=c?gA` where ${c}`:void 0;return gA`${h}update ${m} set ${n}${o}${p}${r}${q}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if(fT(a,gv.Aliased)&&a.isSelectionField)e.push(gA.identifier(a.fieldAlias));else if(fT(a,gv.Aliased)||fT(a,gv)){let c=fT(a,gv.Aliased)?a.sql:a;b?e.push(new gv(c.queryChunks.map(a=>fT(a,f4)?gA.identifier(this.casing.getColumnCasing(a)):a))):e.push(c),fT(a,gv.Aliased)&&e.push(gA` as ${gA.identifier(a.fieldAlias)}`)}else if(fT(a,fU))b?e.push(gA.identifier(this.casing.getColumnCasing(a))):e.push(a);else if(fT(a,ge)){let b=Object.entries(a._.selectedFields);if(1===b.length){let c=b[0][1],d=fT(c,gv)?c.decoder:fT(c,fU)?{mapFromDriverValue:a=>c.mapFromDriverValue(a)}:c.sql.decoder;d&&(a._.sql.decoder=d)}e.push(a)}return d<c-1&&e.push(gA`, `),e});return gA.join(d)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[c,d]of a.entries()){0===c&&b.push(gA` `);let e=d.table,f=d.lateral?gA` lateral`:void 0,g=d.on?gA` on ${d.on}`:void 0;if(fT(e,kO)){let a=e[kO.Symbol.Name],c=e[kO.Symbol.Schema],h=e[kO.Symbol.OriginalName],i=a===h?void 0:d.alias;b.push(gA`${gA.raw(d.joinType)} join${f} ${c?gA`${gA.identifier(c)}.`:void 0}${gA.identifier(h)}${i&&gA` ${gA.identifier(i)}`}${g}`)}else if(fT(e,gG)){let a=e[gh].name,c=e[gh].schema,h=e[gh].originalName,i=a===h?void 0:d.alias;b.push(gA`${gA.raw(d.joinType)} join${f} ${c?gA`${gA.identifier(c)}.`:void 0}${gA.identifier(h)}${i&&gA` ${gA.identifier(i)}`}${g}`)}else b.push(gA`${gA.raw(d.joinType)} join${f} ${e}${g}`);c<a.length-1&&b.push(gA` `)}return gA.join(b)}buildFromTable(a){if(fT(a,gq)&&a[gq.Symbol.IsAlias]){let b=gA`${gA.identifier(a[gq.Symbol.OriginalName])}`;return a[gq.Symbol.Schema]&&(b=gA`${gA.identifier(a[gq.Symbol.Schema])}.${b}`),gA`${b} ${gA.identifier(a[gq.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:f,joins:g,orderBy:h,groupBy:i,limit:j,offset:k,lockingClause:l,distinct:m,setOperators:n}){let o,p,q,r=c??gY(b);for(let a of r){let b;if(fT(a.field,fU)&&a.field.table[fW]!==(fT(f,ge)?f._.alias:fT(f,lS)?f[gh].name:fT(f,gv)?void 0:f[fW])&&(b=a.field.table,!g?.some(({alias:a})=>a===(b[gq.Symbol.IsAlias]?b[fW]:b[gq.Symbol.BaseName])))){let b=a.field.table[fW];throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let s=!g||0===g.length,t=this.buildWithCTE(a);m&&(o=!0===m?gA` distinct`:gA` distinct on (${gA.join(m.on,gA`, `)})`);let u=this.buildSelection(r,{isSingleTable:s}),v=this.buildFromTable(f),w=this.buildJoins(g),x=d?gA` where ${d}`:void 0,y=e?gA` having ${e}`:void 0;h&&h.length>0&&(p=gA` order by ${gA.join(h,gA`, `)}`),i&&i.length>0&&(q=gA` group by ${gA.join(i,gA`, `)}`);let z="object"==typeof j||"number"==typeof j&&j>=0?gA` limit ${j}`:void 0,A=k?gA` offset ${k}`:void 0,B=gA.empty();if(l){let a=gA` for ${gA.raw(l.strength)}`;l.config.of&&a.append(gA` of ${gA.join(Array.isArray(l.config.of)?l.config.of:[l.config.of],gA`, `)}`),l.config.noWait?a.append(gA` nowait`):l.config.skipLocked&&a.append(gA` skip locked`),B.append(a)}let C=gA`${t}select${o} ${u} from ${v}${w}${x}${q}${y}${p}${z}${A}${B}`;return n.length>0?this.buildSetOperations(C,n):C}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:g}}){let h,i=gA`(${a.getSQL()}) `,j=gA`(${d.getSQL()})`;if(f&&f.length>0){let a=[];for(let b of f)if(fT(b,f4))a.push(gA.identifier(b.name));else if(fT(b,gv)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];fT(c,f4)&&(b.queryChunks[a]=gA.identifier(c.name))}a.push(gA`${b}`)}else a.push(gA`${b}`);h=gA` order by ${gA.join(a,gA`, `)} `}let k="object"==typeof e||"number"==typeof e&&e>=0?gA` limit ${e}`:void 0,l=gA.raw(`${b} ${c?"all ":""}`),m=g?gA` offset ${g}`:void 0;return gA`${i}${l}${j}${h}${k}${m}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:e,select:f,overridingSystemValue_:g}){let h=[],i=Object.entries(a[gq.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),j=i.map(([,a])=>gA.identifier(this.casing.getColumnCasing(a)));if(f)fT(b,gv)?h.push(b):h.push(b.getSQL());else for(let[a,c]of(h.push(gA.raw("values ")),b.entries())){let d=[];for(let[a,b]of i){let e=c[a];if(void 0===e||fT(e,gz)&&void 0===e.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),c=fT(a,gv)?a:gA.param(a,b);d.push(c)}else if(b.default||void 0===b.onUpdateFn)d.push(gA`default`);else{let a=b.onUpdateFn(),c=fT(a,gv)?a:gA.param(a,b);d.push(c)}else d.push(e)}h.push(d),a<b.length-1&&h.push(gA`, `)}let k=this.buildWithCTE(e),l=gA.join(h),m=d?gA` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,n=c?gA` on conflict ${c}`:void 0,o=!0===g?gA`overriding system value `:void 0;return gA`${k}insert into ${a} ${j} ${o}${l}${n}${m}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let d=b?gA` concurrently`:void 0,e=c?gA` with no data`:void 0;return gA`refresh materialized view${d} ${a}${e}`}prepareTyping(a){if(fT(a,jD)||fT(a,jA))return"json";if(fT(a,jR))return"decimal";if(fT(a,kn))return"time";if(fT(a,kq)||fT(a,ks))return"timestamp";if(fT(a,jj)||fT(a,jl))return"date";else if(fT(a,kv))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:i}){let j,k=[],l,m,n=[],o,p=[];if(!0===f)k=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:gL(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,gL(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,lj()):f.where;o=a&&gN(a,g)}let h=[],i=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),i.push(b));i.length>0&&(i=a?i.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!i.includes(a)))}else i=Object.keys(e.columns);for(let a of i){let b=e.columns[a];h.push({tsKey:a,value:b})}let j=[];if(f.with&&(j=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:gA}):f.extras))h.push({tsKey:a,value:gM(b,g)});for(let{tsKey:a,value:b}of h)k.push({dbKey:fT(b,gv.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:fT(b,fU)?gL(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let q="function"==typeof f.orderBy?f.orderBy(d,lk()):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(q)||(q=[q]),n=q.map(a=>fT(a,fU)?gL(a,g):gN(a,g)),l=f.limit,m=f.offset,j)){let f=lm(b,c,h),i=c[gr(h.referencedTable)],j=`${g}_${d}`,l=kW(...f.fields.map((a,b)=>kU(gL(f.references[b],j),gL(a,g)))),m=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:fT(h,lh)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:j,joinOn:l,nestedQueryRelation:h}),n=gA`${gA.identifier(j)}.${gA.identifier("data")}`.as(d);p.push({on:gA`true`,table:new ge(m.sql,{},j),alias:j,joinType:"left",lateral:!0}),k.push({dbKey:d,tsKey:d,field:n,relationTableTsKey:i,isJson:!0,selection:m.selection})}}if(0===k.length)throw new iT({message:`No fields selected for table "${e.tsName}" ("${g}")`});if(o=kW(i,o),h){let a=gA`json_build_array(${gA.join(k.map(({field:a,tsKey:b,isJson:c})=>c?gA`${gA.identifier(`${g}_${b}`)}.${gA.identifier("data")}`:fT(a,gv.Aliased)?a.sql:a),gA`, `)})`;fT(h,li)&&(a=gA`coalesce(json_agg(${a}${n.length>0?gA` order by ${gA.join(n,gA`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:e.tsName,selection:k}];void 0!==l||void 0!==m||n.length>0?(j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:[{path:[],field:gA.raw("*")}],where:o,limit:l,offset:m,orderBy:n,setOperators:[]}),o=void 0,l=void 0,m=void 0,n=[]):j=gK(d,g),j=this.buildSelectQuery({table:fT(j,kO)?j:new ge(j,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]})}else j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:k.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]});return{tableTsKey:e.tsName,sql:j,selection:k}}}class lU{static [fS]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:fT(a,ge)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):fT(a,lS)?a[gh].selectedFields:fT(a,gv)?{}:g0(a),new lW({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class lV extends lr{static [fS]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){for(const h of(super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b,config:this.config},this.tableName=g1(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},md(a)))this.usedTables.add(h)}getUsedTables(){return[...this.usedTables]}createJoin(a,b){return(c,d)=>{let e=this.tableName,f=g1(c);for(let a of md(c))this.usedTables.add(a);if("string"==typeof f&&this.config.joins?.some(a=>a.alias===f))throw Error(`Alias "${f}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof e&&(this.config.fields={[e]:this.config.fields}),"string"==typeof f&&!fT(c,gv))){let a=fT(c,ge)?c._.selectedFields:fT(c,gG)?c[gh].selectedFields:c[gq.Symbol.Columns];this.config.fields[f]=a}if("function"==typeof d&&(d=d(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:d,table:c,joinType:a,alias:f,lateral:b}),"string"==typeof f)switch(a){case"left":this.joinsNotNullableMap[f]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[f]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[f]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(a,b){return c=>{let d="function"==typeof c?c(lY()):c;if(!gZ(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){let b=[];if(b.push(...md(this.config.table)),this.config.joins)for(let a of this.config.joins)b.push(...md(a.table));return new Proxy(new ge(this.getSQL(),this.config.fields,a,!1,[...new Set(b)]),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gO({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(a){return this.cacheConfig=void 0===a?{config:{},enable:!0,autoInvalidate:!0}:!1===a?{enable:!1}:{enable:!0,autoInvalidate:!0,...a},this}}class lW extends lV{static [fS]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f,cacheConfig:g,usedTables:h}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:i}=c;return gg("drizzle.prepareQuery",()=>{let c=gY(i),j=b.prepareQuery(d.sqlToQuery(this.getSQL()),c,a,!0,void 0,{type:"select",tables:[...h]},g);return j.joinsNotNullableMap=e,j.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>gg("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function lX(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!gZ(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}g_(lW,[gQ]);let lY=()=>({union:lZ,unionAll:l$,intersect:l_,intersectAll:l0,except:l1,exceptAll:l2}),lZ=lX("union",!1),l$=lX("union",!0),l_=lX("intersect",!1),l0=lX("intersect",!0),l1=lX("except",!1),l2=lX("except",!0);class l3{static [fS]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=fT(a,lT)?a:void 0,this.dialectConfig=fT(a,lT)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new lU({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new lU({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new lU({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new lU({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new lU({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new lU({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new lT(this.dialectConfig)),this.dialect}}class l4{constructor(a,b){this.name=a,this.schema=b}static [fS]="PgDefaultViewBuilderCore";config={};with(a){return this.config.with=a,this}}class l5 extends l4{static [fS]="PgViewBuilder";as(a){"function"==typeof a&&(a=a(new l3));let b=new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),c=new Proxy(a.getSelectedFields(),b);return new Proxy(new ma({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:c,query:a.getSQL().inlineParams()}}),b)}}class l6 extends l4{static [fS]="PgManualViewBuilder";columns;constructor(a,b,c){super(a,c),this.columns=g0(kP(a,b))}existing(){return new Proxy(new ma({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(a){return new Proxy(new ma({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:a.inlineParams()}}),new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class l7{constructor(a,b){this.name=a,this.schema=b}static [fS]="PgMaterializedViewBuilderCore";config={};using(a){return this.config.using=a,this}with(a){return this.config.with=a,this}tablespace(a){return this.config.tablespace=a,this}withNoData(){return this.config.withNoData=!0,this}}class l8 extends l7{static [fS]="PgMaterializedViewBuilder";as(a){"function"==typeof a&&(a=a(new l3));let b=new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),c=new Proxy(a.getSelectedFields(),b);return new Proxy(new mc({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:c,query:a.getSQL().inlineParams()}}),b)}}class l9 extends l7{static [fS]="PgManualMaterializedViewBuilder";columns;constructor(a,b,c){super(a,c),this.columns=g0(kP(a,b))}existing(){return new Proxy(new mc({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(a){return new Proxy(new mc({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:a.inlineParams()}}),new gO({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class ma extends lS{static [fS]="PgView";[lR];constructor({pgConfig:a,config:b}){super(b),a&&(this[lR]={with:a.with})}}let mb=Symbol.for("drizzle:PgMaterializedViewConfig");class mc extends lS{static [fS]="PgMaterializedView";[mb];constructor({pgConfig:a,config:b}){super(b),this[mb]={with:a?.with,using:a?.using,tablespace:a?.tablespace,withNoData:a?.withNoData}}}function md(a){return fT(a,kO)?[a[gi]?`${a[gi]}.${a[gq.Symbol.BaseName]}`:a[gq.Symbol.BaseName]]:fT(a,ge)?a._.usedTables??[]:fT(a,gv)?a.usedTables??[]:[]}class me extends gQ{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [fS]="PgDelete";config;cacheConfig;where(a){return this.config.where=a,this}returning(a=this.config.table[gq.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=gY(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return gg("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"delete",tables:md(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>gg("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gO({alias:this.config.table[fW],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class mf{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [fS]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[gq.Symbol.Columns];for(let d of Object.keys(a)){let e=a[d];b[d]=fT(e,gv)?e:new gz(e,c[d])}return b});return new mg(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let b="function"==typeof a?a(new l3):a;if(!fT(b,gv)&&!gZ(this.table[gj],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new mg(this.table,b,this.session,this.dialect,this.withList,!0)}}class mg extends gQ{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [fS]="PgInsert";config;cacheConfig;returning(a=this.config.table[gq.Symbol.Columns]){return this.config.returningFields=a,this.config.returning=gY(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=gA`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?gA` where ${a.where}`:void 0;this.config.onConflict=gA`(${gA.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?gA` where ${a.where}`:void 0,c=a.targetWhere?gA` where ${a.targetWhere}`:void 0,d=a.setWhere?gA` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,g$(this.config.table,a.set)),f="";return f=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=gA`(${gA.raw(f)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return gg("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:md(this.config.table)},this.cacheConfig))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>gg("drizzle.operation",()=>this._prepare().execute(a,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gO({alias:this.config.table[fW],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class mh{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [fS]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return new mi(this.table,g$(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class mi extends gQ{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=g1(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [fS]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(a){let b=g1(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return fT(a,kO)?a[gq.Symbol.Columns]:fT(a,ge)?a._.selectedFields:a[gh].selectedFields}createJoin(a){return(b,c)=>{let d=g1(b);if("string"==typeof d&&this.config.joins.some(a=>a.alias===d))throw Error(`Alias "${d}" is already used in this query`);if("function"==typeof c){let a=this.config.from&&!fT(this.config.from,gv)?this.getTableLikeFields(this.config.from):void 0;c=c(new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:c,table:b,joinType:a,alias:d}),"string"==typeof d)switch(a){case"left":this.joinsNotNullableMap[d]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!0;break;case"inner":this.joinsNotNullableMap[d]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[d]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[gq.Symbol.Columns]),this.config.from)){let b=g1(this.config.from);if("string"==typeof b&&this.config.from&&!fT(this.config.from,gv)){let c=this.getTableLikeFields(this.config.from);a[b]=c}for(let b of this.config.joins){let c=g1(b.table);if("string"==typeof c&&!fT(b.table,gv)){let d=this.getTableLikeFields(b.table);a[c]=d}}}return this.config.returningFields=a,this.config.returning=gY(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0,void 0,{type:"insert",tables:md(this.config.table)},this.cacheConfig);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new gO({alias:this.config.table[fW],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class mj extends gv{constructor(a){super(mj.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=mj.buildCount(a.source,a.filters)}sql;token;static [fS]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return gA`(select count(*) from ${a}${gA.raw(" where ").if(b)}${b})`}static buildCount(a,b){return gA`select count(*) as count from ${a}${gA.raw(" where ").if(b)}${b};`}setToken(a){return this.token=a,this}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class mk{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [fS]="PgRelationalQueryBuilder";findMany(a){return new ml(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new ml(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class ml extends gQ{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [fS]="PgRelationalQuery";_prepare(a){return gg("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>lo(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return gg("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class mm extends gQ{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [fS]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class mn extends gQ{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [fS]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return gg("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>gg("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class mo{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(const[d,e]of Object.entries(this._.schema))this.query[d]=new mk(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b);this.$cache={invalidate:async a=>{}}}static [fS]="PgDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new l3(c.dialect))),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new mj({source:a,filters:b,session:this.session})}$cache;with(...a){let b=this;return{select:function(c){return new lU({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new lU({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new lU({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new mh(c,b.session,b.dialect,a)},insert:function(c){return new mf(c,b.session,b.dialect,a)},delete:function(c){return new me(c,b.session,b.dialect,a)}}}select(a){return new lU({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new lU({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new lU({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new mh(a,this.session,this.dialect)}insert(a){return new mf(a,this.session,this.dialect)}delete(a){return new me(a,this.session,this.dialect)}refreshMaterializedView(a){return new mn(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?gA.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new mm(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}class mp{static [fS]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new mq(a,this)}}class mq{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [fS]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[fW],...d,c[0].table[fW],...e];return a??`${f.join("_")}_fk`}}function mr(a,b){return`${a[fW]}_${b.join("_")}_unique`}class ms{constructor(a,b){this.name=b,this.columns=a}static [fS]="SQLiteUniqueConstraintBuilder";columns;build(a){return new mu(a,this.columns,this.name)}}class mt{static [fS]="SQLiteUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new ms(a,this.name)}}class mu{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??mr(this.table,this.columns.map(a=>a.name))}static [fS]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}}class mv extends fV{static [fS]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>{let e;return e=new mp(()=>({columns:[a],foreignColumns:[c()]})),d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})}}class mw extends fU{constructor(a,b){b.uniqueName||(b.uniqueName=mr(a,[b.name])),super(a,b),this.table=a}static [fS]="SQLiteColumn"}class mx extends mv{static [fS]="SQLiteBigIntBuilder";constructor(a){super(a,"bigint","SQLiteBigInt")}build(a){return new my(a,this.config)}}class my extends mw{static [fS]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(a){return"undefined"!=typeof Buffer&&Buffer.from?BigInt((Buffer.isBuffer(a)?a:a instanceof ArrayBuffer?Buffer.from(a):a.buffer?Buffer.from(a.buffer,a.byteOffset,a.byteLength):Buffer.from(a)).toString("utf8")):BigInt(g3.decode(a))}mapToDriverValue(a){return Buffer.from(a.toString())}}class mz extends mv{static [fS]="SQLiteBlobJsonBuilder";constructor(a){super(a,"json","SQLiteBlobJson")}build(a){return new mA(a,this.config)}}class mA extends mw{static [fS]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(a){return"undefined"!=typeof Buffer&&Buffer.from?JSON.parse((Buffer.isBuffer(a)?a:a instanceof ArrayBuffer?Buffer.from(a):a.buffer?Buffer.from(a.buffer,a.byteOffset,a.byteLength):Buffer.from(a)).toString("utf8")):JSON.parse(g3.decode(a))}mapToDriverValue(a){return Buffer.from(JSON.stringify(a))}}class mB extends mv{static [fS]="SQLiteBlobBufferBuilder";constructor(a){super(a,"buffer","SQLiteBlobBuffer")}build(a){return new mC(a,this.config)}}class mC extends mw{static [fS]="SQLiteBlobBuffer";mapFromDriverValue(a){return Buffer.isBuffer(a)?a:Buffer.from(a)}getSQLType(){return"blob"}}function mD(a,b){let{name:c,config:d}=g2(a,b);return d?.mode==="json"?new mz(c):d?.mode==="bigint"?new mx(c):new mB(c)}class mE extends mv{static [fS]="SQLiteCustomColumnBuilder";constructor(a,b,c){super(a,"custom","SQLiteCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new mF(a,this.config)}}class mF extends mw{static [fS]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function mG(a){return(b,c)=>{let{name:d,config:e}=g2(b,c);return new mE(d,e,a)}}class mH extends mv{static [fS]="SQLiteBaseIntegerBuilder";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}primaryKey(a){return a?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class mI extends mw{static [fS]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class mJ extends mH{static [fS]="SQLiteIntegerBuilder";constructor(a){super(a,"number","SQLiteInteger")}build(a){return new mK(a,this.config)}}class mK extends mI{static [fS]="SQLiteInteger"}class mL extends mH{static [fS]="SQLiteTimestampBuilder";constructor(a,b){super(a,"date","SQLiteTimestamp"),this.config.mode=b}defaultNow(){return this.default(gA`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(a){return new mM(a,this.config)}}class mM extends mI{static [fS]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(a){return new Date("timestamp"===this.config.mode?1e3*a:a)}mapToDriverValue(a){let b=a.getTime();return"timestamp"===this.config.mode?Math.floor(b/1e3):b}}class mN extends mH{static [fS]="SQLiteBooleanBuilder";constructor(a,b){super(a,"boolean","SQLiteBoolean"),this.config.mode=b}build(a){return new mO(a,this.config)}}class mO extends mI{static [fS]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(a){return 1===Number(a)}mapToDriverValue(a){return+!!a}}function mP(a,b){let{name:c,config:d}=g2(a,b);return d?.mode==="timestamp"||d?.mode==="timestamp_ms"?new mL(c,d.mode):d?.mode==="boolean"?new mN(c,d.mode):new mJ(c)}class mQ extends mv{static [fS]="SQLiteNumericBuilder";constructor(a){super(a,"string","SQLiteNumeric")}build(a){return new mR(a,this.config)}}class mR extends mw{static [fS]="SQLiteNumeric";mapFromDriverValue(a){return"string"==typeof a?a:String(a)}getSQLType(){return"numeric"}}class mS extends mv{static [fS]="SQLiteNumericNumberBuilder";constructor(a){super(a,"number","SQLiteNumericNumber")}build(a){return new mT(a,this.config)}}class mT extends mw{static [fS]="SQLiteNumericNumber";mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}mapToDriverValue=String;getSQLType(){return"numeric"}}class mU extends mv{static [fS]="SQLiteNumericBigIntBuilder";constructor(a){super(a,"bigint","SQLiteNumericBigInt")}build(a){return new mV(a,this.config)}}class mV extends mw{static [fS]="SQLiteNumericBigInt";mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return"numeric"}}function mW(a,b){let{name:c,config:d}=g2(a,b),e=d?.mode;return"number"===e?new mS(c):"bigint"===e?new mU(c):new mQ(c)}class mX extends mv{static [fS]="SQLiteRealBuilder";constructor(a){super(a,"number","SQLiteReal")}build(a){return new mY(a,this.config)}}class mY extends mw{static [fS]="SQLiteReal";getSQLType(){return"real"}}function mZ(a){return new mX(a??"")}class m$ extends mv{static [fS]="SQLiteTextBuilder";constructor(a,b){super(a,"string","SQLiteText"),this.config.enumValues=b.enum,this.config.length=b.length}build(a){return new m_(a,this.config)}}class m_ extends mw{static [fS]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(a,b){super(a,b)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class m0 extends mv{static [fS]="SQLiteTextJsonBuilder";constructor(a){super(a,"json","SQLiteTextJson")}build(a){return new m1(a,this.config)}}class m1 extends mw{static [fS]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(a){return JSON.parse(a)}mapToDriverValue(a){return JSON.stringify(a)}}function m2(a,b={}){let{name:c,config:d}=g2(a,b);return"json"===d.mode?new m0(c):new m$(c,d)}let m3=Symbol.for("drizzle:SQLiteInlineForeignKeys");class m4 extends gq{static [fS]="SQLiteTable";static Symbol=Object.assign({},gq.Symbol,{InlineForeignKeys:m3});[gq.Symbol.Columns];[m3]=[];[gq.Symbol.ExtraConfigBuilder]=void 0}let m5=(a,b,c)=>(function(a,b,c,d,e=a){let f=new m4(a,void 0,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({blob:mD,customType:mG,integer:mP,numeric:mW,real:mZ,text:m2}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[m3].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[gq.Symbol.Columns]=g,h[gq.Symbol.ExtraConfigColumns]=g,c&&(h[m4.Symbol.ExtraConfigBuilder]=c),h})(a,b,c);class m6 extends gG{static [fS]="SQLiteViewBase"}class m7{static [fS]="SQLiteDialect";casing;constructor(a){this.casing=new iS(a?.casing)}escapeName(a){return`"${a}"`}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[gA`with `];for(let[c,d]of a.entries())b.push(gA`${gA.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push(gA`, `);return b.push(gA` `),gA.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d,limit:e,orderBy:f}){let g=this.buildWithCTE(d),h=c?gA` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,i=b?gA` where ${b}`:void 0,j=this.buildOrderBy(f),k=this.buildLimit(e);return gA`${g}delete from ${a}${i}${h}${j}${k}`}buildUpdateSet(a,b){let c=a[gq.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return gA.join(d.flatMap((a,d)=>{let f=c[a],g=f.onUpdateFn?.(),h=b[a]??(fT(g,gv)?g:gA.param(g,f)),i=gA`${gA.identifier(this.casing.getColumnCasing(f))} = ${h}`;return d<e-1?[i,gA.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,joins:f,from:g,limit:h,orderBy:i}){let j=this.buildWithCTE(e),k=this.buildUpdateSet(a,b),l=g&&gA.join([gA.raw(" from "),this.buildFromTable(g)]),m=this.buildJoins(f),n=d?gA` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,o=c?gA` where ${c}`:void 0,p=this.buildOrderBy(i),q=this.buildLimit(h);return gA`${j}update ${a} set ${k}${l}${m}${o}${n}${p}${q}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if(fT(a,gv.Aliased)&&a.isSelectionField)e.push(gA.identifier(a.fieldAlias));else if(fT(a,gv.Aliased)||fT(a,gv)){let c=fT(a,gv.Aliased)?a.sql:a;b?e.push(new gv(c.queryChunks.map(a=>fT(a,fU)?gA.identifier(this.casing.getColumnCasing(a)):a))):e.push(c),fT(a,gv.Aliased)&&e.push(gA` as ${gA.identifier(a.fieldAlias)}`)}else if(fT(a,fU)){let c=a.table[gq.Symbol.Name];"SQLiteNumericBigInt"===a.columnType?b?e.push(gA`cast(${gA.identifier(this.casing.getColumnCasing(a))} as text)`):e.push(gA`cast(${gA.identifier(c)}.${gA.identifier(this.casing.getColumnCasing(a))} as text)`):b?e.push(gA.identifier(this.casing.getColumnCasing(a))):e.push(gA`${gA.identifier(c)}.${gA.identifier(this.casing.getColumnCasing(a))}`)}else if(fT(a,ge)){let b=Object.entries(a._.selectedFields);if(1===b.length){let c=b[0][1],d=fT(c,gv)?c.decoder:fT(c,fU)?{mapFromDriverValue:a=>c.mapFromDriverValue(a)}:c.sql.decoder;d&&(a._.sql.decoder=d)}e.push(a)}return d<c-1&&e.push(gA`, `),e});return gA.join(d)}buildJoins(a){if(!a||0===a.length)return;let b=[];if(a)for(let[c,d]of a.entries()){0===c&&b.push(gA` `);let e=d.table,f=d.on?gA` on ${d.on}`:void 0;if(fT(e,m4)){let a=e[m4.Symbol.Name],c=e[m4.Symbol.Schema],g=e[m4.Symbol.OriginalName],h=a===g?void 0:d.alias;b.push(gA`${gA.raw(d.joinType)} join ${c?gA`${gA.identifier(c)}.`:void 0}${gA.identifier(g)}${h&&gA` ${gA.identifier(h)}`}${f}`)}else b.push(gA`${gA.raw(d.joinType)} join ${e}${f}`);c<a.length-1&&b.push(gA` `)}return gA.join(b)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?gA` limit ${a}`:void 0}buildOrderBy(a){let b=[];if(a)for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(gA`, `);return b.length>0?gA` order by ${gA.join(b)}`:void 0}buildFromTable(a){return fT(a,gq)&&a[gq.Symbol.IsAlias]?gA`${gA`${gA.identifier(a[gq.Symbol.Schema]??"")}.`.if(a[gq.Symbol.Schema])}${gA.identifier(a[gq.Symbol.OriginalName])} ${gA.identifier(a[gq.Symbol.Name])}`:a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:f,joins:g,orderBy:h,groupBy:i,limit:j,offset:k,distinct:l,setOperators:m}){let n=c??gY(b);for(let a of n){let b;if(fT(a.field,fU)&&a.field.table[fW]!==(fT(f,ge)?f._.alias:fT(f,m6)?f[gh].name:fT(f,gv)?void 0:f[fW])&&(b=a.field.table,!g?.some(({alias:a})=>a===(b[gq.Symbol.IsAlias]?b[fW]:b[gq.Symbol.BaseName])))){let b=a.field.table[fW];throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let o=!g||0===g.length,p=this.buildWithCTE(a),q=l?gA` distinct`:void 0,r=this.buildSelection(n,{isSingleTable:o}),s=this.buildFromTable(f),t=this.buildJoins(g),u=d?gA` where ${d}`:void 0,v=e?gA` having ${e}`:void 0,w=[];if(i)for(let[a,b]of i.entries())w.push(b),a<i.length-1&&w.push(gA`, `);let x=w.length>0?gA` group by ${gA.join(w)}`:void 0,y=this.buildOrderBy(h),z=this.buildLimit(j),A=k?gA` offset ${k}`:void 0,B=gA`${p}select${q} ${r} from ${s}${t}${u}${x}${v}${y}${z}${A}`;return m.length>0?this.buildSetOperations(B,m):B}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:g}}){let h,i=gA`${a.getSQL()} `,j=gA`${d.getSQL()}`;if(f&&f.length>0){let a=[];for(let b of f)if(fT(b,mw))a.push(gA.identifier(b.name));else if(fT(b,gv)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];fT(c,mw)&&(b.queryChunks[a]=gA.identifier(this.casing.getColumnCasing(c)))}a.push(gA`${b}`)}else a.push(gA`${b}`);h=gA` order by ${gA.join(a,gA`, `)}`}let k="object"==typeof e||"number"==typeof e&&e>=0?gA` limit ${e}`:void 0,l=gA.raw(`${b} ${c?"all ":""}`),m=g?gA` offset ${g}`:void 0;return gA`${i}${l}${j}${h}${k}${m}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:e,select:f}){let g=[],h=Object.entries(a[gq.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),i=h.map(([,a])=>gA.identifier(this.casing.getColumnCasing(a)));if(f)fT(b,gv)?g.push(b):g.push(b.getSQL());else for(let[a,c]of(g.push(gA.raw("values ")),b.entries())){let d=[];for(let[a,b]of h){let e=c[a];if(void 0===e||fT(e,gz)&&void 0===e.value){let a;if(null!==b.default&&void 0!==b.default)a=fT(b.default,gv)?b.default:gA.param(b.default,b);else if(void 0!==b.defaultFn){let c=b.defaultFn();a=fT(c,gv)?c:gA.param(c,b)}else if(b.default||void 0===b.onUpdateFn)a=gA`null`;else{let c=b.onUpdateFn();a=fT(c,gv)?c:gA.param(c,b)}d.push(a)}else d.push(e)}g.push(d),a<b.length-1&&g.push(gA`, `)}let j=this.buildWithCTE(e),k=gA.join(g),l=d?gA` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,m=c?.length?gA.join(c):void 0;return gA`${j}insert into ${a} ${i} ${k}${m}${l}`}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:d,tableConfig:e,queryConfig:f,tableAlias:g,nestedQueryRelation:h,joinOn:i}){let j,k=[],l,m,n=[],o,p=[];if(!0===f)k=Object.entries(e.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:gL(b,g),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let d=Object.fromEntries(Object.entries(e.columns).map(([a,b])=>[a,gL(b,g)]));if(f.where){let a="function"==typeof f.where?f.where(d,lj()):f.where;o=a&&gN(a,g)}let h=[],i=[];if(f.columns){let a=!1;for(let[b,c]of Object.entries(f.columns))void 0!==c&&b in e.columns&&(a||!0!==c||(a=!0),i.push(b));i.length>0&&(i=a?i.filter(a=>f.columns?.[a]===!0):Object.keys(e.columns).filter(a=>!i.includes(a)))}else i=Object.keys(e.columns);for(let a of i){let b=e.columns[a];h.push({tsKey:a,value:b})}let j=[];if(f.with&&(j=Object.entries(f.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:e.relations[a]}))),f.extras)for(let[a,b]of Object.entries("function"==typeof f.extras?f.extras(d,{sql:gA}):f.extras))h.push({tsKey:a,value:gM(b,g)});for(let{tsKey:a,value:b}of h)k.push({dbKey:fT(b,gv.Aliased)?b.fieldAlias:e.columns[a].name,tsKey:a,field:fT(b,fU)?gL(b,g):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let p="function"==typeof f.orderBy?f.orderBy(d,lk()):f.orderBy??[];for(let{tsKey:d,queryConfig:e,relation:h}of(Array.isArray(p)||(p=[p]),n=p.map(a=>fT(a,fU)?gL(a,g):gN(a,g)),l=f.limit,m=f.offset,j)){let f=lm(b,c,h),i=c[gr(h.referencedTable)],j=`${g}_${d}`,l=kW(...f.fields.map((a,b)=>kU(gL(f.references[b],j),gL(a,g)))),m=this.buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:a[i],tableConfig:b[i],queryConfig:fT(h,lh)?!0===e?{limit:1}:{...e,limit:1}:e,tableAlias:j,joinOn:l,nestedQueryRelation:h}),n=gA`(${m.sql})`.as(d);k.push({dbKey:d,tsKey:d,field:n,relationTableTsKey:i,isJson:!0,selection:m.selection})}}if(0===k.length)throw new iT({message:`No fields selected for table "${e.tsName}" ("${g}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(o=kW(i,o),h){let a=gA`json_array(${gA.join(k.map(({field:a})=>fT(a,mw)?gA.identifier(this.casing.getColumnCasing(a)):fT(a,gv.Aliased)?a.sql:a),gA`, `)})`;fT(h,li)&&(a=gA`coalesce(json_group_array(${a}), json_array())`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:e.tsName,selection:k}];void 0!==l||void 0!==m||n.length>0?(j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:[{path:[],field:gA.raw("*")}],where:o,limit:l,offset:m,orderBy:n,setOperators:[]}),o=void 0,l=void 0,m=void 0,n=void 0):j=gK(d,g),j=this.buildSelectQuery({table:fT(j,m4)?j:new ge(j,{},g),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]})}else j=this.buildSelectQuery({table:gK(d,g),fields:{},fieldsFlat:k.map(({field:a})=>({path:[],field:fT(a,fU)?gL(a,g):a})),joins:p,where:o,limit:l,offset:m,orderBy:n,setOperators:[]});return{tableTsKey:e.tsName,sql:j,selection:k}}}class m8 extends m7{static [fS]="SQLiteSyncDialect";migrate(a,b,c){let d=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=gA`
			CREATE TABLE IF NOT EXISTS ${gA.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;b.run(e);let f=b.values(gA`SELECT id, hash, created_at FROM ${gA.identifier(d)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;b.run(gA`BEGIN`);try{for(let c of a)if(!f||Number(f[2])<c.folderMillis){for(let a of c.sql)b.run(gA.raw(a));b.run(gA`INSERT INTO ${gA.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}b.run(gA`COMMIT`)}catch(a){throw b.run(gA`ROLLBACK`),a}}}class m9 extends m7{static [fS]="SQLiteAsyncDialect";async migrate(a,b,c){let d=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=gA`
			CREATE TABLE IF NOT EXISTS ${gA.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await b.run(e);let f=(await b.values(gA`SELECT id, hash, created_at FROM ${gA.identifier(d)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await b.transaction(async b=>{for(let c of a)if(!f||Number(f[2])<c.folderMillis){for(let a of c.sql)await b.run(gA.raw(a));await b.run(gA`INSERT INTO ${gA.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}})}}class na{constructor(a,b){this.name=a,this.value=b}static [fS]="SQLiteCheckBuilder";brand;build(a){return new nb(a,this)}}class nb{constructor(a,b){this.table=a,this.name=b.name,this.value=b.value}static [fS]="SQLiteCheck";name;value}class nc{constructor(a,b){this.name=a,this.unique=b}static [fS]="SQLiteIndexBuilderOn";on(...a){return new nd(this.name,a,this.unique)}}class nd{static [fS]="SQLiteIndexBuilder";config;constructor(a,b,c){this.config={name:a,columns:b,unique:c,where:void 0}}where(a){return this.config.where=a,this}build(a){return new ne(this.config,a)}}class ne{static [fS]="SQLiteIndex";config;constructor(a,b){this.config={...a,table:b}}}function nf(...a){return a[0].columns?new ng(a[0].columns,a[0].name):new ng(a)}class ng{static [fS]="SQLitePrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new nh(a,this.columns,this.name)}}class nh{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [fS]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[m4.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function ni(a){return fT(a,m4)?[`${a[gq.Symbol.BaseName]}`]:fT(a,ge)?a._.usedTables??[]:fT(a,gv)?a.usedTables??[]:[]}class nj{static [fS]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,this.withList=a.withList,this.distinct=a.distinct}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:fT(a,ge)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):fT(a,m6)?a[gh].selectedFields:fT(a,gv)?{}:g0(a),new nl({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class nk extends lr{static [fS]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){for(const h of(super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b,config:this.config},this.tableName=g1(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},ni(a)))this.usedTables.add(h)}getUsedTables(){return[...this.usedTables]}createJoin(a){return(b,c)=>{let d=this.tableName,e=g1(b);for(let a of ni(b))this.usedTables.add(a);if("string"==typeof e&&this.config.joins?.some(a=>a.alias===e))throw Error(`Alias "${e}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof d&&(this.config.fields={[d]:this.config.fields}),"string"==typeof e&&!fT(b,gv))){let a=fT(b,ge)?b._.selectedFields:fT(b,gG)?b[gh].selectedFields:b[gq.Symbol.Columns];this.config.fields[e]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:e}),"string"==typeof e)switch(a){case"left":this.joinsNotNullableMap[e]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[e]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");crossJoin=this.createJoin("cross");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(nn()):c;if(!gZ(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){let b=[];if(b.push(...ni(this.config.table)),this.config.joins)for(let a of this.config.joins)b.push(...ni(a.table));return new Proxy(new ge(this.getSQL(),this.config.fields,a,!1,[...new Set(b)]),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new gO({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class nl extends nk{static [fS]="SQLiteSelect";_prepare(a=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let b=gY(this.config.fields),c=this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),b,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return c.joinsNotNullableMap=this.joinsNotNullableMap,c}$withCache(a){return this.cacheConfig=void 0===a?{config:{},enable:!0,autoInvalidate:!0}:!1===a?{enable:!1}:{enable:!0,autoInvalidate:!0,...a},this}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.all()}}function nm(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!gZ(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}g_(nl,[gQ]);let nn=()=>({union:no,unionAll:np,intersect:nq,except:nr}),no=nm("union",!1),np=nm("union",!0),nq=nm("intersect",!1),nr=nm("except",!1);class ns{static [fS]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=fT(a,m7)?a:void 0,this.dialectConfig=fT(a,m7)?void 0:a}$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(c)),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...a){let b=this;return{select:function(c){return new nj({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new nj({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new nj({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new nj({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new m8(this.dialectConfig)),this.dialect}}class nt extends gQ{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [fS]="SQLiteDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.table[m4.Symbol.Columns]){return this.config.returning=gY(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:ni(this.config.table)})}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(a){return this._prepare().execute(a)}$dynamic(){return this}}class nu{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [fS]="SQLiteInsertBuilder";values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[gq.Symbol.Columns];for(let d of Object.keys(a)){let e=a[d];b[d]=fT(e,gv)?e:new gz(e,c[d])}return b});return new nv(this.table,b,this.session,this.dialect,this.withList)}select(a){let b="function"==typeof a?a(new ns):a;if(!fT(b,gv)&&!gZ(this.table[gj],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new nv(this.table,b,this.session,this.dialect,this.withList,!0)}}class nv extends gQ{constructor(a,b,c,d,e,f){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f}}static [fS]="SQLiteInsert";config;returning(a=this.config.table[m4.Symbol.Columns]){return this.config.returning=gY(a),this}onConflictDoNothing(a={}){if(this.config.onConflict||(this.config.onConflict=[]),void 0===a.target)this.config.onConflict.push(gA` on conflict do nothing`);else{let b=Array.isArray(a.target)?gA`${a.target}`:gA`${[a.target]}`,c=a.where?gA` where ${a.where}`:gA``;this.config.onConflict.push(gA` on conflict ${b} do nothing${c}`)}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);let b=a.where?gA` where ${a.where}`:void 0,c=a.targetWhere?gA` where ${a.targetWhere}`:void 0,d=a.setWhere?gA` where ${a.setWhere}`:void 0,e=Array.isArray(a.target)?gA`${a.target}`:gA`${[a.target]}`,f=this.dialect.buildUpdateSet(this.config.table,g$(this.config.table,a.set));return this.config.onConflict.push(gA` on conflict ${e}${c} do update set ${f}${b}${d}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:ni(this.config.table)})}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class nw{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [fS]="SQLiteUpdateBuilder";set(a){return new nx(this.table,g$(this.table,a),this.session,this.dialect,this.withList)}}class nx extends gQ{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]}}static [fS]="SQLiteUpdate";config;from(a){return this.config.from=a,this}createJoin(a){return(b,c)=>{let d=g1(b);if("string"==typeof d&&this.config.joins.some(a=>a.alias===d))throw Error(`Alias "${d}" is already used in this query`);if("function"==typeof c){let a=this.config.from?fT(b,m4)?b[gq.Symbol.Columns]:fT(b,ge)?b._.selectedFields:fT(b,m6)?b[gh].selectedFields:void 0:void 0;c=c(new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new gO({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:c,table:b,joinType:a,alias:d}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[gq.Symbol.Columns],new gO({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.config.table[m4.Symbol.Columns]){return this.config.returning=gY(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:ni(this.config.table)})}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class ny extends gv{constructor(a){super(ny.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.session=a.session,this.sql=ny.buildCount(a.source,a.filters)}sql;static [fS]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(a,b){return gA`(select count(*) from ${a}${gA.raw(" where ").if(b)}${b})`}static buildCount(a,b){return gA`select count(*) from ${a}${gA.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class nz{constructor(a,b,c,d,e,f,g,h){this.mode=a,this.fullSchema=b,this.schema=c,this.tableNamesMap=d,this.table=e,this.tableConfig=f,this.dialect=g,this.session=h}static [fS]="SQLiteAsyncRelationalQueryBuilder";findMany(a){return"sync"===this.mode?new nB(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many"):new nA(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return"sync"===this.mode?new nB(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first"):new nA(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class nA extends gQ{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [fS]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(a=!1){let{query:b,builtQuery:c}=this._toSQL();return this.session[a?"prepareOneTimeQuery":"prepareQuery"](c,void 0,"first"===this.mode?"get":"all",!0,(a,c)=>{let d=a.map(a=>lo(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})}prepare(){return this._prepare(!1)}_toSQL(){let a=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class nB extends nA{static [fS]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class nC extends gQ{constructor(a,b,c,d,e){super(),this.execute=a,this.getSQL=b,this.dialect=d,this.mapBatchResult=e,this.config={action:c}}static [fS]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class nD{constructor(a,b,c,d){this.resultKind=a,this.dialect=b,this.session=c,this._=d?{schema:d.schema,fullSchema:d.fullSchema,tableNamesMap:d.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const e=this.query;if(this._.schema)for(const[f,g]of Object.entries(this._.schema))e[f]=new nz(a,d.fullSchema,this._.schema,this._.tableNamesMap,d.fullSchema[f],g,b,c);this.$cache={invalidate:async a=>{}}}static [fS]="BaseSQLiteDatabase";query;$with=(a,b)=>{let c=this;return{as:d=>("function"==typeof d&&(d=d(new ns(c.dialect))),new Proxy(new gf(d.getSQL(),b??("getSelectedFields"in d?d.getSelectedFields()??{}:{}),a,!0),new gO({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(a,b){return new ny({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new nj({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new nj({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new nw(c,b.session,b.dialect,a)},insert:function(c){return new nu(c,b.session,b.dialect,a)},delete:function(c){return new nt(c,b.session,b.dialect,a)}}}select(a){return new nj({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new nj({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new nw(a,this.session,this.dialect)}$cache;insert(a){return new nu(a,this.session,this.dialect)}delete(a){return new nt(a,this.session,this.dialect)}run(a){let b="string"==typeof a?gA.raw(a):a.getSQL();return"async"===this.resultKind?new nC(async()=>this.session.run(b),()=>b,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(b)}all(a){let b="string"==typeof a?gA.raw(a):a.getSQL();return"async"===this.resultKind?new nC(async()=>this.session.all(b),()=>b,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(b)}get(a){let b="string"==typeof a?gA.raw(a):a.getSQL();return"async"===this.resultKind?new nC(async()=>this.session.get(b),()=>b,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(b)}values(a){let b="string"==typeof a?gA.raw(a):a.getSQL();return"async"===this.resultKind?new nC(async()=>this.session.values(b),()=>b,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(b)}transaction(a,b){return this.session.transaction(a,b)}}var nE,nF,nG,nH,nI,nJ=Object.create,nK=Object.defineProperty,nL=Object.getOwnPropertyDescriptor,nM=Object.getOwnPropertyNames,nN=Object.getPrototypeOf,nO=Object.prototype.hasOwnProperty,nP=(a,b)=>nK(a,"name",{value:b,configurable:!0}),nQ=(a,b)=>()=>(a&&(b=a(a=0)),b),nR=(a,b)=>()=>(b||a((b={exports:{}}).exports,b),b.exports),nS=(a,b)=>{for(var c in b)nK(a,c,{get:b[c],enumerable:!0})},nT=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of nM(b))nO.call(a,e)||e===c||nK(a,e,{get:()=>b[e],enumerable:!(d=nL(b,e))||d.enumerable});return a},nU=(a,b,c)=>(c=null!=a?nJ(nN(a)):{},nT(!b&&a&&a.__esModule?c:nK(c,"default",{value:a,enumerable:!0}),a)),nV=a=>nT(nK({},"__esModule",{value:!0}),a),nW=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?nK(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c},nX=nR(a=>{n$(),a.byteLength=i,a.toByteArray=k,a.fromByteArray=n;var b,c,d=[],e=[],f="u">typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(b=0,c=g.length;b<c;++b)d[b]=g[b],e[g.charCodeAt(b)]=b;function h(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}function i(a){var b=h(a),c=b[0],d=b[1];return(c+d)*3/4-d}function j(a,b,c){return(b+c)*3/4-c}function k(a){var b,c,d=h(a),g=d[0],i=d[1],k=new f(j(a,g,i)),l=0,m=i>0?g-4:g;for(c=0;c<m;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],k[l++]=b>>16&255,k[l++]=b>>8&255,k[l++]=255&b;return 2===i&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,k[l++]=255&b),1===i&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,k[l++]=b>>8&255,k[l++]=255&b),k}function l(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}function m(a,b,c){for(var d=[],e=b;e<c;e+=3)d.push(l((a[e]<<16&0xff0000)+(a[e+1]<<8&65280)+(255&a[e+2])));return d.join("")}function n(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(m(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")}e[45]=62,e[95]=63,nP(h,"getLens"),nP(i,"byteLength"),nP(j,"_byteLength"),nP(k,"toByteArray"),nP(l,"tripletToBase64"),nP(m,"encodeChunk"),nP(n,"fromByteArray")}),nY=nR(a=>{n$(),a.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},a.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}}),nZ=nR(a=>{n$();var b=nX(),c=nY(),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function e(){try{let a=new Uint8Array(1),b={foo:nP(function(){return 42},"foo")};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch{return!1}}function f(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,g.prototype),b}function g(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return h(a,b,c)}function h(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(ac(a,ArrayBuffer)||a&&ac(a.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(ac(a,SharedArrayBuffer)||a&&ac(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return g.from(d,b,c);let e=p(a);if(e)return e;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return g.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function i(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function j(a,b,c){return i(a),a<=0?f(a):void 0!==b?"string"==typeof c?f(a).fill(b,c):f(a).fill(b):f(a)}function k(a){return i(a),f(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!g.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|s(a,b),d=f(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=f(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(ac(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),g.prototype),d}function p(a){if(g.isBuffer(a)){let b=0|q(a.length),c=f(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||ad(a.length)?f(0):m(a):"Buffer"===a.type&&Array.isArray(a.data)?m(a.data):void 0}function q(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function r(a){return+a!=a&&(a=0),g.alloc(+a)}function s(a,b){if(g.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||ac(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return Z(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return aa(a).length;default:if(e)return d?-1:Z(a).length;b=(""+b).toLowerCase(),e=!0}}function t(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function v(a,b,c,d,e){if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),ad(c*=1)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:w(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):w(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function w(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(nP(j,"read"),e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function x(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){let d=parseInt(b.substr(2*e,2),16);if(ad(d))break;a[c+e]=d}return e}function y(a,b,c,d){return ab(Z(b,a.length-c),a,c,d)}function z(a,b,c,d){return ab($(b),a,c,d)}function A(a,b,c,d){return ab(aa(b),a,c,d)}function B(a,b,c,d){return ab(_(b,a.length-c),a,c,d)}function C(a,c,d){return 0===c&&d===a.length?b.fromByteArray(a):b.fromByteArray(a.slice(c,d))}function D(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}return E(d)}function E(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=ae[a[d]];return e}function I(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}function J(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function L(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function M(a,b,c,d,e){U(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function N(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function O(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,4,34028234663852886e22,-34028234663852886e22),c.write(a,b,d,e,23,4),d+4}function P(a,b,d,e,f){return b*=1,d>>>=0,f||N(a,b,d,8,17976931348623157e292,-17976931348623157e292),c.write(a,b,d,e,52,8),d+8}a.Buffer=g,a.SlowBuffer=r,a.INSPECT_MAX_BYTES=50,a.kMaxLength=0x7fffffff,g.TYPED_ARRAY_SUPPORT=e(),!g.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),nP(e,"typedArraySupport"),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:nP(function(){if(g.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:nP(function(){if(g.isBuffer(this))return this.byteOffset},"get")}),nP(f,"createBuffer"),nP(g,"Buffer"),g.poolSize=8192,nP(h,"from"),g.from=function(a,b,c){return h(a,b,c)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),nP(i,"assertSize"),nP(j,"alloc"),g.alloc=function(a,b,c){return j(a,b,c)},nP(k,"allocUnsafe"),g.allocUnsafe=function(a){return k(a)},g.allocUnsafeSlow=function(a){return k(a)},nP(l,"fromString"),nP(m,"fromArrayLike"),nP(n,"fromArrayView"),nP(o,"fromArrayBuffer"),nP(p,"fromObject"),nP(q,"checked"),nP(r,"SlowBuffer"),g.isBuffer=nP(function(a){return null!=a&&!0===a._isBuffer&&a!==g.prototype},"isBuffer"),g.compare=nP(function(a,b){if(ac(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),ac(b,Uint8Array)&&(b=g.from(b,b.offset,b.byteLength)),!g.isBuffer(a)||!g.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},"compare"),g.isEncoding=nP(function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),g.concat=nP(function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;let d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(ac(b,Uint8Array))e+b.length>d.length?(g.isBuffer(b)||(b=g.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(g.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},"concat"),nP(s,"byteLength"),g.byteLength=s,nP(t,"slowToString"),g.prototype._isBuffer=!0,nP(u,"swap"),g.prototype.swap16=nP(function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)u(this,b,b+1);return this},"swap16"),g.prototype.swap32=nP(function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)u(this,b,b+3),u(this,b+1,b+2);return this},"swap32"),g.prototype.swap64=nP(function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)u(this,b,b+7),u(this,b+1,b+6),u(this,b+2,b+5),u(this,b+3,b+4);return this},"swap64"),g.prototype.toString=nP(function(){let a=this.length;return 0===a?"":0==arguments.length?D(this,0,a):t.apply(this,arguments)},"toString"),g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=nP(function(a){if(!g.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===g.compare(this,a)},"equals"),g.prototype.inspect=nP(function(){let b="",c=a.INSPECT_MAX_BYTES;return b=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(b+=" ... "),"<Buffer "+b+">"},"inspect"),d&&(g.prototype[d]=g.prototype.inspect),g.prototype.compare=nP(function(a,b,c,d,e){if(ac(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength)),!g.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],h=k[a];break}return f<h?-1:+(h<f)},"compare"),nP(v,"bidirectionalIndexOf"),nP(w,"arrayIndexOf"),g.prototype.includes=nP(function(a,b,c){return -1!==this.indexOf(a,b,c)},"includes"),g.prototype.indexOf=nP(function(a,b,c){return v(this,a,b,c,!0)},"indexOf"),g.prototype.lastIndexOf=nP(function(a,b,c){return v(this,a,b,c,!1)},"lastIndexOf"),nP(x,"hexWrite"),nP(y,"utf8Write"),nP(z,"asciiWrite"),nP(A,"base64Write"),nP(B,"ucs2Write"),g.prototype.write=nP(function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return x(this,a,b,c);case"utf8":case"utf-8":return y(this,a,b,c);case"ascii":case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},"write"),g.prototype.toJSON=nP(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),nP(C,"base64Slice"),nP(D,"utf8Slice"),nP(E,"decodeCodePointsArray"),nP(F,"asciiSlice"),nP(G,"latin1Slice"),nP(H,"hexSlice"),nP(I,"utf16leSlice"),g.prototype.slice=nP(function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,g.prototype),d},"slice"),nP(J,"checkOffset"),g.prototype.readUintLE=g.prototype.readUIntLE=nP(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},"readUIntLE"),g.prototype.readUintBE=g.prototype.readUIntBE=nP(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},"readUIntBE"),g.prototype.readUint8=g.prototype.readUInt8=nP(function(a,b){return a>>>=0,b||J(a,1,this.length),this[a]},"readUInt8"),g.prototype.readUint16LE=g.prototype.readUInt16LE=nP(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]|this[a+1]<<8},"readUInt16LE"),g.prototype.readUint16BE=g.prototype.readUInt16BE=nP(function(a,b){return a>>>=0,b||J(a,2,this.length),this[a]<<8|this[a+1]},"readUInt16BE"),g.prototype.readUint32LE=g.prototype.readUInt32LE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},"readUInt32LE"),g.prototype.readUint32BE=g.prototype.readUInt32BE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},"readUInt32BE"),g.prototype.readBigUInt64LE=af(nP(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&W(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))},"readBigUInt64LE")),g.prototype.readBigUInt64BE=af(nP(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&W(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)},"readBigUInt64BE")),g.prototype.readIntLE=nP(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},"readIntLE"),g.prototype.readIntBE=nP(function(a,b,c){a>>>=0,b>>>=0,c||J(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},"readIntBE"),g.prototype.readInt8=nP(function(a,b){return a>>>=0,b||J(a,1,this.length),128&this[a]?-((255-this[a]+1)*1):this[a]},"readInt8"),g.prototype.readInt16LE=nP(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},"readInt16LE"),g.prototype.readInt16BE=nP(function(a,b){a>>>=0,b||J(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},"readInt16BE"),g.prototype.readInt32LE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},"readInt32LE"),g.prototype.readInt32BE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},"readInt32BE"),g.prototype.readBigInt64LE=af(nP(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&W(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])},"readBigInt64LE")),g.prototype.readBigInt64BE=af(nP(function(a){V(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&W(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)},"readBigInt64BE")),g.prototype.readFloatLE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!0,23,4)},"readFloatLE"),g.prototype.readFloatBE=nP(function(a,b){return a>>>=0,b||J(a,4,this.length),c.read(this,a,!1,23,4)},"readFloatBE"),g.prototype.readDoubleLE=nP(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!0,52,8)},"readDoubleLE"),g.prototype.readDoubleBE=nP(function(a,b){return a>>>=0,b||J(a,8,this.length),c.read(this,a,!1,52,8)},"readDoubleBE"),nP(K,"checkInt"),g.prototype.writeUintLE=g.prototype.writeUIntLE=nP(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},"writeUIntLE"),g.prototype.writeUintBE=g.prototype.writeUIntBE=nP(function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;K(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},"writeUIntBE"),g.prototype.writeUint8=g.prototype.writeUInt8=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,255,0),this[b]=255&a,b+1},"writeUInt8"),g.prototype.writeUint16LE=g.prototype.writeUInt16LE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeUInt16LE"),g.prototype.writeUint16BE=g.prototype.writeUInt16BE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeUInt16BE"),g.prototype.writeUint32LE=g.prototype.writeUInt32LE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},"writeUInt32LE"),g.prototype.writeUint32BE=g.prototype.writeUInt32BE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeUInt32BE"),nP(L,"wrtBigUInt64LE"),nP(M,"wrtBigUInt64BE"),g.prototype.writeBigUInt64LE=af(nP(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),g.prototype.writeBigUInt64BE=af(nP(function(a,b=0){return M(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),g.prototype.writeIntLE=nP(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntLE"),g.prototype.writeIntBE=nP(function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);K(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},"writeIntBE"),g.prototype.writeInt8=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},"writeInt8"),g.prototype.writeInt16LE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},"writeInt16LE"),g.prototype.writeInt16BE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},"writeInt16BE"),g.prototype.writeInt32LE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},"writeInt32LE"),g.prototype.writeInt32BE=nP(function(a,b,c){return a*=1,b>>>=0,c||K(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},"writeInt32BE"),g.prototype.writeBigInt64LE=af(nP(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),g.prototype.writeBigInt64BE=af(nP(function(a,b=0){return M(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),nP(N,"checkIEEE754"),nP(O,"writeFloat"),g.prototype.writeFloatLE=nP(function(a,b,c){return O(this,a,b,!0,c)},"writeFloatLE"),g.prototype.writeFloatBE=nP(function(a,b,c){return O(this,a,b,!1,c)},"writeFloatBE"),nP(P,"writeDouble"),g.prototype.writeDoubleLE=nP(function(a,b,c){return P(this,a,b,!0,c)},"writeDoubleLE"),g.prototype.writeDoubleBE=nP(function(a,b,c){return P(this,a,b,!1,c)},"writeDoubleBE"),g.prototype.copy=nP(function(a,b,c,d){if(!g.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},"copy"),g.prototype.fill=nP(function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=g.isBuffer(a)?a:g.from(a,d),h=f.length;if(0===h)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%h]}return this},"fill");var Q={};function R(a,b,c){var d;Q[a]=(nP(d=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}\
]: ${this.message}`}},"NodeError"),d)}function S(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`\
_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function T(a,b,c){V(b,"offset"),(void 0===a[b]||void 0===a[b+c])&&W(b,a.length-(c+1))}function U(a,b,c,d,e,f){if(a>c||a<b){let d="bigint"==typeof b?"n":"",e;throw e=f>3?0===b||b===BigInt(0)?`>= 0${d} and < 2${d}\
 ** ${(f+1)*8}${d}`:`>= -(2${d} ** ${(f+1)*8-1}${d}) and < 2 ** ${(f+1)*8-1}${d}`:`>= ${b}${d} a\
nd <= ${c}${d}`,new Q.ERR_OUT_OF_RANGE("value",e,a)}T(d,e,f)}function V(a,b){if("number"!=typeof a)throw new Q.ERR_INVALID_ARG_TYPE(b,"number",a)}function W(a,b,c){throw Math.floor(a)!==a?(V(a,c),new Q.ERR_OUT_OF_RANGE(c||"offset","an integer",a)):b<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}nP(R,"E"),R("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),R("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received typ\
e ${typeof b}`},TypeError),R("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out o\
f range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=S(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=S(e)),e+="n"),d+=` It must be ${b}. Re\
ceived ${e}`},RangeError),nP(S,"addNumericalSeparator"),nP(T,"checkBounds"),nP(U,"checkIntBI"),nP(V,"validateNumber"),nP(W,"boundsError");var X=/[^+/0-9A-Za-z-_]/g;function Y(a){if((a=(a=a.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}function Z(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function $(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function _(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}function aa(a){return b.toByteArray(Y(a))}function ab(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ac(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}function ad(a){return a!=a}nP(Y,"base64clean"),nP(Z,"utf8ToBytes"),nP($,"asciiToBytes"),nP(_,"utf16leToBytes"),nP(aa,"base64ToBytes"),nP(ab,"blitBuffer"),nP(ac,"isInstance"),nP(ad,"numberIsNaN");var ae=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function af(a){return typeof BigInt>"u"?ag:a}function ag(){throw Error("BigInt not supported")}nP(af,"defineBigIntMethod"),nP(ag,"BufferBigIntNotDefined")}),n$=nQ(()=>{nF=globalThis,nG=globalThis.setImmediate??(a=>setTimeout(a,0)),globalThis.clearImmediate??(a=>clearTimeout(a)),nH="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:nZ().Buffer,(nI=globalThis.process??{}).env??(nI.env={});try{nI.nextTick(()=>{})}catch{let a=Promise.resolve();nI.nextTick=a.then.bind(a)}}),n_=nR((a,b)=>{n$();var c,d="object"==typeof Reflect?Reflect:null,e=d&&"function"==typeof d.apply?d.apply:nP(function(a,b,c){return Function.prototype.apply.call(a,b,c)},"ReflectApply");function f(a){console&&console.warn&&console.warn(a)}c=d&&"function"==typeof d.ownKeys?d.ownKeys:Object.getOwnPropertySymbols?nP(function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))},"ReflectOwnKeys"):nP(function(a){return Object.getOwnPropertyNames(a)},"ReflectOwnKeys"),nP(f,"ProcessEmitWarning");var g=Number.isNaN||nP(function(a){return a!=a},"NumberIsNaN");function h(){h.init.call(this)}nP(h,"EventEmitter"),b.exports=h,b.exports.once=t,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var i=10;function j(a){if("function"!=typeof a)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function k(a){return void 0===a._maxListeners?h.defaultMaxListeners:a._maxListeners}function l(a,b,c,d){var e,g,h;if(j(c),void 0===(g=a._events)?(g=a._events=Object.create(null),a._eventsCount=0):(void 0!==g.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),g=a._events),h=g[b]),void 0===h)h=g[b]=c,++a._eventsCount;else if("function"==typeof h?h=g[b]=d?[c,h]:[h,c]:d?h.unshift(c):h.push(c),(e=k(a))>0&&h.length>e&&!h.warned){h.warned=!0;var i=Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=a,i.type=b,i.count=h.length,f(i)}return a}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function n(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=m.bind(d);return e.listener=c,d.wrapFn=e,e}function o(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?s(e):q(e,e.length)}function p(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function q(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function r(a,b){for(;b+1<a.length;b++)a[b]=a[b+1];a.pop()}function s(a){for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}function t(a,b){return new Promise(function(c,d){function e(c){a.removeListener(b,f),d(c)}function f(){"function"==typeof a.removeListener&&a.removeListener("error",e),c([].slice.call(arguments))}nP(e,"errorListener"),nP(f,"resolver"),v(a,b,f,{once:!0}),"error"!==b&&u(a,e,{once:!0})})}function u(a,b,c){"function"==typeof a.on&&v(a,"error",b,c)}function v(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else if("function"==typeof a.addEventListener)a.addEventListener(b,nP(function e(f){d.once&&a.removeEventListener(b,e),c(f)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}nP(j,"checkListener"),Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:nP(function(){return i},"get"),set:nP(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");i=a},"set")}),h.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=nP(function(a){if("number"!=typeof a||a<0||g(a))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},"setMaxListeners"),nP(k,"_getMaxListeners"),h.prototype.getMaxListeners=nP(function(){return k(this)},"getMaxListeners"),h.prototype.emit=nP(function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var d="error"===a,f=this._events;if(void 0!==f)d=d&&void 0===f.error;else if(!d)return!1;if(d){if(b.length>0&&(g=b[0]),g instanceof Error)throw g;var g,h=Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var i=f[a];if(void 0===i)return!1;if("function"==typeof i)e(i,this,b);else for(var j=i.length,k=q(i,j),c=0;c<j;++c)e(k[c],this,b);return!0},"emit"),nP(l,"_addListener"),h.prototype.addListener=nP(function(a,b){return l(this,a,b,!1)},"addListener"),h.prototype.on=h.prototype.addListener,h.prototype.prependListener=nP(function(a,b){return l(this,a,b,!0)},"prependListener"),nP(m,"onceWrapper"),nP(n,"_onceWrap"),h.prototype.once=nP(function(a,b){return j(b),this.on(a,n(this,a,b)),this},"once"),h.prototype.prependOnceListener=nP(function(a,b){return j(b),this.prependListener(a,n(this,a,b)),this},"prependOnceListener"),h.prototype.removeListener=nP(function(a,b){var c,d,e,f,g;if(j(b),void 0===(d=this._events)||void 0===(c=d[a]))return this;if(c===b||c.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!=typeof c){for(e=-1,f=c.length-1;f>=0;f--)if(c[f]===b||c[f].listener===b){g=c[f].listener,e=f;break}if(e<0)return this;0===e?c.shift():r(c,e),1===c.length&&(d[a]=c[0]),void 0!==d.removeListener&&this.emit("removeListener",a,g||b)}return this},"removeListener"),h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=nP(function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0==arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},"removeAllListeners"),nP(o,"_listeners"),h.prototype.listeners=nP(function(a){return o(this,a,!0)},"listeners"),h.prototype.rawListeners=nP(function(a){return o(this,a,!1)},"rawListeners"),h.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):p.call(a,b)},h.prototype.listenerCount=p,nP(p,"listenerCount"),h.prototype.eventNames=nP(function(){return this._eventsCount>0?c(this._events):[]},"eventNames"),nP(q,"arrayClone"),nP(r,"spliceOne"),nP(s,"unwrapListeners"),nP(t,"once"),nP(u,"addErrorHandlerIfEventEmitter"),nP(v,"eventTargetAgnosticAddListener")}),n0={};function n1(a){return 0}nS(n0,{Socket:()=>n5,isIP:()=>n1});var n2,n3,n4,n5,n6=nQ(()=>{n$(),n2=nU(n_(),1),nP(n1,"isIP"),n3=/^[^.]+\./,n4=class a extends n2.EventEmitter{constructor(){super(...arguments),nW(this,"opts",{}),nW(this,"connecting",!1),nW(this,"pending",!0),nW(this,"writable",!0),nW(this,"encrypted",!1),nW(this,"authorized",!1),nW(this,"destroyed",!1),nW(this,"ws",null),nW(this,"writeBuffer"),nW(this,"tlsState",0),nW(this,"tlsRead"),nW(this,"tlsWrite")}static get poolQueryViaFetch(){return a.opts.poolQueryViaFetch??a.defaults.poolQueryViaFetch}static set poolQueryViaFetch(b){a.opts.poolQueryViaFetch=b}static get fetchEndpoint(){return a.opts.fetchEndpoint??a.defaults.fetchEndpoint}static set fetchEndpoint(b){a.opts.fetchEndpoint=b}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(a){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return a.opts.fetchFunction??a.defaults.fetchFunction}static set fetchFunction(b){a.opts.fetchFunction=b}static get webSocketConstructor(){return a.opts.webSocketConstructor??a.defaults.webSocketConstructor}static set webSocketConstructor(b){a.opts.webSocketConstructor=b}get webSocketConstructor(){return this.opts.webSocketConstructor??a.webSocketConstructor}set webSocketConstructor(a){this.opts.webSocketConstructor=a}static get wsProxy(){return a.opts.wsProxy??a.defaults.wsProxy}static set wsProxy(b){a.opts.wsProxy=b}get wsProxy(){return this.opts.wsProxy??a.wsProxy}set wsProxy(a){this.opts.wsProxy=a}static get coalesceWrites(){return a.opts.coalesceWrites??a.defaults.coalesceWrites}static set coalesceWrites(b){a.opts.coalesceWrites=b}get coalesceWrites(){return this.opts.coalesceWrites??a.coalesceWrites}set coalesceWrites(a){this.opts.coalesceWrites=a}static get useSecureWebSocket(){return a.opts.useSecureWebSocket??a.defaults.useSecureWebSocket}static set useSecureWebSocket(b){a.opts.useSecureWebSocket=b}get useSecureWebSocket(){return this.opts.useSecureWebSocket??a.useSecureWebSocket}set useSecureWebSocket(a){this.opts.useSecureWebSocket=a}static get forceDisablePgSSL(){return a.opts.forceDisablePgSSL??a.defaults.forceDisablePgSSL}static set forceDisablePgSSL(b){a.opts.forceDisablePgSSL=b}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??a.forceDisablePgSSL}set forceDisablePgSSL(a){this.opts.forceDisablePgSSL=a}static get disableSNI(){return a.opts.disableSNI??a.defaults.disableSNI}static set disableSNI(b){a.opts.disableSNI=b}get disableSNI(){return this.opts.disableSNI??a.disableSNI}set disableSNI(a){this.opts.disableSNI=a}static get disableWarningInBrowsers(){return a.opts.disableWarningInBrowsers??a.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(b){a.opts.disableWarningInBrowsers=b}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??a.disableWarningInBrowsers}set disableWarningInBrowsers(a){this.opts.disableWarningInBrowsers=a}static get pipelineConnect(){return a.opts.pipelineConnect??a.defaults.pipelineConnect}static set pipelineConnect(b){a.opts.pipelineConnect=b}get pipelineConnect(){return this.opts.pipelineConnect??a.pipelineConnect}set pipelineConnect(a){this.opts.pipelineConnect=a}static get subtls(){return a.opts.subtls??a.defaults.subtls}static set subtls(b){a.opts.subtls=b}get subtls(){return this.opts.subtls??a.subtls}set subtls(a){this.opts.subtls=a}static get pipelineTLS(){return a.opts.pipelineTLS??a.defaults.pipelineTLS}static set pipelineTLS(b){a.opts.pipelineTLS=b}get pipelineTLS(){return this.opts.pipelineTLS??a.pipelineTLS}set pipelineTLS(a){this.opts.pipelineTLS=a}static get rootCerts(){return a.opts.rootCerts??a.defaults.rootCerts}static set rootCerts(b){a.opts.rootCerts=b}get rootCerts(){return this.opts.rootCerts??a.rootCerts}set rootCerts(a){this.opts.rootCerts=a}wsProxyAddrForHost(a,b){let c=this.wsProxy;if(void 0===c)throw Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return"function"==typeof c?c(a,b):`${c}?address=${a}:${b}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(a,b,c){this.connecting=!0,c&&this.once("connect",c);let d=nP(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),e=nP((a,b=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",a=>{this.emit("error",a),this.emit("close")}),a.addEventListener("message",a=>{if(0===this.tlsState){let b=nH.from(a.data);this.emit("data",b)}}),a.addEventListener("close",()=>{this.emit("close")}),b?d():a.addEventListener("open",d)},"configureWebSocket"),f;try{f=this.wsProxyAddrForHost(b,"string"==typeof a?parseInt(a,10):a)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+f;if(void 0!==this.webSocketConstructor)this.ws=new this.webSocketConstructor(a),e(this.ws);else try{this.ws=new WebSocket(a),e(this.ws)}catch{this.ws=new __unstable_WebSocket(a),e(this.ws)}}catch(a){fetch((this.useSecureWebSocket?"https:":"http:")+"//"+f,{headers:{Upgrade:"websocket"}}).then(b=>{if(this.ws=b.webSocket,null==this.ws)throw a;this.ws.accept(),e(this.ws,!0)}).catch(a=>{this.emit("error",Error(`All attempts to open a WebSocket to connect to the database failed. Please refer \
to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websoc\
ket--undefined. Details: ${a}`)),this.emit("close")})}}async startTls(a){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let b=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),c=new this.subtls.WebSocketReadQueue(this.ws),d=c.read.bind(c),e=this.rawWrite.bind(this),{read:f,write:g}=await this.subtls.startTls(a,b,d,e,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=f,this.tlsWrite=g,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let a=await this.tlsRead();if(void 0===a)break;{let b=nH.from(a);this.emit("data",b)}}}rawWrite(a){if(!this.coalesceWrites){this.ws&&this.ws.send(a);return}if(void 0===this.writeBuffer)this.writeBuffer=a,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let b=new Uint8Array(this.writeBuffer.length+a.length);b.set(this.writeBuffer),b.set(a,this.writeBuffer.length),this.writeBuffer=b}}write(a,b="utf8",c=a=>{}){return 0===a.length?c():("string"==typeof a&&(a=nH.from(a,b)),0===this.tlsState?(this.rawWrite(a),c()):1===this.tlsState?this.once("secureConnection",()=>{this.write(a,b,c)}):(this.tlsWrite(a),c())),!0}end(a=nH.alloc(0),b="utf8",c=()=>{}){return this.write(a,b,()=>{this.ws.close(),c()}),this}destroy(){return this.destroyed=!0,this.end()}},nP(n4,"Socket"),nW(n4,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:nP((a,b,c)=>"https://"+(c?.jwtAuth?a.replace(n3,"apiauth."):a.replace(n3,"api."))+"/sql","fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:nP(a=>a+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),nW(n4,"opts",{}),n5=n4}),n7={};function n8(a,b=!1){let{protocol:c}=new URL(a),{username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,searchParams:k,hash:l}=new URL("http:"+a.substring(c.length));e=decodeURIComponent(e),d=decodeURIComponent(d),i=decodeURIComponent(i);let m=d+":"+e,n=b?Object.fromEntries(k.entries()):j;return{href:a,protocol:c,auth:m,username:d,password:e,host:f,hostname:g,port:h,pathname:i,search:j,query:n,hash:l}}nS(n7,{parse:()=>n8});var n9=nQ(()=>{n$(),nP(n8,"parse")}),oa=nR(a=>{n$(),a.parse=function(a,b){return new c(a,b).parse()};var b=class a{constructor(a,b){this.source=a,this.transform=b||d,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var a=this.source[this.position++];return"\\"===a?{value:this.source[this.position++],escaped:!0}:{value:a,escaped:!1}}record(a){this.recorded.push(a)}newEntry(a){var b;(this.recorded.length>0||a)&&("NULL"!==(b=this.recorded.join(""))||a||(b=null),null!==b&&(b=this.transform(b)),this.entries.push(b),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(b){var c,d,e;for(this.consumeDimensions();!this.isEof();)if("{"!==(c=this.nextCharacter()).value||e){if("}"!==c.value||e)'"'!==c.value||c.escaped?","!==c.value||e?this.record(c.value):this.newEntry():(e&&this.newEntry(!0),e=!e);else if(this.dimension--,!this.dimension&&(this.newEntry(),b))return this.entries}else this.dimension++,this.dimension>1&&(d=new a(this.source.substr(this.position-1),this.transform),this.entries.push(d.parse(!0)),this.position+=d.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};nP(b,"ArrayParser");var c=b;function d(a){return a}nP(d,"identity")}),ob=nR((a,b)=>{n$();var c=oa();b.exports={create:nP(function(a,b){return{parse:nP(function(){return c.parse(a,b)},"parse")}},"create")}}),oc=nR((a,b)=>{n$();var c=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,d=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,e=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,f=/^-?infinity$/;function g(a){var b=d.exec(a);if(b){var c=parseInt(b[1],10);b[4]&&(c=i(c));var e=new Date(c,parseInt(b[2],10)-1,b[3]);return j(c)&&e.setFullYear(c),e}}function h(a){if(a.endsWith("+00"))return 0;var b=e.exec(a.split(" ")[1]);if(b){var c=b[1];return"Z"===c?0:(3600*parseInt(b[2],10)+60*parseInt(b[3]||0,10)+parseInt(b[4]||0,10))*("-"===c?-1:1)*1e3}}function i(a){return-(a-1)}function j(a){return a>=0&&a<100}b.exports=nP(function(a){if(f.test(a))return Number(a.replace("i","I"));var b=c.exec(a);if(!b)return g(a)||null;var d=!!b[8],e=parseInt(b[1],10);d&&(e=i(e));var k=parseInt(b[2],10)-1,l=b[3],m=parseInt(b[4],10),n=parseInt(b[5],10),o=parseInt(b[6],10),p=b[7];p=p?1e3*parseFloat(p):0;var q,r=h(a);return null!=r?(q=new Date(Date.UTC(e,k,l,m,n,o,p)),j(e)&&q.setUTCFullYear(e),0!==r&&q.setTime(q.getTime()-r)):(q=new Date(e,k,l,m,n,o,p),j(e)&&q.setFullYear(e)),q},"parseDate"),nP(g,"getDate"),nP(h,"timeZoneOffset"),nP(i,"bcYearToNegativeYear"),nP(j,"is0To99")}),od=nR((a,b)=>{n$(),b.exports=d;var c=Object.prototype.hasOwnProperty;function d(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)c.call(d,e)&&(a[e]=d[e])}return a}nP(d,"extend")}),oe=nR((a,b)=>{n$();var c=od();function d(a){if(!(this instanceof d))return new d(a);c(this,n(a))}b.exports=d,nP(d,"PostgresInterval");var e=["seconds","minutes","hours","days","months","years"];d.prototype.toPostgres=function(){var a=e.filter(this.hasOwnProperty,this);return this.milliseconds&&0>a.indexOf("seconds")&&a.push("seconds"),0===a.length?"0":a.map(function(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),b+" "+a},this).join(" ")};var f={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},g=["years","months","days"],h=["hours","minutes","seconds"];d.prototype.toISOString=d.prototype.toISO=function(){return"P"+g.map(a,this).join("")+"T"+h.map(a,this).join("");function a(a){var b=this[a]||0;return"seconds"===a&&this.milliseconds&&(b=(b+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),b+f[a]}};var i="([+-]?\\d+)",j=new RegExp([i+"\\s+years?",i+"\\s+mons?",i+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(a){return"("+a+")?"}).join("\\s*")),k={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=["hours","minutes","seconds","milliseconds"];function m(a){return parseInt(a+"000000".slice(a.length),10)/1e3}function n(a){if(!a)return{};var b=j.exec(a),c="-"===b[8];return Object.keys(k).reduce(function(a,d){var e=b[k[d]];return e&&(e="milliseconds"===d?m(e):parseInt(e,10))&&(c&&~l.indexOf(d)&&(e*=-1),a[d]=e),a},{})}nP(m,"parseMilliseconds"),nP(n,"parse")}),of=nR((a,b)=>{n$(),b.exports=nP(function(a){if(/^\\x/.test(a))return new nH(a.substr(2),"hex");for(var b="",c=0;c<a.length;)if("\\"!==a[c])b+=a[c],++c;else if(/[0-7]{3}/.test(a.substr(c+1,3)))b+=String.fromCharCode(parseInt(a.substr(c+1,3),8)),c+=4;else{for(var d=1;c+d<a.length&&"\\"===a[c+d];)d++;for(var e=0;e<Math.floor(d/2);++e)b+="\\";c+=2*Math.floor(d/2)}return new nH(b,"binary")},"parseBytea")}),og=nR((a,b)=>{n$();var c=oa(),d=ob(),e=oc(),f=oe(),g=of();function h(a){return nP(function(b){return null===b?b:a(b)},"nullAllowed")}function i(a){return null===a?a:"TRUE"===a||"t"===a||"true"===a||"y"===a||"yes"===a||"on"===a||"1"===a}function j(a){return a?c.parse(a,i):null}function k(a){return parseInt(a,10)}function l(a){return a?c.parse(a,h(k)):null}function m(a){return a?c.parse(a,h(function(a){return u(a).trim()})):null}nP(h,"allowNull"),nP(i,"parseBool"),nP(j,"parseBoolArray"),nP(k,"parseBaseTenInt"),nP(l,"parseIntegerArray"),nP(m,"parseBigIntegerArray");var n=nP(function(a){return a?d.create(a,function(a){return null!==a&&(a=w(a)),a}).parse():null},"parsePointArray"),o=nP(function(a){return a?d.create(a,function(a){return null!==a&&(a=parseFloat(a)),a}).parse():null},"parseFloatArray"),p=nP(function(a){return a?d.create(a).parse():null},"parseStringArray"),q=nP(function(a){return a?d.create(a,function(a){return null!==a&&(a=e(a)),a}).parse():null},"parseDateArray"),r=nP(function(a){return a?d.create(a,function(a){return null!==a&&(a=f(a)),a}).parse():null},"parseIntervalArray"),s=nP(function(a){return a?c.parse(a,h(g)):null},"parseByteAArray"),t=nP(function(a){return parseInt(a,10)},"parseInteger"),u=nP(function(a){var b=String(a);return/^\d+$/.test(b)?b:a},"parseBigInteger"),v=nP(function(a){return a?c.parse(a,h(JSON.parse)):null},"parseJsonArray"),w=nP(function(a){return"("!==a[0]?null:{x:parseFloat((a=a.substring(1,a.length-1).split(","))[0]),y:parseFloat(a[1])}},"parsePoint"),x=nP(function(a){if("<"!==a[0]&&"("!==a[1])return null;for(var b="(",c="",d=!1,e=2;e<a.length-1;e++){if(d||(b+=a[e]),")"===a[e]){d=!0;continue}d&&","!==a[e]&&(c+=a[e])}var f=w(b);return f.radius=parseFloat(c),f},"parseCircle");b.exports={init:nP(function(a){a(20,u),a(21,t),a(23,t),a(26,t),a(700,parseFloat),a(701,parseFloat),a(16,i),a(1082,e),a(1114,e),a(1184,e),a(600,w),a(651,p),a(718,x),a(1e3,j),a(1001,s),a(1005,l),a(1007,l),a(1028,l),a(1016,m),a(1017,n),a(1021,o),a(1022,o),a(1231,o),a(1014,p),a(1015,p),a(1008,p),a(1009,p),a(1040,p),a(1041,p),a(1115,q),a(1182,q),a(1185,q),a(1186,f),a(1187,r),a(17,g),a(114,JSON.parse.bind(JSON)),a(3802,JSON.parse.bind(JSON)),a(199,v),a(3807,v),a(3907,p),a(2951,p),a(791,p),a(1183,p),a(1270,p)},"init")}}),oh=nR((a,b)=>{function c(a){var b=a.readInt32BE(0),c=a.readUInt32BE(4),d="";b<0&&(b=~b+(0===c),c=~c+1>>>0,d="-");var e,f,g,h,i,j,k="";if(e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";if(k=h+g+k,e=b%1e6,b=b/1e6>>>0,c=(f=0x100000000*e+c)/1e6>>>0,g=""+(f-1e6*c),0===c&&0===b)return d+g+k;for(h="",i=6-g.length,j=0;j<i;j++)h+="0";return k=h+g+k,d+(g=""+(f=0x100000000*(e=b%1e6)+c)%1e6)+k}n$(),nP(c,"readInt8"),b.exports=c}),oi=nR((a,b)=>{n$();var c=oh(),d=nP(function(a,b,c,d,e){c=c||0,d=d||!1,e=e||function(a,b,c){return a*Math.pow(2,c)+b};var f=c>>3,g=nP(function(a){return d?255&~a:a},"inv"),h=255,i=8-c%8;b<i&&(h=255<<8-b&255,i=b),c&&(h>>=c%8);var j=0;c%8+b>=8&&(j=e(0,g(a[f])&h,i));for(var k=b+c>>3,l=f+1;l<k;l++)j=e(j,g(a[l]),8);var m=(b+c)%8;return m>0&&(j=e(j,g(a[k])>>8-m,m)),j},"parseBits"),e=nP(function(a,b,c){var e=Math.pow(2,c-1)-1,f=d(a,1),g=d(a,c,1);if(0===g)return 0;var h=1,i=d(a,b,c+1,!1,nP(function(a,b,c){0===a&&(a=1);for(var d=1;d<=c;d++)h/=2,(b&1<<c-d)>0&&(a+=h);return a},"parsePrecisionBits"));return g==Math.pow(2,c+1)-1?0===i?0===f?1/0:-1/0:NaN:(0===f?1:-1)*Math.pow(2,g-e)*i},"parseFloatFromBits"),f=nP(function(a){return 1==d(a,1)?-1*(d(a,15,1,!0)+1):d(a,15,1)},"parseInt16"),g=nP(function(a){return 1==d(a,1)?-1*(d(a,31,1,!0)+1):d(a,31,1)},"parseInt32"),h=nP(function(a){return e(a,23,8)},"parseFloat32"),i=nP(function(a){return e(a,52,11)},"parseFloat64"),j=nP(function(a){var b=d(a,16,32);if(49152==b)return NaN;for(var c=Math.pow(1e4,d(a,16,16)),e=0,f=d(a,16),g=0;g<f;g++)e+=d(a,16,64+16*g)*c,c/=1e4;var h=Math.pow(10,d(a,16,48));return(0===b?1:-1)*Math.round(e*h)/h},"parseNumeric"),k=nP(function(a,b){var c=d(b,1),e=d(b,63,1),f=new Date((0===c?1:-1)*e/1e3+9466848e5);return a||f.setTime(f.getTime()+6e4*f.getTimezoneOffset()),f.usec=e%1e3,f.getMicroSeconds=function(){return this.usec},f.setMicroSeconds=function(a){this.usec=a},f.getUTCMicroSeconds=function(){return this.usec},f},"parseDate"),l=nP(function(a){for(var b=d(a,32),c=(d(a,32,32),d(a,32,64)),e=96,f=[],g=0;g<b;g++)f[g]=d(a,32,e),e+=64;var h=nP(function(b){var c,f=d(a,32,e);return(e+=32,0xffffffff==f)?null:23==b||20==b?(c=d(a,8*f,e),e+=8*f,c):25==b?a.toString(this.encoding,e>>3,(e+=f<<3)>>3):void console.log("ERROR: ElementType not implemented: "+b)},"parseElement"),i=nP(function(a,b){var c,d=[];if(a.length>1){var e=a.shift();for(c=0;c<e;c++)d[c]=i(a,b);a.unshift(e)}else for(c=0;c<a[0];c++)d[c]=h(b);return d},"parse");return i(f,c)},"parseArray"),m=nP(function(a){return a.toString("utf8")},"parseText"),n=nP(function(a){return null===a?null:d(a,8)>0},"parseBool");b.exports={init:nP(function(a){a(20,c),a(21,f),a(23,g),a(26,g),a(1700,j),a(700,h),a(701,i),a(16,n),a(1114,k.bind(null,!1)),a(1184,k.bind(null,!0)),a(1e3,l),a(1007,l),a(1016,l),a(1008,l),a(1009,l),a(25,m)},"init")}}),oj=nR((a,b)=>{n$(),b.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),ok=nR(a=>{n$();var b=og(),c=oi(),d=ob(),e=oj();a.getTypeParser=h,a.setTypeParser=i,a.arrayParser=d,a.builtins=e;var f={text:{},binary:{}};function g(a){return String(a)}function h(a,b){return f[b=b||"text"]&&f[b][a]||g}function i(a,b,c){"function"==typeof b&&(c=b,b="text"),f[b][a]=c}nP(g,"noParse"),nP(h,"getTypeParser"),nP(i,"setTypeParser"),b.init(function(a,b){f.text[a]=b}),c.init(function(a,b){f.binary[a]=b})}),ol=nR((a,b)=>{n$();var c=ok();function d(a){this._types=a||c,this.text={},this.binary={}}nP(d,"TypeOverrides"),d.prototype.getOverrides=function(a){switch(a){case"text":return this.text;case"binary":return this.binary;default:return{}}},d.prototype.setTypeParser=function(a,b,c){"function"==typeof b&&(c=b,b="text"),this.getOverrides(b)[a]=c},d.prototype.getTypeParser=function(a,b){return b=b||"text",this.getOverrides(b)[a]||this._types.getTypeParser(a,b)},b.exports=d});function om(a){let b=0x6a09e667,c=0xbb67ae85,d=0x3c6ef372,e=0xa54ff53a,f=0x510e527f,g=0x9b05688c,h=0x1f83d9ab,i=0x5be0cd19,j=0,k=0,l=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],m=nP((a,b)=>a>>>b|a<<32-b,"rrot"),n=new Uint32Array(64),o=new Uint8Array(64),p=nP(()=>{for(let a=0,b=0;a<16;a++,b+=4)n[a]=o[b]<<24|o[b+1]<<16|o[b+2]<<8|o[b+3];for(let a=16;a<64;a++){let b=m(n[a-15],7)^m(n[a-15],18)^n[a-15]>>>3,c=m(n[a-2],17)^m(n[a-2],19)^n[a-2]>>>10;n[a]=n[a-16]+b+n[a-7]+c|0}let a=b,j=c,p=d,q=e,r=f,s=g,t=h,u=i;for(let b=0;b<64;b++){let c=u+(m(r,6)^m(r,11)^m(r,25))+(r&s^~r&t)+l[b]+n[b]|0,d=(m(a,2)^m(a,13)^m(a,22))+(a&j^a&p^j&p)|0;u=t,t=s,s=r,r=q+c|0,q=p,p=j,j=a,a=c+d|0}b=b+a|0,c=c+j|0,d=d+p|0,e=e+q|0,f=f+r|0,g=g+s|0,h=h+t|0,i=i+u|0,k=0},"process"),q=nP(a=>{"string"==typeof a&&(a=new TextEncoder().encode(a));for(let b=0;b<a.length;b++)o[k++]=a[b],64===k&&p();j+=a.length},"add"),r=nP(()=>{if(o[k++]=128,64==k&&p(),k+8>64){for(;k<64;)o[k++]=0;p()}for(;k<58;)o[k++]=0;let a=8*j;o[k++]=a/0x10000000000&255,o[k++]=a/0x100000000&255,o[k++]=a>>>24,o[k++]=a>>>16&255,o[k++]=a>>>8&255,o[k++]=255&a,p();let l=new Uint8Array(32);return l[0]=b>>>24,l[1]=b>>>16&255,l[2]=b>>>8&255,l[3]=255&b,l[4]=c>>>24,l[5]=c>>>16&255,l[6]=c>>>8&255,l[7]=255&c,l[8]=d>>>24,l[9]=d>>>16&255,l[10]=d>>>8&255,l[11]=255&d,l[12]=e>>>24,l[13]=e>>>16&255,l[14]=e>>>8&255,l[15]=255&e,l[16]=f>>>24,l[17]=f>>>16&255,l[18]=f>>>8&255,l[19]=255&f,l[20]=g>>>24,l[21]=g>>>16&255,l[22]=g>>>8&255,l[23]=255&g,l[24]=h>>>24,l[25]=h>>>16&255,l[26]=h>>>8&255,l[27]=255&h,l[28]=i>>>24,l[29]=i>>>16&255,l[30]=i>>>8&255,l[31]=255&i,l},"digest");return void 0===a?{add:q,digest:r}:(q(a),r())}var on,oo,op=nQ(()=>{n$(),nP(om,"sha256")}),oq=nQ(()=>{n$(),nP(on=class a{constructor(){nW(this,"_dataLength",0),nW(this,"_bufferLength",0),nW(this,"_state",new Int32Array(4)),nW(this,"_buffer",new ArrayBuffer(68)),nW(this,"_buffer8"),nW(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(a,b=!1){return this.onePassHasher.start().appendByteArray(a).end(b)}static hashStr(a,b=!1){return this.onePassHasher.start().appendStr(a).end(b)}static hashAsciiStr(a,b=!1){return this.onePassHasher.start().appendAsciiStr(a).end(b)}static _hex(b){let c=a.hexChars,d=a.hexOut,e,f,g,h;for(h=0;h<4;h+=1)for(f=8*h,e=b[h],g=0;g<8;g+=2)d[f+1+g]=c.charAt(15&e),e>>>=4,d[f+0+g]=c.charAt(15&e),e>>>=4;return d.join("")}static _md5cycle(a,b){let c=a[0],d=a[1],e=a[2],f=a[3];c+=(d&e|~d&f)+b[0]-0x28955b88|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[1]-0x173848aa|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[2]+0x242070db|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[3]-0x3e423112|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[4]-0xa83f051|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[5]+0x4787c62a|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[6]-0x57cfb9ed|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[7]-0x2b96aff|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[8]+0x698098d8|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[9]-0x74bb0851|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[10]-42063|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[11]-0x76a32842|0,c+=((d=(d<<22|d>>>10)+e|0)&e|~d&f)+b[12]+0x6b901122|0,f+=((c=(c<<7|c>>>25)+d|0)&d|~c&e)+b[13]-0x2678e6d|0,e+=((f=(f<<12|f>>>20)+c|0)&c|~f&d)+b[14]-0x5986bc72|0,d+=((e=(e<<17|e>>>15)+f|0)&f|~e&c)+b[15]+0x49b40821|0,c+=((d=(d<<22|d>>>10)+e|0)&f|e&~f)+b[1]-0x9e1da9e|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[6]-0x3fbf4cc0|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[11]+0x265e5a51|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[0]-0x16493856|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[5]-0x29d0efa3|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[10]+0x2441453|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[15]-0x275e197f|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[4]-0x182c0438|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[9]+0x21e1cde6|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[14]-0x3cc8f82a|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[3]-0xb2af279|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[8]+0x455a14ed|0,c+=((d=(d<<20|d>>>12)+e|0)&f|e&~f)+b[13]-0x561c16fb|0,f+=((c=(c<<5|c>>>27)+d|0)&e|d&~e)+b[2]-0x3105c08|0,e+=((f=(f<<9|f>>>23)+c|0)&d|c&~d)+b[7]+0x676f02d9|0,d+=((e=(e<<14|e>>>18)+f|0)&c|f&~c)+b[12]-0x72d5b376|0,c+=((d=(d<<20|d>>>12)+e|0)^e^f)+b[5]-378558|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[8]-0x788e097f|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[11]+0x6d9d6122|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[14]-0x21ac7f4|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[1]-0x5b4115bc|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[4]+0x4bdecfa9|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[7]-0x944b4a0|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[10]-0x41404390|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[13]+0x289b7ec6|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[0]-0x155ed806|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[3]-0x2b10cf7b|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[6]+0x4881d05|0,c+=((d=(d<<23|d>>>9)+e|0)^e^f)+b[9]-0x262b2fc7|0,f+=((c=(c<<4|c>>>28)+d|0)^d^e)+b[12]-0x1924661b|0,e+=((f=(f<<11|f>>>21)+c|0)^c^d)+b[15]+0x1fa27cf8|0,d+=((e=(e<<16|e>>>16)+f|0)^f^c)+b[2]-0x3b53a99b|0,d=(d<<23|d>>>9)+e|0,c+=(e^(d|~f))+b[0]-0xbd6ddbc|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[7]+0x432aff97|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[14]-0x546bdc59|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[5]-0x36c5fc7|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[12]+0x655b59c3|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[3]-0x70f3336e|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[10]-1051523|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[1]-0x7a7ba22f|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[8]+0x6fa87e4f|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[15]-0x1d31920|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[6]-0x5cfebcec|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[13]+0x4e0811a1|0,d=(d<<21|d>>>11)+e|0,c+=(e^(d|~f))+b[4]-0x8ac817e|0,c=(c<<6|c>>>26)+d|0,f+=(d^(c|~e))+b[11]-0x42c50dcb|0,f=(f<<10|f>>>22)+c|0,e+=(c^(f|~d))+b[2]+0x2ad7d2bb|0,e=(e<<15|e>>>17)+f|0,d+=(f^(e|~c))+b[9]-0x14792c6f|0,d=(d<<21|d>>>11)+e|0,a[0]=c+a[0]|0,a[1]=d+a[1]|0,a[2]=e+a[2]|0,a[3]=f+a[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(a.stateIdentity),this}appendStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g;for(g=0;g<b.length;g+=1){if((f=b.charCodeAt(g))<128)c[e++]=f;else if(f<2048)c[e++]=(f>>>6)+192,c[e++]=63&f|128;else if(f<55296||f>56319)c[e++]=(f>>>12)+224,c[e++]=f>>>6&63|128,c[e++]=63&f|128;else{if((f=(f-55296)*1024+(b.charCodeAt(++g)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");c[e++]=(f>>>18)+240,c[e++]=f>>>12&63|128,c[e++]=f>>>6&63|128,c[e++]=63&f|128}e>=64&&(this._dataLength+=64,a._md5cycle(this._state,d),e-=64,d[0]=d[16])}return this._bufferLength=e,this}appendAsciiStr(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b.charCodeAt(g++);if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}appendByteArray(b){let c=this._buffer8,d=this._buffer32,e=this._bufferLength,f,g=0;for(;;){for(f=Math.min(b.length-g,64-e);f--;)c[e++]=b[g++];if(e<64)break;this._dataLength+=64,a._md5cycle(this._state,d),e=0}return this._bufferLength=e,this}getState(){let a=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[a[0],a[1],a[2],a[3]]}}setState(a){let b=a.buffer,c=a.state,d=this._state,e;for(this._dataLength=a.length,this._bufferLength=a.buflen,d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],e=0;e<b.length;e+=1)this._buffer8[e]=b.charCodeAt(e)}end(b=!1){let c=this._bufferLength,d=this._buffer8,e=this._buffer32,f=(c>>2)+1;this._dataLength+=c;let g=8*this._dataLength;if(d[c]=128,d[c+1]=d[c+2]=d[c+3]=0,e.set(a.buffer32Identity.subarray(f),f),c>55&&(a._md5cycle(this._state,e),e.set(a.buffer32Identity)),g<=0xffffffff)e[14]=g;else{let a=g.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;let b=parseInt(a[2],16),c=parseInt(a[1],16)||0;e[14]=b,e[15]=c}return a._md5cycle(this._state,e),b?this._state:a._hex(this._state)}},"Md5"),nW(on,"stateIdentity",new Int32Array([0x67452301,-0x10325477,-0x67452302,0x10325476])),nW(on,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),nW(on,"hexChars","0123456789abcdef"),nW(on,"hexOut",[]),nW(on,"onePassHasher",new on),oo=on}),or={};function os(a){return crypto.getRandomValues(nH.alloc(a))}function ot(a){if("sha256"===a)return{update:nP(function(a){return{digest:nP(function(){return nH.from(om(a))},"digest")}},"update")};if("md5"===a)return{update:nP(function(a){return{digest:nP(function(){return"string"==typeof a?oo.hashStr(a):oo.hashByteArray(a)},"digest")}},"update")};throw Error(`Hash type '${a}' not supported`)}function ou(a,b){if("sha256"!==a)throw Error(`\
Only sha256 is supported (requested: '${a}')`);return{update:nP(function(a){return{digest:nP(function(){"string"==typeof b&&(b=new TextEncoder().encode(b)),"string"==typeof a&&(a=new TextEncoder().encode(a));let c=b.length;if(c>64)b=om(b);else if(c<64){let a=new Uint8Array(64);a.set(b),b=a}let d=new Uint8Array(64),e=new Uint8Array(64);for(let a=0;a<64;a++)d[a]=54^b[a],e[a]=92^b[a];let f=new Uint8Array(a.length+64);f.set(d,0),f.set(a,64);let g=new Uint8Array(96);return g.set(e,0),g.set(om(f),64),nH.from(om(g))},"digest")}},"update")}}nS(or,{createHash:()=>ot,createHmac:()=>ou,randomBytes:()=>os});var ov=nQ(()=>{n$(),op(),oq(),nP(os,"randomBytes"),nP(ot,"createHash"),nP(ou,"createHmac")}),ow=nR((a,b)=>{n$(),b.exports={host:"localhost",user:"win32"===nI.platform?nI.env.USERNAME:nI.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var c=ok(),d=c.getTypeParser(20,"text"),e=c.getTypeParser(1016,"text");b.exports.__defineSetter__("parseInt8",function(a){c.setTypeParser(20,"text",a?c.getTypeParser(23,"text"):d),c.setTypeParser(1016,"text",a?c.getTypeParser(1007,"text"):e)})}),ox=nR((a,b)=>{n$();var c=(ov(),nV(or)),d=ow();function e(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function f(a){for(var b="{",c=0;c<a.length;c++)c>0&&(b+=","),null===a[c]||typeof a[c]>"u"?b+="NULL":Array.isArray(a[c])?b+=f(a[c]):a[c]instanceof nH?b+="\\\\x"+a[c].toString("hex"):b+=e(g(a[c]));return b+"}"}nP(e,"escapeElement"),nP(f,"arrayString");var g=nP(function(a,b){if(null==a)return null;if(a instanceof nH)return a;if(ArrayBuffer.isView(a)){var c=nH.from(a.buffer,a.byteOffset,a.byteLength);return c.length===a.byteLength?c:c.slice(a.byteOffset,a.byteOffset+a.byteLength)}return a instanceof Date?d.parseInputDatesAsUTC?k(a):j(a):Array.isArray(a)?f(a):"object"==typeof a?h(a,b):a.toString()},"prepareValue");function h(a,b){if(a&&"function"==typeof a.toPostgres){if(-1!==(b=b||[]).indexOf(a))throw Error('circular reference detected while preparing "'+a+'" for query');return b.push(a),g(a.toPostgres(g),b)}return JSON.stringify(a)}function i(a,b){for(a=""+a;a.length<b;)a="0"+a;return a}function j(a){var b=-a.getTimezoneOffset(),c=a.getFullYear(),d=c<1;d&&(c=Math.abs(c)+1);var e=i(c,4)+"-"+i(a.getMonth()+1,2)+"-"+i(a.getDate(),2)+"T"+i(a.getHours(),2)+":"+i(a.getMinutes(),2)+":"+i(a.getSeconds(),2)+"."+i(a.getMilliseconds(),3);return b<0?(e+="-",b*=-1):e+="+",e+=i(Math.floor(b/60),2)+":"+i(b%60,2),d&&(e+=" BC"),e}function k(a){var b=a.getUTCFullYear(),c=b<1;c&&(b=Math.abs(b)+1);var d=i(b,4)+"-"+i(a.getUTCMonth()+1,2)+"-"+i(a.getUTCDate(),2)+"T"+i(a.getUTCHours(),2)+":"+i(a.getUTCMinutes(),2)+":"+i(a.getUTCSeconds(),2)+"."+i(a.getUTCMilliseconds(),3);return d+="+00:00",c&&(d+=" BC"),d}function l(a,b,c){return a="string"==typeof a?{text:a}:a,b&&("function"==typeof b?a.callback=b:a.values=b),c&&(a.callback=c),a}nP(h,"prepareObject"),nP(i,"pad"),nP(j,"dateToString"),nP(k,"dateToStringUTC"),nP(l,"normalizeQueryConfig");var m=nP(function(a){return c.createHash("md5").update(a,"utf-8").digest("hex")},"md5"),n=nP(function(a,b,c){var d=m(b+a);return"md5"+m(nH.concat([nH.from(d),c]))},"postgresMd5PasswordHash");b.exports={prepareValue:nP(function(a){return g(a)},"prepareValueWrapper"),normalizeQueryConfig:l,postgresMd5PasswordHash:n,md5:m}}),oy={};nS(oy,{default:()=>oz});var oz,oA=nQ(()=>{n$(),oz={}}),oB=nR((a,b)=>{n$();var c=(ov(),nV(or));function d(a){if(-1===a.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let b=c.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:b,response:"n,,n=*,r="+b,message:"SASLInitialResponse"}}function e(a,b,c){if("SASLInitialResponse"!==a.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof c)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let d=j(c);if(d.nonce.startsWith(a.clientNonce)){if(d.nonce.length===a.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var e=o(b,nH.from(d.salt,"base64"),d.iteration),f=n(e,"Client Key"),g=m(f),h="n=*,r="+a.clientNonce,i="r="+d.nonce+",s="+d.salt+",i="+d.iteration,k="c=biws,r="+d.nonce,p=h+","+i+","+k,q=l(f,n(g,p)).toString("base64"),r=n(e,"Server Key"),s=n(r,p);a.message="SASLResponse",a.serverSignature=s.toString("base64"),a.response=k+",p="+q}function f(a,b){if("SASLResponse"!==a.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof b)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:c}=k(b);if(c!==a.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function g(a){if("string"!=typeof a)throw TypeError("SASL: text must be a string");return a.split("").map((b,c)=>a.charCodeAt(c)).every(a=>a>=33&&a<=43||a>=45&&a<=126)}function h(a){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a)}function i(a){if("string"!=typeof a)throw TypeError("SASL: attribute pairs text must be a string");return new Map(a.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]}))}function j(a){let b=i(a),c=b.get("r");if(c){if(!g(c))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let d=b.get("s");if(d){if(!h(d))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let e=b.get("i");if(e){if(!/^[1-9][0-9]*$/.test(e))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:c,salt:d,iteration:parseInt(e,10)}}function k(a){let b=i(a).get("v");if(b){if(!h(b))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:b}}function l(a,b){if(!nH.isBuffer(a))throw TypeError("first argument must be a Buffer");if(!nH.isBuffer(b))throw TypeError("second argument must be a Buffer");if(a.length!==b.length)throw Error("Buffer lengths must match");if(0===a.length)throw Error("Buffers cannot be empty");return nH.from(a.map((c,d)=>a[d]^b[d]))}function m(a){return c.createHash("sha256").update(a).digest()}function n(a,b){return c.createHmac("sha256",a).update(b).digest()}function o(a,b,c){for(var d=n(a,nH.concat([b,nH.from([0,0,0,1])])),e=d,f=0;f<c-1;f++)e=l(e,d=n(a,d));return e}nP(d,"startSession"),nP(e,"continueSession"),nP(f,"finalizeSession"),nP(g,"isPrintableChars"),nP(h,"isBase64"),nP(i,"parseAttributePairs"),nP(j,"parseServerFirstMessage"),nP(k,"parseServerFinalMessage"),nP(l,"xorBuffers"),nP(m,"sha256"),nP(n,"hmacSha256"),nP(o,"Hi"),b.exports={startSession:d,continueSession:e,finalizeSession:f}}),oC={};function oD(...a){return a.join("/")}nS(oC,{join:()=>oD});var oE=nQ(()=>{n$(),nP(oD,"join")}),oF={};function oG(a,b){b(Error("No filesystem"))}nS(oF,{stat:()=>oG});var oH=nQ(()=>{n$(),nP(oG,"stat")}),oI={};nS(oI,{default:()=>oJ});var oJ,oK=nQ(()=>{n$(),oJ={}}),oL={};nS(oL,{StringDecoder:()=>oN});var oM,oN,oO=nQ(()=>{n$(),nP(oM=class{constructor(a){nW(this,"td"),this.td=new TextDecoder(a)}write(a){return this.td.decode(a,{stream:!0})}end(a){return this.td.decode(a)}},"StringDecoder"),oN=oM}),oP=nR((a,b)=>{n$();var{Transform:c}=(oK(),nV(oI)),{StringDecoder:d}=(oO(),nV(oL)),e=Symbol("last"),f=Symbol("decoder");function g(a,b,c){let d;if(this.overflow){if(1===(d=this[f].write(a).split(this.matcher)).length)return c();d.shift(),this.overflow=!1}else this[e]+=this[f].write(a),d=this[e].split(this.matcher);this[e]=d.pop();for(let a=0;a<d.length;a++)try{i(this,this.mapper(d[a]))}catch(a){return c(a)}(this.overflow=this[e].length>this.maxLength,this.overflow&&!this.skipOverflow)?c(Error("maximum buffer reached")):c()}function h(a){if(this[e]+=this[f].end(),this[e])try{i(this,this.mapper(this[e]))}catch(b){return a(b)}a()}function i(a,b){void 0!==b&&a.push(b)}function j(a){return a}function k(a,b,i){switch(a=a||/\r?\n/,b=b||j,i=i||{},arguments.length){case 1:"function"==typeof a?(b=a,a=/\r?\n/):"object"!=typeof a||a instanceof RegExp||a[Symbol.split]||(i=a,a=/\r?\n/);break;case 2:"function"==typeof a?(i=b,b=a,a=/\r?\n/):"object"==typeof b&&(i=b,b=j)}(i=Object.assign({},i)).autoDestroy=!0,i.transform=g,i.flush=h,i.readableObjectMode=!0;let k=new c(i);return k[e]="",k[f]=new d("utf8"),k.matcher=a,k.mapper=b,k.maxLength=i.maxLength,k.skipOverflow=i.skipOverflow||!1,k.overflow=!1,k._destroy=function(a,b){this._writableState.errorEmitted=!1,b(a)},k}nP(g,"transform"),nP(h,"flush"),nP(i,"push"),nP(j,"noop"),nP(k,"split"),b.exports=k}),oQ=nR((a,b)=>{n$();var c=(oE(),nV(oC)),d=(oK(),nV(oI)).Stream,e=oP(),f=(oA(),nV(oy)),g="win32"===nI.platform,h=nI.stderr;function i(a){return(61440&a)==32768}nP(i,"isRegFile");var j=["host","port","database","user","password"],k=j.length,l=j[k-1];function m(){if(h instanceof d&&!0===h.writable){var a=Array.prototype.slice.call(arguments).concat(`
`);h.write(f.format.apply(f,a))}}nP(m,"warn"),Object.defineProperty(b.exports,"isWin",{get:nP(function(){return g},"get"),set:nP(function(a){g=a},"set")}),b.exports.warnTo=function(a){var b=h;return h=a,b},b.exports.getFileName=function(a){var b=a||nI.env;return b.PGPASSFILE||(g?c.join(b.APPDATA||"./","postgresql","pgpass.conf"):c.join(b.HOME||"./",".pgpass"))},b.exports.usePgPass=function(a,b){return!Object.prototype.hasOwnProperty.call(nI.env,"PGPASSWORD")&&(!!g||(b=b||"<unkn>",i(a.mode)?!(63&a.mode)||(m('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',b),!1):(m('WARNING: password file "%s" is not a plain file',b),!1)))};var n=b.exports.match=function(a,b){return j.slice(0,-1).reduce(function(c,d,e){return 1==e&&Number(a[d]||5432)===Number(b[d])?c&&!0:c&&("*"===b[d]||b[d]===a[d])},!0)};b.exports.getPassword=function(a,b,c){var d,f=b.pipe(e());function g(b){var c=o(b);c&&p(c)&&n(a,c)&&(d=c[l],f.end())}nP(g,"onLine");var h=nP(function(){b.destroy(),c(d)},"onEnd"),i=nP(function(a){b.destroy(),m("WARNING: error on reading file: %s",a),c(void 0)},"onErr");b.on("error",i),f.on("data",g).on("end",h).on("error",i)};var o=b.exports.parseLine=function(a){if(a.length<11||a.match(/^\s+#/))return null;for(var b="",c="",d=0,e=0,f={},g=nP(function(b,c,d){var e=a.substring(c,d);Object.hasOwnProperty.call(nI.env,"PGPASS_NO_DEESCAPE")||(e=e.replace(/\\([:\\])/g,"$1")),f[j[b]]=e},"addToObj"),h=0;h<a.length-1;h+=1){if(b=a.charAt(h+1),c=a.charAt(h),d==k-1){g(d,e);break}h>=0&&":"==b&&"\\"!==c&&(g(d,e,h+1),e=h+2,d+=1)}return f=Object.keys(f).length===k?f:null},p=b.exports.isValidEntry=function(a){for(var b={0:function(a){return a.length>0},1:function(a){return"*"===a||isFinite(a=Number(a))&&a>0&&a<0x20000000000000&&Math.floor(a)===a},2:function(a){return a.length>0},3:function(a){return a.length>0},4:function(a){return a.length>0}},c=0;c<j.length;c+=1)if(!(0,b[c])(a[j[c]]||""))return!1;return!0}}),oR=nR((a,b)=>{n$(),oE(),nV(oC);var c=(oH(),nV(oF)),d=oQ();b.exports=function(a,b){var e=d.getFileName();c.stat(e,function(f,g){if(f||!d.usePgPass(g,e))return b(void 0);var h=c.createReadStream(e);d.getPassword(a,h,b)})},b.exports.warnTo=d.warnTo}),oS={};nS(oS,{default:()=>oT});var oT,oU=nQ(()=>{n$(),oT={}}),oV=nR((a,b)=>{n$();var c=(n9(),nV(n7)),d=(oH(),nV(oF));function e(a){if("/"===a.charAt(0)){var b=a.split(" ");return{host:b[0],database:b[1]}}var e=c.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(a)?encodeURI(a).replace(/\%25(\d\d)/g,"%$1"):a,!0),b=e.query;for(var f in b)Array.isArray(b[f])&&(b[f]=b[f][b[f].length-1]);var g=(e.auth||":").split(":");if(b.user=g[0],b.password=g.splice(1).join(":"),b.port=e.port,"socket:"==e.protocol)return b.host=decodeURI(e.pathname),b.database=e.query.db,b.client_encoding=e.query.encoding,b;b.host||(b.host=e.hostname);var h=e.pathname;if(!b.host&&h&&/^%2f/i.test(h)){var i=h.split("/");b.host=decodeURIComponent(i[0]),h=i.splice(1).join("/")}switch(h&&"/"===h.charAt(0)&&(h=h.slice(1)||null),b.database=h&&decodeURI(h),("true"===b.ssl||"1"===b.ssl)&&(b.ssl=!0),"0"===b.ssl&&(b.ssl=!1),(b.sslcert||b.sslkey||b.sslrootcert||b.sslmode)&&(b.ssl={}),b.sslcert&&(b.ssl.cert=d.readFileSync(b.sslcert).toString()),b.sslkey&&(b.ssl.key=d.readFileSync(b.sslkey).toString()),b.sslrootcert&&(b.ssl.ca=d.readFileSync(b.sslrootcert).toString()),b.sslmode){case"disable":b.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":b.ssl.rejectUnauthorized=!1}return b}nP(e,"parse"),b.exports=e,e.parse=e}),oW=nR((a,b)=>{n$();var c=(oU(),nV(oS)),d=ow(),e=oV().parse,f=nP(function(a,b,c){return void 0===c?c=nI.env["PG"+a.toUpperCase()]:!1===c||(c=nI.env[c]),b[a]||c||d[a]},"val"),g=nP(function(){switch(nI.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return d.ssl},"readSSLConfigFromEnvironment"),h=nP(function(a){return"'"+(""+a).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),i=nP(function(a,b,c){var d=b[c];null!=d&&a.push(c+"="+h(d))},"add"),j=class{constructor(a){(a="string"==typeof a?e(a):a||{}).connectionString&&(a=Object.assign({},a,e(a.connectionString))),this.user=f("user",a),this.database=f("database",a),void 0===this.database&&(this.database=this.user),this.port=parseInt(f("port",a),10),this.host=f("host",a),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f("password",a)}),this.binary=f("binary",a),this.options=f("options",a),this.ssl=typeof a.ssl>"u"?g():a.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=f("client_encoding",a),this.replication=f("replication",a),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=f("application_name",a,"PGAPPNAME"),this.fallback_application_name=f("fallback_application_name",a,!1),this.statement_timeout=f("statement_timeout",a,!1),this.lock_timeout=f("lock_timeout",a,!1),this.idle_in_transaction_session_timeout=f("idle_in_transaction_session_timeout",a,!1),this.query_timeout=f("query_timeout",a,!1),void 0===a.connectionTimeoutMillis?this.connect_timeout=nI.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(a.connectionTimeoutMillis/1e3),!1===a.keepAlive?this.keepalives=0:!0===a.keepAlive&&(this.keepalives=1),"number"==typeof a.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(a.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(a){var b=[];i(b,this,"user"),i(b,this,"password"),i(b,this,"port"),i(b,this,"application_name"),i(b,this,"fallback_application_name"),i(b,this,"connect_timeout"),i(b,this,"options");var d="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(i(b,d,"sslmode"),i(b,d,"sslca"),i(b,d,"sslkey"),i(b,d,"sslcert"),i(b,d,"sslrootcert"),this.database&&b.push("dbname="+h(this.database)),this.replication&&b.push("replication="+h(this.replication)),this.host&&b.push("host="+h(this.host)),this.isDomainSocket)return a(null,b.join(" "));this.client_encoding&&b.push("client_encoding="+h(this.client_encoding)),c.lookup(this.host,function(c,d){return c?a(c,null):(b.push("hostaddr="+h(d)),a(null,b.join(" ")))})}};nP(j,"ConnectionParameters"),b.exports=j}),oX=nR((a,b)=>{n$();var c=ok(),d=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,e=class{constructor(a,b){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=b,this.RowCtor=null,this.rowAsArray="array"===a,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var b;(b=a.text?d.exec(a.text):d.exec(a.command))&&(this.command=b[1],b[3]?(this.oid=parseInt(b[2],10),this.rowCount=parseInt(b[3],10)):b[2]&&(this.rowCount=parseInt(b[2],10)))}_parseRowAsArray(a){for(var b=Array(a.length),c=0,d=a.length;c<d;c++){var e=a[c];null!==e?b[c]=this._parsers[c](e):b[c]=null}return b}parseRow(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c],f=this.fields[c].name;null!==e?b[f]=this._parsers[c](e):b[f]=null}return b}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=Array(a.length));for(var b=0;b<a.length;b++){var d=a[b];this._types?this._parsers[b]=this._types.getTypeParser(d.dataTypeID,d.format||"text"):this._parsers[b]=c.getTypeParser(d.dataTypeID,d.format||"text")}}};nP(e,"Result"),b.exports=e}),oY=nR((a,b)=>{n$();var{EventEmitter:c}=n_(),d=oX(),e=ox(),f=class extends c{constructor(a,b,c){super(),a=e.normalizeQueryConfig(a,b,c),this.text=a.text,this.values=a.values,this.rows=a.rows,this.types=a.types,this.name=a.name,this.binary=a.binary,this.portal=a.portal||"",this.callback=a.callback,this._rowMode=a.rowMode,nI.domain&&a.callback&&(this.callback=nI.domain.bind(a.callback)),this._result=new d(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new d(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(a){this._checkForMultirow(),this._result.addFields(a.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(a){let b;if(!this._canceledDueToError){try{b=this._result.parseRow(a.fields)}catch(a){this._canceledDueToError=a;return}this.emit("row",b,this._result),this._accumulateRows&&this._result.addRow(b)}}handleCommandComplete(a,b){this._checkForMultirow(),this._result.addCommandComplete(a),this.rows&&b.sync()}handleEmptyQuery(a){this.rows&&a.sync()}handleError(a,b){if(this._canceledDueToError&&(a=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(a);this.emit("error",a)}handleReadyForQuery(a){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,a);if(this.callback)try{this.callback(null,this._results)}catch(a){nI.nextTick(()=>{throw a})}this.emit("end",this._results)}submit(a){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let b=a.parsedStatements[this.name];return this.text&&b&&this.text!==b?Error(`Prepared statements must be unique - '${this.name}\
' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(a):a.query(this.text),null)}hasBeenParsed(a){return this.name&&a.parsedStatements[this.name]}handlePortalSuspended(a){this._getRows(a,this.rows)}_getRows(a,b){a.execute({portal:this.portal,rows:b}),b?a.flush():a.sync()}prepare(a){this.isPreparedStatement=!0,this.hasBeenParsed(a)||a.parse({text:this.text,name:this.name,types:this.types});try{a.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:e.prepareValue})}catch(b){this.handleError(b,a);return}a.describe({type:"P",name:this.portal||""}),this._getRows(a,this.rows)}handleCopyInResponse(a){a.sendCopyFail("No source stream defined")}handleCopyData(a,b){}};nP(f,"Query"),b.exports=f}),oZ=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.NoticeMessage=a.DataRowMessage=a.CommandCompleteMessage=a.ReadyForQueryMessage=a.NotificationResponseMessage=a.BackendKeyDataMessage=a.AuthenticationMD5Password=a.ParameterStatusMessage=a.ParameterDescriptionMessage=a.RowDescriptionMessage=a.Field=a.CopyResponse=a.CopyDataMessage=a.DatabaseError=a.copyDone=a.emptyQuery=a.replicationStart=a.portalSuspended=a.noData=a.closeComplete=a.bindComplete=a.parseComplete=void 0,a.parseComplete={name:"parseComplete",length:5},a.bindComplete={name:"bindComplete",length:5},a.closeComplete={name:"closeComplete",length:5},a.noData={name:"noData",length:5},a.portalSuspended={name:"portalSuspended",length:5},a.replicationStart={name:"replicationStart",length:4},a.emptyQuery={name:"emptyQuery",length:4},a.copyDone={name:"copyDone",length:4};var b=class extends Error{constructor(a,b,c){super(a),this.length=b,this.name=c}};nP(b,"DatabaseError"),a.DatabaseError=b;var c=class{constructor(a,b){this.length=a,this.chunk=b,this.name="copyData"}};nP(c,"CopyDataMessage"),a.CopyDataMessage=c;var d=class{constructor(a,b,c,d){this.length=a,this.name=b,this.binary=c,this.columnTypes=Array(d)}};nP(d,"CopyResponse"),a.CopyResponse=d;var e=class{constructor(a,b,c,d,e,f,g){this.name=a,this.tableID=b,this.columnID=c,this.dataTypeID=d,this.dataTypeSize=e,this.dataTypeModifier=f,this.format=g}};nP(e,"Field"),a.Field=e;var f=class{constructor(a,b){this.length=a,this.fieldCount=b,this.name="rowDescription",this.fields=Array(this.fieldCount)}};nP(f,"RowDescriptionMessage"),a.RowDescriptionMessage=f;var g=class{constructor(a,b){this.length=a,this.parameterCount=b,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};nP(g,"ParameterDescriptionMessage"),a.ParameterDescriptionMessage=g;var h=class{constructor(a,b,c){this.length=a,this.parameterName=b,this.parameterValue=c,this.name="parameterStatus"}};nP(h,"ParameterStatusMessage"),a.ParameterStatusMessage=h;var i=class{constructor(a,b){this.length=a,this.salt=b,this.name="authenticationMD5Password"}};nP(i,"AuthenticationMD5Password"),a.AuthenticationMD5Password=i;var j=class{constructor(a,b,c){this.length=a,this.processID=b,this.secretKey=c,this.name="backendKeyData"}};nP(j,"BackendKeyDataMessage"),a.BackendKeyDataMessage=j;var k=class{constructor(a,b,c,d){this.length=a,this.processId=b,this.channel=c,this.payload=d,this.name="notification"}};nP(k,"NotificationResponseMessage"),a.NotificationResponseMessage=k;var l=class{constructor(a,b){this.length=a,this.status=b,this.name="readyForQuery"}};nP(l,"ReadyForQueryMessage"),a.ReadyForQueryMessage=l;var m=class{constructor(a,b){this.length=a,this.text=b,this.name="commandComplete"}};nP(m,"CommandCompleteMessage"),a.CommandCompleteMessage=m;var n=class{constructor(a,b){this.length=a,this.fields=b,this.name="dataRow",this.fieldCount=b.length}};nP(n,"DataRowMessage"),a.DataRowMessage=n;var o=class{constructor(a,b){this.length=a,this.message=b,this.name="notice"}};nP(o,"NoticeMessage"),a.NoticeMessage=o}),o$=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.Writer=void 0;var b=class{constructor(a=256){this.size=a,this.offset=5,this.headerPosition=0,this.buffer=nH.allocUnsafe(a)}ensure(a){if(this.buffer.length-this.offset<a){let b=this.buffer,c=b.length+(b.length>>1)+a;this.buffer=nH.allocUnsafe(c),b.copy(this.buffer)}}addInt32(a){return this.ensure(4),this.buffer[this.offset++]=a>>>24&255,this.buffer[this.offset++]=a>>>16&255,this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addInt16(a){return this.ensure(2),this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addCString(a){if(a){let b=nH.byteLength(a);this.ensure(b+1),this.buffer.write(a,this.offset,"utf-8"),this.offset+=b}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(a=""){let b=nH.byteLength(a);return this.ensure(b),this.buffer.write(a,this.offset),this.offset+=b,this}add(a){return this.ensure(a.length),a.copy(this.buffer,this.offset),this.offset+=a.length,this}join(a){if(a){this.buffer[this.headerPosition]=a;let b=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(b,this.headerPosition+1)}return this.buffer.slice(5*!a,this.offset)}flush(a){let b=this.join(a);return this.offset=5,this.headerPosition=0,this.buffer=nH.allocUnsafe(this.size),b}};nP(b,"Writer"),a.Writer=b}),o_=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.serialize=void 0;var b=o$(),c=new b.Writer,d=nP(a=>{for(let b of(c.addInt16(3).addInt16(0),Object.keys(a)))c.addCString(b).addCString(a[b]);c.addCString("client_encoding").addCString("UTF8");let d=c.addCString("").flush(),e=d.length+4;return new b.Writer().addInt32(e).add(d).flush()},"startup"),e=nP(()=>{let a=nH.allocUnsafe(8);return a.writeInt32BE(8,0),a.writeInt32BE(0x4d2162f,4),a},"requestSsl"),f=nP(a=>c.addCString(a).flush(112),"password"),g=nP(function(a,b){return c.addCString(a).addInt32(nH.byteLength(b)).addString(b),c.flush(112)},"sendSASLInitialResponseMessage"),h=nP(function(a){return c.addString(a).flush(112)},"sendSCRAMClientFinalMessage"),i=nP(a=>c.addCString(a).flush(81),"query"),j=[],k=nP(a=>{let b=a.name||"";b.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",b,b.length),console.error("This can cause conflicts and silent errors executing queries"));let d=a.types||j,e=d.length,f=c.addCString(b).addCString(a.text).addInt16(e);for(let a=0;a<e;a++)f.addInt32(d[a]);return c.flush(80)},"parse"),l=new b.Writer,m=nP(function(a,b){for(let d=0;d<a.length;d++){let e=b?b(a[d],d):a[d];null==e?(c.addInt16(0),l.addInt32(-1)):e instanceof nH?(c.addInt16(1),l.addInt32(e.length),l.add(e)):(c.addInt16(0),l.addInt32(nH.byteLength(e)),l.addString(e))}},"writeValues"),n=nP((a={})=>{let b=a.portal||"",d=a.statement||"",e=a.binary||!1,f=a.values||j,g=f.length;return c.addCString(b).addCString(d),c.addInt16(g),m(f,a.valueMapper),c.addInt16(g),c.add(l.flush()),c.addInt16(+!!e),c.flush(66)},"bind"),o=nH.from([69,0,0,0,9,0,0,0,0,0]),p=nP(a=>{if(!a||!a.portal&&!a.rows)return o;let b=a.portal||"",c=a.rows||0,d=nH.byteLength(b),e=4+d+1+4,f=nH.allocUnsafe(1+e);return f[0]=69,f.writeInt32BE(e,1),f.write(b,5,"utf-8"),f[d+5]=0,f.writeUInt32BE(c,f.length-4),f},"execute"),q=nP((a,b)=>{let c=nH.allocUnsafe(16);return c.writeInt32BE(16,0),c.writeInt16BE(1234,4),c.writeInt16BE(5678,6),c.writeInt32BE(a,8),c.writeInt32BE(b,12),c},"cancel"),r=nP((a,b)=>{let c=4+nH.byteLength(b)+1,d=nH.allocUnsafe(1+c);return d[0]=a,d.writeInt32BE(c,1),d.write(b,5,"utf-8"),d[c]=0,d},"cstringMessage"),s=c.addCString("P").flush(68),t=c.addCString("S").flush(68),u=nP(a=>a.name?r(68,`${a.type}${a.name||""}`):"P"===a.type?s:t,"describe"),v=nP(a=>r(67,`${a.type}${a.name||""}`),"close"),w=nP(a=>c.add(a).flush(100),"copyData"),x=nP(a=>r(102,a),"copyFail"),y=nP(a=>nH.from([a,0,0,0,4]),"codeOnlyBuffer"),z=y(72),A=y(83),B=y(88),C=y(99);a.serialize={startup:d,password:f,requestSsl:e,sendSASLInitialResponseMessage:g,sendSCRAMClientFinalMessage:h,query:i,parse:k,bind:n,execute:p,describe:u,close:v,flush:nP(()=>z,"flush"),sync:nP(()=>A,"sync"),end:nP(()=>B,"end"),copyData:w,copyDone:nP(()=>C,"copyDone"),copyFail:x,cancel:q}}),o0=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.BufferReader=void 0;var b=nH.allocUnsafe(0),c=class{constructor(a=0){this.offset=a,this.buffer=b,this.encoding="utf-8"}setBuffer(a,b){this.offset=a,this.buffer=b}int16(){let a=this.buffer.readInt16BE(this.offset);return this.offset+=2,a}byte(){let a=this.buffer[this.offset];return this.offset++,a}int32(){let a=this.buffer.readInt32BE(this.offset);return this.offset+=4,a}uint32(){let a=this.buffer.readUInt32BE(this.offset);return this.offset+=4,a}string(a){let b=this.buffer.toString(this.encoding,this.offset,this.offset+a);return this.offset+=a,b}cstring(){let a=this.offset,b=a;for(;0!==this.buffer[b++];);return this.offset=b,this.buffer.toString(this.encoding,a,b-1)}bytes(a){let b=this.buffer.slice(this.offset,this.offset+a);return this.offset+=a,b}};nP(c,"BufferReader"),a.BufferReader=c}),o1=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.Parser=void 0;var b=oZ(),c=o0(),d=nH.allocUnsafe(0),e=class{constructor(a){if(this.buffer=d,this.bufferLength=0,this.bufferOffset=0,this.reader=new c.BufferReader,a?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=a?.mode||"text"}parse(a,b){this.mergeBuffer(a);let c=this.bufferOffset+this.bufferLength,e=this.bufferOffset;for(;e+5<=c;){let a=this.buffer[e],d=this.buffer.readUInt32BE(e+1),f=1+d;if(f+e<=c)b(this.handlePacket(e+5,a,d,this.buffer)),e+=f;else break}e===c?(this.buffer=d,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=c-e,this.bufferOffset=e)}mergeBuffer(a){if(this.bufferLength>0){let b=this.bufferLength+a.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let a;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)a=this.buffer;else{let c=2*this.buffer.byteLength;for(;b>=c;)c*=2;a=nH.allocUnsafe(c)}this.buffer.copy(a,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=a,this.bufferOffset=0}a.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=a,this.bufferOffset=0,this.bufferLength=a.byteLength}handlePacket(a,c,d,e){switch(c){case 50:return b.bindComplete;case 49:return b.parseComplete;case 51:return b.closeComplete;case 110:return b.noData;case 115:return b.portalSuspended;case 99:return b.copyDone;case 87:return b.replicationStart;case 73:return b.emptyQuery;case 68:return this.parseDataRowMessage(a,d,e);case 67:return this.parseCommandCompleteMessage(a,d,e);case 90:return this.parseReadyForQueryMessage(a,d,e);case 65:return this.parseNotificationMessage(a,d,e);case 82:return this.parseAuthenticationResponse(a,d,e);case 83:return this.parseParameterStatusMessage(a,d,e);case 75:return this.parseBackendKeyData(a,d,e);case 69:return this.parseErrorMessage(a,d,e,"error");case 78:return this.parseErrorMessage(a,d,e,"notice");case 84:return this.parseRowDescriptionMessage(a,d,e);case 116:return this.parseParameterDescriptionMessage(a,d,e);case 71:return this.parseCopyInMessage(a,d,e);case 72:return this.parseCopyOutMessage(a,d,e);case 100:return this.parseCopyData(a,d,e);default:return new b.DatabaseError("received invalid response: "+c.toString(16),d,"error")}}parseReadyForQueryMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.string(1);return new b.ReadyForQueryMessage(c,e)}parseCommandCompleteMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring();return new b.CommandCompleteMessage(c,e)}parseCopyData(a,c,d){let e=d.slice(a,a+(c-4));return new b.CopyDataMessage(c,e)}parseCopyInMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyInResponse")}parseCopyOutMessage(a,b,c){return this.parseCopyMessage(a,b,c,"copyOutResponse")}parseCopyMessage(a,c,d,e){this.reader.setBuffer(a,d);let f=0!==this.reader.byte(),g=this.reader.int16(),h=new b.CopyResponse(c,e,f,g);for(let a=0;a<g;a++)h.columnTypes[a]=this.reader.int16();return h}parseNotificationMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.cstring(),g=this.reader.cstring();return new b.NotificationResponseMessage(c,e,f,g)}parseRowDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.RowDescriptionMessage(c,e);for(let a=0;a<e;a++)f.fields[a]=this.parseField();return f}parseField(){let a=this.reader.cstring(),c=this.reader.uint32(),d=this.reader.int16(),e=this.reader.uint32(),f=this.reader.int16(),g=this.reader.int32(),h=0===this.reader.int16()?"text":"binary";return new b.Field(a,c,d,e,f,g,h)}parseParameterDescriptionMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=new b.ParameterDescriptionMessage(c,e);for(let a=0;a<e;a++)f.dataTypeIDs[a]=this.reader.int32();return f}parseDataRowMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int16(),f=Array(e);for(let a=0;a<e;a++){let b=this.reader.int32();f[a]=-1===b?null:this.reader.string(b)}return new b.DataRowMessage(c,f)}parseParameterStatusMessage(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.cstring(),f=this.reader.cstring();return new b.ParameterStatusMessage(c,e,f)}parseBackendKeyData(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f=this.reader.int32();return new b.BackendKeyDataMessage(c,e,f)}parseAuthenticationResponse(a,c,d){this.reader.setBuffer(a,d);let e=this.reader.int32(),f={name:"authenticationOk",length:c};switch(e){case 0:break;case 3:8===f.length&&(f.name="authenticationCleartextPassword");break;case 5:if(12===f.length){f.name="authenticationMD5Password";let a=this.reader.bytes(4);return new b.AuthenticationMD5Password(c,a)}break;case 10:{let a;f.name="authenticationSASL",f.mechanisms=[];do(a=this.reader.cstring())&&f.mechanisms.push(a);while(a)}break;case 11:f.name="authenticationSASLContinue",f.data=this.reader.string(c-8);break;case 12:f.name="authenticationSASLFinal",f.data=this.reader.string(c-8);break;default:throw Error("Unknown authenticationOk message type "+e)}return f}parseErrorMessage(a,c,d,e){this.reader.setBuffer(a,d);let f={},g=this.reader.string(1);for(;"\0"!==g;)f[g]=this.reader.cstring(),g=this.reader.string(1);let h=f.M,i="notice"===e?new b.NoticeMessage(c,h):new b.DatabaseError(h,c,e);return i.severity=f.S,i.code=f.C,i.detail=f.D,i.hint=f.H,i.position=f.P,i.internalPosition=f.p,i.internalQuery=f.q,i.where=f.W,i.schema=f.s,i.table=f.t,i.column=f.c,i.dataType=f.d,i.constraint=f.n,i.file=f.F,i.line=f.L,i.routine=f.R,i}};nP(e,"Parser"),a.Parser=e}),o2=nR(a=>{n$(),Object.defineProperty(a,"__esModule",{value:!0}),a.DatabaseError=a.serialize=a.parse=void 0;var b=oZ();Object.defineProperty(a,"DatabaseError",{enumerable:!0,get:nP(function(){return b.DatabaseError},"get")});var c=o_();Object.defineProperty(a,"serialize",{enumerable:!0,get:nP(function(){return c.serialize},"get")});var d=o1();function e(a,b){let c=new d.Parser;return a.on("data",a=>c.parse(a,b)),new Promise(b=>a.on("end",()=>b()))}nP(e,"parse"),a.parse=e}),o3={};function o4({socket:a,servername:b}){return a.startTls(b),a}nS(o3,{connect:()=>o4});var o5=nQ(()=>{n$(),nP(o4,"connect")}),o6=nR((a,b)=>{n$();var c=(n6(),nV(n0)),d=n_().EventEmitter,{parse:e,serialize:f}=o2(),g=f.flush(),h=f.sync(),i=f.end(),j=class extends d{constructor(a){super(),a=a||{},this.stream=a.stream||new c.Socket,this._keepAlive=a.keepAlive,this._keepAliveInitialDelayMillis=a.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=a.ssl||!1,this._ending=!1,this._emitMessage=!1;var b=this;this.on("newListener",function(a){"message"===a&&(b._emitMessage=!0)})}connect(a,b){var d=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(a,b),this.stream.once("connect",function(){d._keepAlive&&d.stream.setKeepAlive(!0,d._keepAliveInitialDelayMillis),d.emit("connect")});let e=nP(function(a){d._ending&&("ECONNRESET"===a.code||"EPIPE"===a.code)||d.emit("error",a)},"reportStreamError");if(this.stream.on("error",e),this.stream.on("close",function(){d.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(a){switch(a.toString("utf8")){case"S":break;case"N":return d.stream.end(),d.emit("error",Error("The server does not support SSL connections"));default:return d.stream.end(),d.emit("error",Error("There was an error establishing an SSL connection"))}var f=(o5(),nV(o3));let g={socket:d.stream};!0!==d.ssl&&(Object.assign(g,d.ssl),"key"in d.ssl&&(g.key=d.ssl.key)),0===c.isIP(b)&&(g.servername=b);try{d.stream=f.connect(g)}catch(a){return d.emit("error",a)}d.attachListeners(d.stream),d.stream.on("error",e),d.emit("sslconnect")})}attachListeners(a){a.on("end",()=>{this.emit("end")}),e(a,a=>{var b="error"===a.name?"errorMessage":a.name;this._emitMessage&&this.emit("message",a),this.emit(b,a)})}requestSsl(){this.stream.write(f.requestSsl())}startup(a){this.stream.write(f.startup(a))}cancel(a,b){this._send(f.cancel(a,b))}password(a){this._send(f.password(a))}sendSASLInitialResponseMessage(a,b){this._send(f.sendSASLInitialResponseMessage(a,b))}sendSCRAMClientFinalMessage(a){this._send(f.sendSCRAMClientFinalMessage(a))}_send(a){return!!this.stream.writable&&this.stream.write(a)}query(a){this._send(f.query(a))}parse(a){this._send(f.parse(a))}bind(a){this._send(f.bind(a))}execute(a){this._send(f.execute(a))}flush(){this.stream.writable&&this.stream.write(g)}sync(){this._ending=!0,this._send(g),this._send(h)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){return(this._ending=!0,this._connecting&&this.stream.writable)?this.stream.write(i,()=>{this.stream.end()}):void this.stream.end()}close(a){this._send(f.close(a))}describe(a){this._send(f.describe(a))}sendCopyFromChunk(a){this._send(f.copyData(a))}endCopyFrom(){this._send(f.copyDone())}sendCopyFail(a){this._send(f.copyFail(a))}};nP(j,"Connection"),b.exports=j}),o7=nR((a,b)=>{n$();var c=n_().EventEmitter,d=(oA(),nV(oy),ox()),e=oB(),f=oR(),g=ol(),h=oW(),i=oY(),j=ow(),k=o6(),l=class extends c{constructor(a){super(),this.connectionParameters=new h(a),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var b=a||{};this._Promise=b.Promise||nF.Promise,this._types=new g(b.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=b.connection||new k({stream:b.stream,ssl:this.connectionParameters.ssl,keepAlive:b.keepAlive||!1,keepAliveInitialDelayMillis:b.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=b.binary||j.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=b.connectionTimeoutMillis||0}_errorAllQueries(a){let b=nP(b=>{nI.nextTick(()=>{b.handleError(a,this.connection)})},"enqueueError");this.activeQuery&&(b(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(b),this.queryQueue.length=0}_connect(a){var b=this,c=this.connection;if(this._connectionCallback=a,this._connecting||this._connected){let b=Error("Client has already been connected. You cannot reuse a client.");nI.nextTick(()=>{a(b)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{c._ending=!0,c.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){b.ssl?c.requestSsl():c.startup(b.getStartupConf())}),c.on("sslconnect",function(){c.startup(b.getStartupConf())}),this._attachListeners(c),c.once("end",()=>{let a=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(a),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(a):this._handleErrorEvent(a):this._connectionError||this._handleErrorEvent(a)),nI.nextTick(()=>{this.emit("end")})})}connect(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})}_attachListeners(a){a.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),a.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),a.on("authenticationSASL",this._handleAuthSASL.bind(this)),a.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),a.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),a.on("backendKeyData",this._handleBackendKeyData.bind(this)),a.on("error",this._handleErrorEvent.bind(this)),a.on("errorMessage",this._handleErrorMessage.bind(this)),a.on("readyForQuery",this._handleReadyForQuery.bind(this)),a.on("notice",this._handleNotice.bind(this)),a.on("rowDescription",this._handleRowDescription.bind(this)),a.on("dataRow",this._handleDataRow.bind(this)),a.on("portalSuspended",this._handlePortalSuspended.bind(this)),a.on("emptyQuery",this._handleEmptyQuery.bind(this)),a.on("commandComplete",this._handleCommandComplete.bind(this)),a.on("parseComplete",this._handleParseComplete.bind(this)),a.on("copyInResponse",this._handleCopyInResponse.bind(this)),a.on("copyData",this._handleCopyData.bind(this)),a.on("notification",this._handleNotification.bind(this))}_checkPgPass(a){let b=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(c=>{if(void 0!==c){if("string"!=typeof c)return void b.emit("error",TypeError("Password must be a string"));this.connectionParameters.password=this.password=c}else this.connectionParameters.password=this.password=null;a()}).catch(a=>{b.emit("error",a)}):null!==this.password?a():f(this.connectionParameters,b=>{void 0!==b&&(this.connectionParameters.password=this.password=b),a()})}_handleAuthCleartextPassword(a){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(a){this._checkPgPass(()=>{let b=d.postgresMd5PasswordHash(this.user,this.password,a.salt);this.connection.password(b)})}_handleAuthSASL(a){this._checkPgPass(()=>{this.saslSession=e.startSession(a.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(a){e.continueSession(this.saslSession,this.password,a.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(a){e.finalizeSession(this.saslSession,a.data),this.saslSession=null}_handleBackendKeyData(a){this.processID=a.processID,this.secretKey=a.secretKey}_handleReadyForQuery(a){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:b}=this;this.activeQuery=null,this.readyForQuery=!0,b&&b.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(a){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(a);this.emit("error",a)}}_handleErrorEvent(a){if(this._connecting)return this._handleErrorWhileConnecting(a);this._queryable=!1,this._errorAllQueries(a),this.emit("error",a)}_handleErrorMessage(a){if(this._connecting)return this._handleErrorWhileConnecting(a);let b=this.activeQuery;b?(this.activeQuery=null,b.handleError(a,this.connection)):this._handleErrorEvent(a)}_handleRowDescription(a){this.activeQuery.handleRowDescription(a)}_handleDataRow(a){this.activeQuery.handleDataRow(a)}_handlePortalSuspended(a){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(a){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(a){this.activeQuery.handleCommandComplete(a,this.connection)}_handleParseComplete(a){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(a){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(a){this.activeQuery.handleCopyData(a,this.connection)}_handleNotification(a){this.emit("notification",a)}_handleNotice(a){this.emit("notice",a)}getStartupConf(){var a=this.connectionParameters,b={user:a.user,database:a.database},c=a.application_name||a.fallback_application_name;return c&&(b.application_name=c),a.replication&&(b.replication=""+a.replication),a.statement_timeout&&(b.statement_timeout=String(parseInt(a.statement_timeout,10))),a.lock_timeout&&(b.lock_timeout=String(parseInt(a.lock_timeout,10))),a.idle_in_transaction_session_timeout&&(b.idle_in_transaction_session_timeout=String(parseInt(a.idle_in_transaction_session_timeout,10))),a.options&&(b.options=a.options),b}cancel(a,b){if(a.activeQuery===b){var c=this.connection;this.host&&0===this.host.indexOf("/")?c.connect(this.host+"/.s.PGSQL."+this.port):c.connect(this.port,this.host),c.on("connect",function(){c.cancel(a.processID,a.secretKey)})}else -1!==a.queryQueue.indexOf(b)&&a.queryQueue.splice(a.queryQueue.indexOf(b),1)}setTypeParser(a,b,c){return this._types.setTypeParser(a,b,c)}getTypeParser(a,b){return this._types.getTypeParser(a,b)}escapeIdentifier(a){return'"'+a.replace(/"/g,'""')+'"'}escapeLiteral(a){for(var b=!1,c="'",d=0;d<a.length;d++){var e=a[d];"'"===e?c+=e+e:"\\"===e?(c+=e+e,b=!0):c+=e}return c+="'",!0===b&&(c=" E"+c),c}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let a=this.activeQuery.submit(this.connection);a&&nI.nextTick(()=>{this.activeQuery.handleError(a,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(a,b,c){var d,e,f,g,h;if(null==a)throw TypeError("Client was passed a null or undefined query");return"function"==typeof a.submit?(f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(d.callback=d.callback||b)):(f=this.connectionParameters.query_timeout,(d=new i(a,b,c)).callback||(e=new this._Promise((a,b)=>{d.callback=(c,d)=>c?b(c):a(d)}))),f&&(h=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");nI.nextTick(()=>{d.handleError(a,this.connection)}),h(a),d.callback=()=>{};var b=this.queryQueue.indexOf(d);b>-1&&this.queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),h(a,b)}),this.binary&&!d.binary&&(d.binary=!0),d._result&&!d._result._types&&(d._result._types=this._types),this._queryable?this._ending?nI.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(d),this._pulseQueryQueue()):nI.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),e}ref(){this.connection.ref()}unref(){this.connection.unref()}end(a){if(this._ending=!0,!this.connection._connecting)if(!a)return this._Promise.resolve();else a();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!a)return new this._Promise(a=>{this.connection.once("end",a)});this.connection.once("end",a)}};nP(l,"Client"),l.Query=i,b.exports=l}),o8=nR((a,b)=>{n$();var c=n_().EventEmitter,d=nP(function(){},"NOOP"),e=nP((a,b)=>{let c=a.findIndex(b);return -1===c?void 0:a.splice(c,1)[0]},"removeWhere"),f=class{constructor(a,b,c){this.client=a,this.idleListener=b,this.timeoutId=c}};nP(f,"IdleItem");var g=class{constructor(a){this.callback=a}};function h(){throw Error("Release called on client which has already been released to the pool.")}function i(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:nP(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b}).catch(a=>{throw Error.captureStackTrace(a),a})}}function j(a,b){return nP(function c(d){d.client=b,b.removeListener("error",c),b.on("error",()=>{a.log("additional client error after disconnection due to error",d)}),a._remove(b),a.emit("error",d,b)},"idleListener")}nP(g,"PendingItem"),nP(h,"throwOnDoubleRelease"),nP(i,"promisify"),nP(j,"makeIdleListener");var k=class extends c{constructor(a,b){super(),this.options=Object.assign({},a),null!=a&&"password"in a&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:a.password}),null!=a&&a.ssl&&a.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||b||pg().Client,this.Promise=this.options.Promise||nF.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(a=>{this._remove(a.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;let a=this._pendingQueue.shift();if(this._idle.length){let b=this._idle.pop();clearTimeout(b.timeoutId);let c=b.client;c.ref&&c.ref();let d=b.idleListener;return this._acquireClient(c,a,d,!1)}if(!this._isFull())return this.newClient(a);throw Error("unexpected condition")}_remove(a){let b=e(this._idle,b=>b.client===a);void 0!==b&&clearTimeout(b.timeoutId),this._clients=this._clients.filter(b=>b!==a),a.end(),this.emit("remove",a)}connect(a){if(this.ending){let b=Error("Cannot use a pool after calling end on the pool");return a?a(b):this.Promise.reject(b)}let b=i(this.Promise,a),c=b.result;if(this._isFull()||this._idle.length){if(this._idle.length&&nI.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new g(b.callback)),c;let a=nP((a,c,d)=>{clearTimeout(f),b.callback(a,c,d)},"queueCallback"),d=new g(a),f=setTimeout(()=>{e(this._pendingQueue,b=>b.callback===a),d.timedOut=!0,b.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return f.unref&&f.unref(),this._pendingQueue.push(d),c}return this.newClient(new g(b.callback)),c}newClient(a){let b=new this.Client(this.options);this._clients.push(b);let c=j(this,b);this.log("checking client timeout");let e,f=!1;this.options.connectionTimeoutMillis&&(e=setTimeout(()=>{this.log("ending client due to timeout"),f=!0,b.connection?b.connection.stream.destroy():b.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),b.connect(h=>{if(e&&clearTimeout(e),b.on("error",c),h)this.log("client failed to connect",h),this._clients=this._clients.filter(a=>a!==b),f&&(h=Error("Connection terminated due to connection timeout",{cause:h})),this._pulseQueue(),a.timedOut||a.callback(h,void 0,d);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(b),-1!==this._idle.findIndex(a=>a.client===b)&&this._acquireClient(b,new g((a,b,c)=>c()),c,!1)},1e3*this.options.maxLifetimeSeconds);a.unref(),b.once("end",()=>clearTimeout(a))}return this._acquireClient(b,a,c,!0)}})}_acquireClient(a,b,c,e){e&&this.emit("connect",a),this.emit("acquire",a),a.release=this._releaseOnce(a,c),a.removeListener("error",c),b.timedOut?e&&this.options.verify?this.options.verify(a,a.release):a.release():e&&this.options.verify?this.options.verify(a,c=>{if(c)return a.release(c),b.callback(c,void 0,d);b.callback(void 0,a,a.release)}):b.callback(void 0,a,a.release)}_releaseOnce(a,b){let c=!1;return d=>{c&&h(),c=!0,this._release(a,b,d)}}_release(a,b,c){let d;if(a.on("error",b),a._poolUseCount=(a._poolUseCount||0)+1,this.emit("release",c,a),c||this.ending||!a._queryable||a._ending||a._poolUseCount>=this.options.maxUses){a._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(a),this._pulseQueue();return}if(this._expired.has(a)){this.log("remove expired client"),this._expired.delete(a),this._remove(a),this._pulseQueue();return}this.options.idleTimeoutMillis&&this._isAboveMin()&&(d=setTimeout(()=>{this.log("remove idle client"),this._remove(a)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&d.unref()),this.options.allowExitOnIdle&&a.unref(),this._idle.push(new f(a,b,d)),this._pulseQueue()}query(a,b,c){if("function"==typeof a){let b=i(this.Promise,a);return nG(function(){return b.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),b.result}"function"==typeof b&&(c=b,b=void 0);let d=i(this.Promise,c);return c=d.callback,this.connect((d,e)=>{if(d)return c(d);let f=!1,g=nP(a=>{f||(f=!0,e.release(a),c(a))},"onError");e.once("error",g),this.log("dispatching query");try{e.query(a,b,(a,b)=>{if(this.log("query dispatched"),e.removeListener("error",g),!f)return f=!0,e.release(a),a?c(a):c(void 0,b)})}catch(a){return e.release(a),c(a)}}),d.result}end(a){if(this.log("ending"),this.ending){let b=Error("Called end on pool more than once");return a?a(b):this.Promise.reject(b)}this.ending=!0;let b=i(this.Promise,a);return this._endCallback=b.callback,this._pulseQueue(),b.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((a,b)=>a+ +!!this._expired.has(b),0)}get totalCount(){return this._clients.length}};nP(k,"Pool"),b.exports=k}),o9={};nS(o9,{default:()=>pa});var pa,pb=nQ(()=>{n$(),pa={}}),pc=nR((a,b)=>{b.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),pd=nR((a,b)=>{n$();var c=n_().EventEmitter,d=(oA(),nV(oy)),e=ox(),f=b.exports=function(a,b,d){c.call(this),a=e.normalizeQueryConfig(a,b,d),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode="array"===a.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(a){"row"===a&&(this._emitRowEvents=!0)}).bind(this))};d.inherits(f,c);var g={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};f.prototype.handleError=function(a){var b=this.native.pq.resultErrorFields();if(b)for(var c in b)a[g[c]||c]=b[c];this.callback?this.callback(a):this.emit("error",a),this.state="error"},f.prototype.then=function(a,b){return this._getPromise().then(a,b)},f.prototype.catch=function(a){return this._getPromise().catch(a)},f.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(a,b){this._once("end",a),this._once("error",b)}).bind(this))),this._promise},f.prototype.submit=function(a){this.state="running";var b=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var c=nP(function(c,d,e){if(a.native.arrayMode=!1,nG(function(){b.emit("_done")}),c)return b.handleError(c);b._emitRowEvents&&(e.length>1?d.forEach((a,c)=>{a.forEach(a=>{b.emit("row",a,e[c])})}):d.forEach(function(a){b.emit("row",a,e)})),b.state="end",b.emit("end",e),b.callback&&b.callback(null,e)},"after");if(nI.domain&&(c=nI.domain.bind(c)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var d=(this.values||[]).map(e.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let a=Error(`Prepa\
red statements must be unique - '${this.name}' was used for a different statement`);return c(a)}return a.native.execute(this.name,d,c)}return a.native.prepare(this.name,this.text,d.length,function(e){return e?c(e):(a.namedQueries[b.name]=b.text,b.native.execute(b.name,d,c))})}if(this.values){if(!Array.isArray(this.values)){let a=Error("Query values must be an array");return c(a)}var f=this.values.map(e.prepareValue);a.native.query(this.text,f,c)}else a.native.query(this.text,c)}}),pe=nR((a,b)=>{n$();var c=(pb(),nV(o9)),d=ol(),e=(pc(),n_().EventEmitter),f=(oA(),nV(oy)),g=oW(),h=pd(),i=b.exports=function(a){e.call(this),a=a||{},this._Promise=a.Promise||nF.Promise,this._types=new d(a.types),this.native=new c({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var b=this.connectionParameters=new g(a);this.user=b.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:b.password}),this.database=b.database,this.host=b.host,this.port=b.port,this.namedQueries={}};i.Query=h,f.inherits(i,e),i.prototype._errorAllQueries=function(a){let b=nP(b=>{nI.nextTick(()=>{b.native=this.native,b.handleError(a)})},"enqueueError");this._hasActiveQuery()&&(b(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(b),this._queryQueue.length=0},i.prototype._connect=function(a){var b=this;this._connecting?nI.nextTick(()=>a(Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(c,d){if(c)return a(c);b.native.connect(d,function(c){if(c)return b.native.end(),a(c);b._connected=!0,b.native.on("error",function(a){b._queryable=!1,b._errorAllQueries(a),b.emit("error",a)}),b.native.on("notification",function(a){b.emit("notification",{channel:a.relname,payload:a.extra})}),b.emit("connect"),b._pulseQueryQueue(!0),a()})}))},i.prototype.connect=function(a){return a?void this._connect(a):new this._Promise((a,b)=>{this._connect(c=>{c?b(c):a()})})},i.prototype.query=function(a,b,c){var d,e,f,g,i;if(null==a)throw TypeError("Client was passed a null or undefined query");if("function"==typeof a.submit)f=a.query_timeout||this.connectionParameters.query_timeout,e=d=a,"function"==typeof b&&(a.callback=b);else if(f=this.connectionParameters.query_timeout,!(d=new h(a,b,c)).callback){let a,b;e=new this._Promise((c,d)=>{a=c,b=d}),d.callback=(c,d)=>c?b(c):a(d)}return f&&(i=d.callback,g=setTimeout(()=>{var a=Error("Query read timeout");nI.nextTick(()=>{d.handleError(a,this.connection)}),i(a),d.callback=()=>{};var b=this._queryQueue.indexOf(d);b>-1&&this._queryQueue.splice(b,1),this._pulseQueryQueue()},f),d.callback=(a,b)=>{clearTimeout(g),i(a,b)}),this._queryable?this._ending?(d.native=this.native,nI.nextTick(()=>{d.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(d),this._pulseQueryQueue()):(d.native=this.native,nI.nextTick(()=>{d.handleError(Error("Client has encountered a connection error and is not queryable"))})),e},i.prototype.end=function(a){var b,c=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,a)),a||(b=new this._Promise(function(b,c){a=nP(a=>a?c(a):b(),"cb")})),this.native.end(function(){c._errorAllQueries(Error("Connection terminated")),nI.nextTick(()=>{c.emit("end"),a&&a()})}),b},i.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},i.prototype._pulseQueryQueue=function(a){if(this._connected&&!this._hasActiveQuery()){var b=this._queryQueue.shift();if(!b){a||this.emit("drain");return}this._activeQuery=b,b.submit(this);var c=this;b.once("_done",function(){c._pulseQueryQueue()})}},i.prototype.cancel=function(a){this._activeQuery===a?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(a)&&this._queryQueue.splice(this._queryQueue.indexOf(a),1)},i.prototype.ref=function(){},i.prototype.unref=function(){},i.prototype.setTypeParser=function(a,b,c){return this._types.setTypeParser(a,b,c)},i.prototype.getTypeParser=function(a,b){return this._types.getTypeParser(a,b)}}),pf=nR((a,b)=>{n$(),b.exports=pe()}),pg=nR((a,b)=>{n$();var c=o7(),d=ow(),e=o6(),f=o8(),{DatabaseError:g}=o2(),h=nP(a=>{var b;return nP(b=class extends f{constructor(b){super(b,a)}},"BoundPool"),b},"poolFactory"),i=nP(function(a){this.defaults=d,this.Client=a,this.Query=this.Client.Query,this.Pool=h(this.Client),this._pools=[],this.Connection=e,this.types=ok(),this.DatabaseError=g},"PG");"u">typeof nI.env.NODE_PG_FORCE_NATIVE?b.exports=new i(pf()):(b.exports=new i(c),Object.defineProperty(b.exports,"native",{configurable:!0,enumerable:!1,get(){var a=null;try{a=new i(pf())}catch(a){if("MODULE_NOT_FOUND"!==a.code)throw a}return Object.defineProperty(b.exports,"native",{value:a}),a}}))});n$(),n$(),n6(),n9(),n$();var ph=Object.defineProperty,pi=Object.defineProperties,pj=Object.getOwnPropertyDescriptors,pk=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,pm=Object.prototype.propertyIsEnumerable,pn=nP((a,b,c)=>b in a?ph(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,"__defNormalProp"),po=nP((a,b)=>{for(var c in b||(b={}))pl.call(b,c)&&pn(a,c,b[c]);if(pk)for(var c of pk(b))pm.call(b,c)&&pn(a,c,b[c]);return a},"__spreadValues"),pp=nP((a,b)=>pi(a,pj(b)),"__spreadProps"),pq=2===new Uint8Array(new Uint16Array([258]).buffer)[0],pr=new TextDecoder,ps=new TextEncoder,pt=ps.encode("0123456789abcdef"),pu=ps.encode("0123456789ABCDEF"),pv=ps.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").slice();function pw(a,{alphabet:b,scratchArr:c}={}){if(!o)if(o=new Uint16Array(256),p=new Uint16Array(256),pq)for(let a=0;a<256;a++)o[a]=pt[15&a]<<8|pt[a>>>4],p[a]=pu[15&a]<<8|pu[a>>>4];else for(let a=0;a<256;a++)o[a]=pt[15&a]|pt[a>>>4]<<8,p[a]=pu[15&a]|pu[a>>>4]<<8;a.byteOffset%4!=0&&(a=new Uint8Array(a));let d=a.length,e=d>>>2,f=c||new Uint16Array(d),g=new Uint32Array(a.buffer,a.byteOffset,e),h=new Uint32Array(f.buffer,f.byteOffset,d>>>1),i="upper"===b?p:o,j=0,k=0,l;if(pq)for(;j<e;)l=g[j++],h[k++]=i[l>>>8&255]<<16|i[255&l],h[k++]=i[l>>>24]<<16|i[l>>>16&255];else for(;j<e;)l=g[j++],h[k++]=i[l>>>24]<<16|i[l>>>16&255],h[k++]=i[l>>>8&255]<<16|i[255&l];for(j<<=2;j<d;)f[j]=i[a[j++]];return pr.decode(f.subarray(0,d))}function px(a,b={}){let c="",d=a.length,e=Math.ceil(d/504e3),f=new Uint16Array(e>1?504e3:d);for(let d=0;d<e;d++){let e=504e3*d,g=e+504e3;c+=pw(a.subarray(e,g),pp(po({},b),{scratchArr:f}))}return c}function py(a,b={}){return"upper"!==b.alphabet&&"function"==typeof a.toHex?a.toHex():px(a,b)}pv[62]=45,pv[63]=95,nP(pw,"_toHex"),nP(px,"_toHexChunked"),nP(py,"toHex"),n$();var pz=class a{constructor(a,b){this.strings=a,this.values=b}toParameterizedQuery(b={query:"",params:[]}){let{strings:c,values:d}=this;for(let e=0,f=c.length;e<f;e++)if(b.query+=c[e],e<d.length){let c=d[e];if(c instanceof pB)b.query+=c.sql;else if(c instanceof pM)if(c.queryData instanceof a)c.queryData.toParameterizedQuery(b);else{if(c.queryData.params?.length)throw Error("This query is not composable");b.query+=c.queryData.query}else{let{params:a}=b;a.push(c),b.query+="$"+a.length,(c instanceof nH||ArrayBuffer.isView(c))&&(b.query+="::bytea")}}return b}};nP(pz,"SqlTemplate");var pA=class{constructor(a){this.sql=a}};nP(pA,"UnsafeRawSql");var pB=pA;function pC(){}n$(),nP(pC,"warnIfBrowser"),n6();var pD=nU(ol()),pE=nU(ox()),pF=class a extends Error{constructor(b){super(b),nW(this,"name","NeonDbError"),nW(this,"severity"),nW(this,"code"),nW(this,"detail"),nW(this,"hint"),nW(this,"position"),nW(this,"internalPosition"),nW(this,"internalQuery"),nW(this,"where"),nW(this,"schema"),nW(this,"table"),nW(this,"column"),nW(this,"dataType"),nW(this,"constraint"),nW(this,"file"),nW(this,"line"),nW(this,"routine"),nW(this,"sourceError"),"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}};nP(pF,"NeonDbError");var pG="transaction() expects an array of queries, or a function returning an array of queries",pH=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function pI(a){return a instanceof nH?"\\x"+py(a):a}function pJ(a){let{query:b,params:c}=a instanceof pz?a.toParameterizedQuery():a;return{query:b,params:c.map(a=>pI((0,pE.prepareValue)(a)))}}function pK(a,{arrayMode:b,fullResults:c,fetchOptions:d,isolationLevel:e,readOnly:f,deferrable:g,authToken:h,disableWarningInBrowsers:i}={}){let j;if(!a)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{j=n8(a)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(a))}let{protocol:k,username:l,hostname:m,port:n,pathname:o}=j;if("postgres:"!==k&&"postgresql:"!==k||!l||!m||!o)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function p(a,...b){if(!(Array.isArray(a)&&Array.isArray(a.raw)&&Array.isArray(b)))throw Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new pM(q,new pz(a,b))}async function q(j,k,l){let o,{fetchEndpoint:p,fetchFunction:q}=n5,r=Array.isArray(j)?{queries:j.map(a=>pJ(a))}:pJ(j),s=d??{},t=b??!1,u=c??!1,v=e,w=f,x=g;void 0!==l&&(void 0!==l.fetchOptions&&(s={...s,...l.fetchOptions}),void 0!==l.arrayMode&&(t=l.arrayMode),void 0!==l.fullResults&&(u=l.fullResults),void 0!==l.isolationLevel&&(v=l.isolationLevel),void 0!==l.readOnly&&(w=l.readOnly),void 0!==l.deferrable&&(x=l.deferrable)),void 0===k||Array.isArray(k)||void 0===k.fetchOptions||(s={...s,...k.fetchOptions});let y=h;Array.isArray(k)||k?.authToken===void 0||(y=k.authToken);let z="function"==typeof p?p(m,n,{jwtAuth:void 0!==y}):p,A={"Neon-Connection-String":a,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},B=await pO(y);B&&(A.Authorization=`Bearer ${B}`),Array.isArray(j)&&(void 0!==v&&(A["Neon-Batch-Isolation-Level"]=v),void 0!==w&&(A["Neon-Batch-Read-Only"]=String(w)),void 0!==x&&(A["Neon-Batch-Deferrable"]=String(x))),i||n5.disableWarningInBrowsers||pC();try{o=await (q??fetch)(z,{method:"POST",body:JSON.stringify(r),headers:A,...s})}catch(b){let a=new pF(`Error connecting to database: ${b}`);throw a.sourceError=b,a}if(o.ok){let a=await o.json();if(Array.isArray(j)){let b=a.results;if(!Array.isArray(b))throw new pF("Neon internal error: unexpected result format");return b.map((a,b)=>{let c=k[b]??{};return pN(a,{arrayMode:c.arrayMode??t,fullResults:c.fullResults??u,types:c.types})})}{let b=k??{};return pN(a,{arrayMode:b.arrayMode??t,fullResults:b.fullResults??u,types:b.types})}}{let{status:a}=o;if(400===a){let a=await o.json(),b=new pF(a.message);for(let c of pH)b[c]=a[c]??void 0;throw b}{let b=await o.text();throw new pF(`Server error (HTTP status ${a}): ${b}`)}}}return nP(p,"templateFn"),p.query=(a,b,c)=>new pM(q,{query:a,params:b??[]},c),p.unsafe=a=>new pB(a),p.transaction=async(a,b)=>{if("function"==typeof a&&(a=a(p)),!Array.isArray(a))throw Error(pG);return a.forEach(a=>{if(!(a instanceof pM))throw Error(pG)}),q(a.map(a=>a.queryData),a.map(a=>a.opts??{}),b)},nP(q,"execute"),p}nP(pI,"encodeBuffersAsBytea"),nP(pJ,"prepareQuery"),nP(pK,"neon");var pL=class{constructor(a,b,c){this.execute=a,this.queryData=b,this.opts=c}then(a,b){return this.execute(this.queryData,this.opts).then(a,b)}catch(a){return this.execute(this.queryData,this.opts).catch(a)}finally(a){return this.execute(this.queryData,this.opts).finally(a)}};nP(pL,"NeonQueryPromise");var pM=pL;function pN(a,{arrayMode:b,fullResults:c,types:d}){let e=new pD.default(d),f=a.fields.map(a=>a.name),g=a.fields.map(a=>e.getTypeParser(a.dataTypeID)),h=!0===b?a.rows.map(a=>a.map((a,b)=>null===a?null:g[b](a))):a.rows.map(a=>Object.fromEntries(a.map((a,b)=>[f[b],null===a?null:g[b](a)])));return c?(a.viaNeonFetch=!0,a.rowAsArray=b,a.rows=h,a._parsers=g,a._types=e,a):h}async function pO(a){if("string"==typeof a)return a;if("function"==typeof a)try{return await Promise.resolve(a())}catch(b){let a=new pF("Error getting auth token.");throw b instanceof Error&&(a=new pF(`Error getting auth token: ${b.message}`)),a}}nP(pN,"processQueryResult"),nP(pO,"getAuthToken"),n$();var pP=nU(pg());n$();var pQ=nU(pg()),pR=class extends pQ.Client{constructor(a){super(a),this.config=a}get neonConfig(){return this.connection.stream}connect(a){let{neonConfig:b}=this;b.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&b.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let c="string"!=typeof this.config&&this.config?.host!==void 0||"string"!=typeof this.config&&this.config?.connectionString!==void 0||void 0!==nI.env.PGHOST,d=nI.env.USER??nI.env.USERNAME;if(!c&&"localhost"===this.host&&this.user===d&&this.database===d&&null===this.password)throw Error(`No database host or connection string wa\
s set, and key parameters have default values (host: localhost, user: ${d}, db: ${d}, password: null\
). Is an environment variable missing? Alternatively, if you intended to connect with these paramete\
rs, please set the host to 'localhost' explicitly.`);let e=super.connect(a),f=b.pipelineTLS&&this.ssl,g="password"===b.pipelineConnect;if(!f&&!b.pipelineConnect)return e;let h=this.connection;if(f&&h.on("connect",()=>h.stream.emit("data","S")),g){h.removeAllListeners("authenticationCleartextPassword"),h.removeAllListeners("readyForQuery"),h.once("readyForQuery",()=>h.on("readyForQuery",this._handleReadyForQuery.bind(this)));let a=this.ssl?"sslconnect":"connect";h.on(a,()=>{this.neonConfig.disableWarningInBrowsers||pC(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return e}async _handleAuthSASLContinue(a){if(typeof crypto>"u"||void 0===crypto.subtle||void 0===crypto.subtle.importKey)throw Error("Cannot use SASL auth when `crypto.subtle` is not defined");let b=crypto.subtle,c=this.saslSession,d=this.password,e=a.data;if("SASLInitialResponse"!==c.message||"string"!=typeof d||"string"!=typeof e)throw Error("SASL: protocol error");let f=Object.fromEntries(e.split(",").map(a=>{if(!/^.=/.test(a))throw Error("SASL: Invalid attribute pair entry");return[a[0],a.substring(2)]})),g=f.r,h=f.s,i=f.i;if(!g||!/^[!-+--~]+$/.test(g))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!h||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!i||!/^[1-9][0-9]*$/.test(i))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!g.startsWith(c.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(g.length===c.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let j=parseInt(i,10),k=nH.from(h,"base64"),l=new TextEncoder,m=l.encode(d),n=await b.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=new Uint8Array(await b.sign("HMAC",n,nH.concat([k,nH.from([0,0,0,1])]))),p=o;for(var q=0;q<j-1;q++)o=new Uint8Array(await b.sign("HMAC",n,o)),p=nH.from(p.map((a,b)=>p[b]^o[b]));let r=p,s=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),t=new Uint8Array(await b.sign("HMAC",s,l.encode("Client Key"))),u=await b.digest("SHA-256",t),v="n=*,r="+c.clientNonce,w="r="+g+",s="+h+",i="+j,x="c=biws,r="+g,y=v+","+w+","+x,z=await b.importKey("raw",u,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var A=new Uint8Array(await b.sign("HMAC",z,l.encode(y))),B=nH.from(t.map((a,b)=>t[b]^A[b])).toString("base64");let C=await b.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),D=await b.sign("HMAC",C,l.encode("Server Key")),E=await b.importKey("raw",D,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var F=nH.from(await b.sign("HMAC",E,l.encode(y)));c.message="SASLResponse",c.serverSignature=F.toString("base64"),c.response=x+",p="+B,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};nP(pR,"NeonClient"),n6();var pS=nU(oW());function pT(a,b){let c,d;return b?{callback:b,result:void 0}:{callback:nP(function(a,b){a?c(a):d(b)},"cb"),result:new a(function(a,b){d=a,c=b})}}nP(pT,"promisify"),nP(class extends pP.Pool{constructor(){super(...arguments),nW(this,"Client",pR),nW(this,"hasFetchUnsupportedListeners",!1),nW(this,"addListener",this.on)}on(a,b){return"error"!==a&&(this.hasFetchUnsupportedListeners=!0),super.on(a,b)}query(a,b,c){if(!n5.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof a)return super.query(a,b,c);"function"==typeof b&&(c=b,b=void 0);let d=pT(this.Promise,c);c=d.callback;try{let d=new pS.default(this.options),e=encodeURIComponent,f=encodeURI,g=`postgresql://${e(d.user)}:${e(d.password)}@${e(d.host)}\
/${f(d.database)}`,h="string"==typeof a?a:a.text,i=b??a.values??[];pK(g,{fullResults:!0,arrayMode:"array"===a.rowMode}).query(h,i,{types:a.types??this.options?.types}).then(a=>c(void 0,a)).catch(a=>c(a))}catch(a){c(a)}return d.result}},"NeonPool"),n6();var pU=nU(pg());pU.DatabaseError,pU.defaults,pU.escapeIdentifier,pU.escapeLiteral;var pV=pU.types;class pW{static [fS]="ConsoleLogWriter";write(a){console.log(a)}}class pX{static [fS]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new pW}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class pY{static [fS]="NoopLogger";logQuery(){}}class pZ{static [fS]="Cache"}class p$ extends pZ{strategy(){return"all"}static [fS]="NoopCache";async get(a){}async put(a,b,c,d){}async onMutate(a){}}async function p_(a,b){let c=`${a}-${JSON.stringify(b)}`,d=new TextEncoder().encode(c);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",d))].map(a=>a.toString(16).padStart(2,"0")).join("")}class p0{constructor(a,b,c,d){this.query=a,this.cache=b,this.queryMetadata=c,this.cacheConfig=d,b&&"all"===b.strategy()&&void 0===d&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [fS]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(a,b,c){if(void 0===this.cache||fT(this.cache,p$)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await c()}catch(c){throw new iU(a,b,c)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[a]=await Promise.all([c(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return a}catch(c){throw new iU(a,b,c)}if(!this.cacheConfig)try{return await c()}catch(c){throw new iU(a,b,c)}if("select"===this.queryMetadata.type){let d=await this.cache.get(this.cacheConfig.tag??await p_(a,b),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===d){let d;try{d=await c()}catch(c){throw new iU(a,b,c)}return await this.cache.put(this.cacheConfig.tag??await p_(a,b),d,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),d}return d}try{return await c()}catch(c){throw new iU(a,b,c)}}}class p1{constructor(a){this.dialect=a}static [fS]="PgSession";execute(a,b){return gg("drizzle.operation",()=>gg("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class p2 extends mo{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [fS]="PgTransaction";rollback(){throw new iV}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),gA.raw(b.join(" "))}setTransaction(a){return this.session.execute(gA`set transaction ${this.getTransactionConfigSQL(a)}`)}}let p3={arrayMode:!1,fullResults:!0},p4={arrayMode:!0,fullResults:!0};class p5 extends p0{constructor(a,b,c,d,e,f,g,h,i){super(b,d,e,f),this.client=a,this.logger=c,this.fields=g,this._isResponseInArrayMode=h,this.customResultMapper=i,this.clientQuery=a.query??a}static [fS]="NeonHttpPreparedQuery";clientQuery;async execute(a={},b=this.authToken){let c=gE(this.query.params,a);this.logger.logQuery(this.query.sql,c);let{fields:d,clientQuery:e,query:f,customResultMapper:g}=this;if(!d&&!g)return this.queryWithCache(f.sql,c,async()=>e(f.sql,c,void 0===b?p3:{...p3,authToken:b}));let h=await this.queryWithCache(f.sql,c,async()=>await e(f.sql,c,void 0===b?p4:{...p4,authToken:b}));return this.mapResult(h)}mapResult(a){if(!this.fields&&!this.customResultMapper)return a;let b=a.rows;return this.customResultMapper?this.customResultMapper(b):b.map(a=>(function(a,b,c){let d={},e=a.reduce((a,{path:e,field:f},g)=>{let h;h=fT(f,fU)?f:fT(f,gv)?f.decoder:fT(f,ge)?f._.sql.decoder:f.sql.decoder;let i=a;for(let[a,j]of e.entries())if(a<e.length-1)j in i||(i[j]={}),i=i[j];else{let a=b[g],k=i[j]=null===a?null:h.mapFromDriverValue(a);if(c&&fT(f,fU)&&2===e.length){let a=e[0];a in d?"string"==typeof d[a]&&d[a]!==f.table[fW]&&(d[a]=!1):d[a]=null===k&&f.table[fW]}}return a},{});if(c&&Object.keys(d).length>0)for(let[a,b]of Object.entries(d))"string"!=typeof b||c[b]||(e[a]=null);return e})(this.fields,a,this.joinsNotNullableMap))}all(a={}){let b=gE(this.query.params,a);return this.logger.logQuery(this.query.sql,b),this.clientQuery(this.query.sql,b,void 0===this.authToken?p3:{...p3,authToken:this.authToken}).then(a=>a.rows)}values(a={},b){let c=gE(this.query.params,a);return this.logger.logQuery(this.query.sql,c),this.clientQuery(this.query.sql,c,{arrayMode:!0,fullResults:!0,authToken:b}).then(a=>a.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}}class p6 extends p1{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.clientQuery=a.query??a,this.logger=d.logger??new pY,this.cache=d.cache??new p$}static [fS]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(a,b,c,d,e,f,g){return new p5(this.client,a,this.logger,this.cache,f,g,b,d,e)}async batch(a){let b=[],c=[];for(let d of a){let a=d._prepare(),e=a.getQuery();b.push(a),c.push(this.clientQuery(e.sql,e.params,{fullResults:!0,arrayMode:a.isResponseInArrayMode()}))}return(await this.client.transaction(c,p4)).map((a,c)=>b[c].mapResult(a,!0))}async query(a,b){return this.logger.logQuery(a,b),await this.clientQuery(a,b,{arrayMode:!0,fullResults:!0})}async queryObjects(a,b){return this.clientQuery(a,b,{arrayMode:!1,fullResults:!0})}async count(a,b){return Number((await this.execute(a,b)).rows[0].count)}async transaction(a,b={}){throw Error("No transactions support in neon-http driver")}}class p7 extends p2{static [fS]="NeonHttpTransaction";async transaction(a){throw Error("No transactions support in neon-http driver")}}class p8{constructor(a,b,c={}){this.client=a,this.dialect=b,this.options=c,this.initMappers()}static [fS]="NeonHttpDriver";createSession(a){return new p6(this.client,this.dialect,a,{logger:this.options.logger,cache:this.options.cache})}initMappers(){pV.setTypeParser(pV.builtins.TIMESTAMPTZ,a=>a),pV.setTypeParser(pV.builtins.TIMESTAMP,a=>a),pV.setTypeParser(pV.builtins.DATE,a=>a),pV.setTypeParser(pV.builtins.INTERVAL,a=>a),pV.setTypeParser(1231,a=>a),pV.setTypeParser(1115,a=>a),pV.setTypeParser(1185,a=>a),pV.setTypeParser(1187,a=>a),pV.setTypeParser(1182,a=>a)}}function p9(a,b,c,d){return new Proxy(a,{get(a,e){let f=a[e];return"function"!=typeof f&&("object"!=typeof f||null===f)?f:d?p9(f,b,c):"query"===e?p9(f,b,c,!0):new Proxy(f,{apply(a,d,f){let g=a.call(d,...f);return"object"==typeof g&&null!==g&&"setToken"in g&&"function"==typeof g.setToken&&g.setToken(b),c(a,e,g)}})}})}class qa extends mo{static [fS]="NeonHttpDatabase";$withAuth(a){return this.authToken=a,p9(this,a,(b,c,d)=>"with"===c?p9(d,a,(a,b,c)=>c):d)}async batch(a){return this.session.batch(a)}}function qb(a,b={}){let c,d,e=new lT({casing:b.casing});if(!0===b.logger?c=new pX:!1!==b.logger&&(c=b.logger),b.schema){let a=function(a,b){1===Object.keys(a).length&&"default"in a&&!fT(a.default,gq)&&(a=a.default);let c={},d={},e={};for(let[f,g]of Object.entries(a))if(fT(g,gq)){let a=gr(g),b=d[a];for(let d of(c[a]=f,e[f]={tsName:f,dbName:g[gq.Symbol.Name],schema:g[gq.Symbol.Schema],columns:g[gq.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(g[gq.Symbol.Columns])))d.primary&&e[f].primaryKey.push(d);let h=g[gq.Symbol.ExtraConfigBuilder]?.(g[gq.Symbol.ExtraConfigColumns]);if(h)for(let a of Object.values(h))fT(a,kR)&&e[f].primaryKey.push(...a.columns)}else if(fT(g,lg)){let a,f=gr(g.table),h=c[f];for(let[c,i]of Object.entries(g.config(b(g.table))))if(h){let b=e[h];b.relations[c]=i,a&&b.primaryKey.push(...a)}else f in d||(d[f]={relations:{},primaryKey:a}),d[f].relations[c]=i}return{tables:e,tableNamesMap:c}}(b.schema,ln);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let f=new p8(a,e,{logger:c,cache:b.cache}).createSession(d),g=new qa(e,f,d);return g.$client=a,g.$cache=b.cache,g.$cache&&(g.$cache.invalidate=b.cache?.onMutate),g}function qc(...a){if("string"==typeof a[0])return qb(pK(a[0]),a[1]);if(function(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.schema;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.casing;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}(a[0])){let{connection:b,client:c,...d}=a[0];if(c)return qb(c,d);if("object"==typeof b){let{connectionString:a,...c}=b;return qb(pK(a,c),d)}return qb(pK(b),d)}return qb(a[0],a[1])}(qc||(qc={})).mock=function(a){return qb({},a)};let qd=BigInt(0x100000000-1),qe=BigInt(32);function qf(a,b=""){if(!Number.isSafeInteger(a)||a<0){let c=b&&`"${b}" `;throw Error(`${c}expected integer >= 0, got ${a}`)}}function qg(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function qh(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function qi(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}let qj=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a},qk=BigInt(0),ql=BigInt(1),qm=BigInt(2),qn=BigInt(7),qo=BigInt(256),qp=BigInt(113),qq=[],qr=[],qs=[];for(let a=0,b=ql,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],qq.push(2*(5*d+c)),qr.push((a+1)*(a+2)/2%64);let e=qk;for(let a=0;a<7;a++)(b=(b<<ql^(b>>qn)*qp)%qo)&qm&&(e^=ql<<(ql<<BigInt(a))-ql);qs.push(e)}let qt=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&qd),l:Number(a>>qe&qd)}:{h:0|Number(a>>qe&qd),l:0|Number(a&qd)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}(qs,!0),qu=qt[0],qv=qt[1],qw=(a,b,c)=>c>32?b<<c-32|a>>>64-c:a<<c|b>>>32-c,qx=(a,b,c)=>c>32?a<<c-32|b>>>64-c:b<<c|a>>>32-c;class qy{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor(a,b,c,d=!1,e=24){if(this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=d,this.rounds=e,qf(c,"outputLen"),!(0<a&&a<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){qj(this.state32),function(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=qw(f,g,1)^c[d],i=qx(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=qr[c],f=qw(b,e,d),g=qx(b,e,d),h=qq[c];b=a[h],e=a[h+1],a[h]=f,a[h+1]=g}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=qu[d],a[1]^=qv[d]}qi(c)}(this.state32,this.rounds),qj(this.state32),this.posOut=0,this.pos=0}update(a){qh(this),qg(a);let{blockLen:b,state:c}=this,d=a.length;for(let e=0;e<d;){let f=Math.min(b-this.pos,d-e);for(let b=0;b<f;b++)c[this.pos++]^=a[e++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){qh(this,!1),qg(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return qf(a),this.xofInto(new Uint8Array(a))}digestInto(a){qg(a,void 0,"digestInto() output");let b=this.outputLen;if(a.length<b)throw Error('"digestInto() output" expected to be of length >='+b);if(this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qi(this.state)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return(a||=new qy(b,c,d,f,e)).state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}let qz=((a,b,c,d={})=>(function(a,b={}){let c=(b,c)=>a(c).update(b).digest(),d=a(void 0);return c.outputLen=d.outputLen,c.blockLen=d.blockLen,c.create=b=>a(b),Object.assign(c,b),Object.freeze(c)})(()=>new qy(b,a,c),d))(6,72,64,{oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,10])});var qA=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qB=Math.ceil,qC=Math.floor,qD="[BigNumber Error] ",qE=qD+"Number primitive has more than 15 significant digits: ",qF=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function qG(a){var b=0|a;return a>0||a===b?b:b-1}function qH(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function qI(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function qJ(a,b,c,d){if(a<b||a>c||a!==qC(a))throw Error(qD+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function qK(a){var b=a.c.length-1;return qG(a.e/14)==b&&a.c[b]%2!=0}function qL(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function qM(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}var qN=function a(b){var c,d,e,f,g,h,i,j,k,l=z.prototype={constructor:z,toString:null,valueOf:null},m=new z(1),n=20,o=4,p=-7,q=21,r=-1e7,s=1e7,t=!1,u=1,v=0,w={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},x="0123456789abcdefghijklmnopqrstuvwxyz",y=!0;function z(a,b){var c,d,e,f,g,h,i,l,m=this;if(!(m instanceof z))return new z(a,b);if(null==b){if(a&&!0===a._isBigNumber){m.s=a.s,!a.c||a.e>s?m.c=m.e=null:a.e<r?m.c=[m.e=0]:(m.e=a.e,m.c=a.c.slice());return}if((h="number"==typeof a)&&0*a==0){if(m.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,g=a;g>=10;g/=10,f++);f>s?m.c=m.e=null:(m.e=f,m.c=[a]);return}l=String(a)}else{if(!qA.test(l=String(a)))return k(m,l,h);m.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(f=l.indexOf("."))>-1&&(l=l.replace(".","")),(g=l.search(/e/i))>0?(f<0&&(f=g),f+=+l.slice(g+1),l=l.substring(0,g)):f<0&&(f=l.length)}else{if(qJ(b,2,x.length,"Base"),10==b&&y)return D(m=new z(a),n+m.e+1,o);if(l=String(a),h="number"==typeof a){if(0*a!=0)return k(m,l,h,b);if(m.s=1/a<0?(l=l.slice(1),-1):1,z.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(qE+a)}else m.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(c=x.slice(0,b),f=g=0,i=l.length;g<i;g++)if(0>c.indexOf(d=l.charAt(g))){if("."==d){if(g>f){f=i;continue}}else if(!e&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){e=!0,g=-1,f=0;continue}return k(m,String(a),h,b)}h=!1,(f=(l=j(l,b,10,m.s)).indexOf("."))>-1?l=l.replace(".",""):f=l.length}for(g=0;48===l.charCodeAt(g);g++);for(i=l.length;48===l.charCodeAt(--i););if(l=l.slice(g,++i)){if(i-=g,h&&z.DEBUG&&i>15&&(a>0x1fffffffffffff||a!==qC(a)))throw Error(qE+m.s*a);if((f=f-g-1)>s)m.c=m.e=null;else if(f<r)m.c=[m.e=0];else{if(m.e=f,m.c=[],g=(f+1)%14,f<0&&(g+=14),g<i){for(g&&m.c.push(+l.slice(0,g)),i-=14;g<i;)m.c.push(+l.slice(g,g+=14));g=14-(l=l.slice(g)).length}else g-=i;for(;g--;l+="0");m.c.push(+l)}}else m.c=[m.e=0]}function A(a,b,c,d){var e,f,g,h,i;if(null==c?c=o:qJ(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=qH(a.c),i=1==d||2==d&&(g<=p||g>=q)?qL(i,g):qM(i,g,"0");else if(f=(a=D(new z(a),b,c)).e,h=(i=qH(a.c)).length,1==d||2==d&&(b<=f||f<=p)){for(;h<b;i+="0",h++);i=qL(i,f)}else if(b-=g+(2===d&&f>g),i=qM(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function B(a,b){for(var c,d,e=1,f=new z(a[0]);e<a.length;e++)(d=new z(a[e])).s&&(c=qI(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function C(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>s?a.c=a.e=null:c<r?a.c=[a.e=0]:(a.e=c,a.c=b),a}function D(a,b,c,d){var e,f,g,h,i,j,k,l=a.c;if(l){b:{for(e=1,h=l[0];h>=10;h/=10,e++);if((f=b-e)<0)f+=14,g=b,k=qC((i=l[j=0])/qF[e-g-1]%10);else if((j=qB((f+1)/14))>=l.length)if(d){for(;l.length<=j;l.push(0));i=k=0,e=1,f%=14,g=f-14+1}else break b;else{for(e=1,i=h=l[j];h>=10;h/=10,e++);f%=14,k=(g=f-14+e)<0?0:qC(i/qF[e-g-1]%10)}if(d=d||b<0||null!=l[j+1]||(g<0?i:i%qF[e-g-1]),d=c<4?(k||d)&&(0==c||c==(a.s<0?3:2)):k>5||5==k&&(4==c||d||6==c&&(f>0?g>0?i/qF[e-g]:0:l[j-1])%10&1||c==(a.s<0?8:7)),b<1||!l[0])return l.length=0,d?(b-=a.e+1,l[0]=qF[(14-b%14)%14],a.e=-b||0):l[0]=a.e=0,a;if(0==f?(l.length=j,h=1,j--):(l.length=j+1,h=qF[14-f],l[j]=g>0?qC(i/qF[e-g]%qF[g])*h:0),d)for(;;)if(0==j){for(f=1,g=l[0];g>=10;g/=10,f++);for(g=l[0]+=h,h=1;g>=10;g/=10,h++);f!=h&&(a.e++,1e14==l[0]&&(l[0]=1));break}else{if(l[j]+=h,1e14!=l[j])break;l[j--]=0,h=1}for(f=l.length;0===l[--f];l.pop());}a.e>s?a.c=a.e=null:a.e<r&&(a.c=[a.e=0])}return a}function E(a){var b,c=a.e;return null===c?a.toString():(b=qH(a.c),b=c<=p||c>=q?qL(b,c):qM(b,c,"0"),a.s<0?"-"+b:b)}return z.clone=a,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(qJ(c=a[b],0,1e9,b),n=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(qJ(c=a[b],0,8,b),o=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(qJ(c[0],-1e9,0,b),qJ(c[1],0,1e9,b),p=c[0],q=c[1]):(qJ(c,-1e9,1e9,b),p=-(q=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)qJ(c[0],-1e9,-1,b),qJ(c[1],1,1e9,b),r=c[0],s=c[1];else if(qJ(c,-1e9,1e9,b),c)r=-(s=c<0?-c:c);else throw Error(qD+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))t=c;else throw t=!c,Error(qD+"crypto unavailable");else t=c;else throw Error(qD+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(qJ(c=a[b],0,9,b),u=c),a.hasOwnProperty(b="POW_PRECISION")&&(qJ(c=a[b],0,1e9,b),v=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))w=c;else throw Error(qD+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(qD+b+" invalid: "+c);y="0123456789"==c.slice(0,10),x=c}}else throw Error(qD+"Object expected: "+a);return{DECIMAL_PLACES:n,ROUNDING_MODE:o,EXPONENTIAL_AT:[p,q],RANGE:[r,s],CRYPTO:t,MODULO_MODE:u,POW_PRECISION:v,FORMAT:w,ALPHABET:x}},z.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!z.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;b:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===qC(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break b}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==qC(c))break b;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(qD+"Invalid BigNumber: "+a)},z.maximum=z.max=function(){return B(arguments,-1)},z.minimum=z.min=function(){return B(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return qC(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},z.random=function(a){var b,d,e,f,g,h=0,i=[],j=new z(m);if(null==a?a=n:qJ(a,0,1e9),f=qB(a/14),t)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));h<f;)(g=131072*b[h]+(b[h+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[h]=d[0],b[h+1]=d[1]):(i.push(g%1e14),h+=2);h=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);h<f;)(g=(31&b[h])*0x1000000000000+0x10000000000*b[h+1]+0x100000000*b[h+2]+0x1000000*b[h+3]+(b[h+4]<<16)+(b[h+5]<<8)+b[h+6])>=9e15?crypto.randomBytes(7).copy(b,h):(i.push(g%1e14),h+=7);h=f/7}else throw t=!1,Error(qD+"crypto unavailable");if(!t)for(;h<f;)(g=c())<9e15&&(i[h++]=g%1e14);for(f=i[--h],a%=14,f&&a&&(g=qF[14-a],i[h]=qC(f/g)*g);0===i[h];i.pop(),h--);if(h<0)i=[e=0];else{for(e=-1;0===i[0];i.splice(0,1),e-=14);for(h=1,g=i[0];g>=10;g/=10,h++);h<14&&(e-=14-h)}return j.e=e,j.c=i,j},z.sum=function(){for(var a=1,b=arguments,c=new z(b[0]);a<b.length;)c=c.plus(b[a++]);return c},j=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,j,k,l,m,p,q,r,s=c.indexOf("."),t=n,u=o;for(s>=0&&(l=v,v=0,c=c.replace(".",""),p=(r=new z(d)).pow(c.length-s),v=l,r.c=b(qM(qH(p.c),p.e,"0"),10,e,a),r.e=r.c.length),k=l=(q=b(c,d,e,g?(h=x,a):(h=a,x))).length;0==q[--l];q.pop());if(!q[0])return h.charAt(0);if(s<0?--k:(p.c=q,p.e=k,p.s=f,q=(p=i(p,r,t,u,e)).c,m=p.r,k=p.e),s=q[j=k+t+1],l=e/2,m=m||j<0||null!=q[j+1],m=u<4?(null!=s||m)&&(0==u||u==(p.s<0?3:2)):s>l||s==l&&(4==u||m||6==u&&1&q[j-1]||u==(p.s<0?8:7)),j<1||!q[0])c=m?qM(h.charAt(1),-t,h.charAt(0)):h.charAt(0);else{if(q.length=j,m)for(--e;++q[--j]>e;)q[j]=0,j||(++k,q=[1].concat(q));for(l=q.length;!q[--l];);for(s=0,c="";s<=l;c+=h.charAt(q[s++]));c=qM(c,k,h.charAt(0))}return c}}(),i=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,A=d.s==e.s?1:-1,B=d.c,C=e.c;if(!B||!B[0]||!C||!C[0])return new z(!d.s||!e.s||(B?C&&B[0]==C[0]:!C)?NaN:B&&0==B[0]||!C?0*A:A/0);for(q=(p=new z(A)).c=[],A=f+(j=d.e-e.e)+1,h||(h=1e14,j=qG(d.e/14)-qG(e.e/14),A=A/14|0),k=0;C[k]==(B[k]||0);k++);if(C[k]>(B[k]||0)&&j--,A<0)q.push(1),l=!0;else{for(v=B.length,x=C.length,k=0,A+=2,(m=qC(h/(C[0]+1)))>1&&(C=a(C,m,h),B=a(B,m,h),x=C.length,v=B.length),u=x,s=(r=B.slice(0,x)).length;s<x;r[s++]=0);y=[0].concat(y=C.slice()),w=C[0],C[1]>=h/2&&w++;do{if(m=0,(i=b(C,r,x,s))<0){if(t=r[0],x!=s&&(t=t*h+(r[1]||0)),(m=qC(t/w))>1)for(m>=h&&(m=h-1),o=(n=a(C,m,h)).length,s=r.length;1==b(n,r,o,s);)m--,c(n,x<o?y:C,o,h),o=n.length,i=1;else 0==m&&(i=m=1),o=(n=C.slice()).length;if(o<s&&(n=[0].concat(n)),c(r,n,s,h),s=r.length,-1==i)for(;1>b(C,r,x,s);)m++,c(r,x<s?y:C,s,h),s=r.length}else 0===i&&(m++,r=[0]);q[k++]=m,r[0]?r[s++]=B[u]||0:(r=[B[u]],s=1)}while((u++<v||null!=r[0])&&A--)l=null!=r[0],q[0]||q.splice(0,1)}if(1e14==h){for(k=1,A=q[0];A>=10;A/=10,k++);D(p,f+(p.e=k+14*j-1)+1,g,l)}else p.e=j,p.r=+l;return p}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,g=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(a,b,c,i){var j,k=c?b:b.replace(h,"");if(g.test(k))a.s=isNaN(k)?null:k<0?-1:1;else{if(!c&&(k=k.replace(d,function(a,b,c){return j="x"==(c=c.toLowerCase())?16:"b"==c?2:8,i&&i!=j?a:b}),i&&(j=i,k=k.replace(e,"$1").replace(f,"0.$1")),b!=k))return new z(k,j);if(z.DEBUG)throw Error(qD+"Not a"+(i?" base "+i:"")+" number: "+b);a.s=null}a.c=a.e=null},l.absoluteValue=l.abs=function(){var a=new z(this);return a.s<0&&(a.s=1),a},l.comparedTo=function(a,b){return qI(this,new z(a,b))},l.decimalPlaces=l.dp=function(a,b){var c,d,e;if(null!=a)return qJ(a,0,1e9),null==b?b=o:qJ(b,0,8),D(new z(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-qG(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},l.dividedBy=l.div=function(a,b){return i(this,new z(a,b),n,o)},l.dividedToIntegerBy=l.idiv=function(a,b){return i(this,new z(a,b),0,1)},l.exponentiatedBy=l.pow=function(a,b){var c,d,e,f,g,h,i,j,k,l=this;if((a=new z(a)).c&&!a.isInteger())throw Error(qD+"Exponent not an integer: "+E(a));if(null!=b&&(b=new z(b)),h=a.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!a.c||!a.c[0])return k=new z(Math.pow(+E(l),h?a.s*(2-qK(a)):+E(a))),b?k.mod(b):k;if(i=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new z(NaN);(d=!i&&l.isInteger()&&b.isInteger())&&(l=l.mod(b))}else{if(a.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||h&&l.c[1]>=24e7:l.c[0]<8e13||h&&l.c[0]<=9999975e7)))return f=l.s<0&&qK(a)?-0:0,l.e>-1&&(f=1/f),new z(i?1/f:f);v&&(f=qB(v/14+2))}for(h?(c=new z(.5),i&&(a.s=1),j=qK(a)):j=(e=Math.abs(+E(a)))%2,k=new z(m);;){if(j){if(!(k=k.times(l)).c)break;f?k.c.length>f&&(k.c.length=f):d&&(k=k.mod(b))}if(e){if(0===(e=qC(e/2)))break;j=e%2}else if(D(a=a.times(c),a.e+1,1),a.e>14)j=qK(a);else{if(0==(e=+E(a)))break;j=e%2}l=l.times(l),f?l.c&&l.c.length>f&&(l.c.length=f):d&&(l=l.mod(b))}return d?k:(i&&(k=m.div(k)),b?k.mod(b):f?D(k,v,o,g):k)},l.integerValue=function(a){var b=new z(this);return null==a?a=o:qJ(a,0,8),D(b,b.e+1,a)},l.isEqualTo=l.eq=function(a,b){return 0===qI(this,new z(a,b))},l.isFinite=function(){return!!this.c},l.isGreaterThan=l.gt=function(a,b){return qI(this,new z(a,b))>0},l.isGreaterThanOrEqualTo=l.gte=function(a,b){return 1===(b=qI(this,new z(a,b)))||0===b},l.isInteger=function(){return!!this.c&&qG(this.e/14)>this.c.length-2},l.isLessThan=l.lt=function(a,b){return 0>qI(this,new z(a,b))},l.isLessThanOrEqualTo=l.lte=function(a,b){return -1===(b=qI(this,new z(a,b)))||0===b},l.isNaN=function(){return!this.s},l.isNegative=function(){return this.s<0},l.isPositive=function(){return this.s>0},l.isZero=function(){return!!this.c&&0==this.c[0]},l.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new z(a,b)).s,!g||!b)return new z(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new z(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new z(j[0]?this:3==o?-0:0)}if(h=qG(h),i=qG(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?C(a,j,i):(a.s=3==o?-1:1,a.c=[a.e=0],a)},l.modulo=l.mod=function(a,b){var c,d;return(a=new z(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==u?(d=a.s,a.s=1,c=i(this,a,0,3),a.s=d,c.s*=d):c=i(this,a,0,u),(a=this.minus(c.times(a))).c[0]||1!=u||(a.s=this.s),a):new z(this):new z(NaN)},l.multipliedBy=l.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this.c,q=(a=new z(a,b)).c;if(!p||!q||!p[0]||!q[0])return this.s&&a.s&&(!p||p[0]||q)&&(!q||q[0]||p)?(a.s*=this.s,p&&q?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=qG(this.e/14)+qG(a.e/14),a.s*=this.s,(i=p.length)<(l=q.length)&&(o=p,p=q,q=o,e=i,i=l,l=e),e=i+l,o=[];e--;o.push(0));for(e=l;--e>=0;){for(c=0,m=q[e]%1e7,n=q[e]/1e7|0,f=e+(g=i);f>e;)h=n*(j=p[--g]%1e7)+(k=p[g]/1e7|0)*m,c=((j=m*j+h%1e7*1e7+o[f]+c)/1e14|0)+(h/1e7|0)+n*k,o[f--]=j%1e14;o[f]=c}return c?++d:o.splice(0,1),C(a,o,d)},l.negated=function(){var a=new z(this);return a.s=-a.s||null,a},l.plus=function(a,b){var c,d=this.s;if(b=(a=new z(a,b)).s,!d||!b)return new z(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new z(d/0);if(!g[0]||!h[0])return h[0]?a:new z(g[0]?this:0*d)}if(e=qG(e),f=qG(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),C(a,g,f)},l.precision=l.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return qJ(a,1,1e9),null==b?b=o:qJ(b,0,8),D(new z(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},l.shiftedBy=function(a){return qJ(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},l.squareRoot=l.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,j=n+4,k=new z("0.5");if(1!==g||!f||!f[0])return new z(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+E(this)))||g==1/0?(((b=qH(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=qG((h+1)/2)-(h<0||h%2),c=new z(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new z(g+""),c.c[0]){for((g=(h=c.e)+j)<3&&(g=0);;)if(e=c,c=k.times(e.plus(i(this,e,j,1))),qH(e.c).slice(0,g)===(b=qH(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(D(c,c.e+n+2,1),a=!c.times(c).eq(this));break}if(!d&&(D(e,e.e+n+2,0),e.times(e).eq(this))){c=e;break}j+=4,g+=4,d=1}}return D(c,c.e+n+1,o,a)},l.toExponential=function(a,b){return null!=a&&(qJ(a,0,1e9),a++),A(this,a,b,1)},l.toFixed=function(a,b){return null!=a&&(qJ(a,0,1e9),a=a+this.e+1),A(this,a,b)},l.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=w;else if("object"!=typeof c)throw Error(qD+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",j=f[0],k=f[1],l=this.s<0,m=l?j.slice(1):j,n=m.length;if(h&&(e=g,g=h,h=e,n-=e),g>0&&n>0){for(e=n%g||g,j=m.substr(0,e);e<n;e+=g)j+=i+m.substr(e,g);h>0&&(j+=i+m.slice(e)),l&&(j="-"+j)}d=k?j+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?k.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):k):j}return(c.prefix||"")+d+(c.suffix||"")},l.toFraction=function(a){var b,c,d,e,f,g,h,j,k,l,n,p,q=this.c;if(null!=a&&(!(h=new z(a)).isInteger()&&(h.c||1!==h.s)||h.lt(m)))throw Error(qD+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+E(h));if(!q)return new z(this);for(b=new z(m),k=c=new z(m),d=j=new z(m),p=qH(q),f=b.e=p.length-this.e-1,b.c[0]=qF[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=s,s=1/0,h=new z(p),j.c[0]=0;l=i(h,b,0,1),1!=(e=c.plus(l.times(d))).comparedTo(a);)c=d,d=e,k=j.plus(l.times(e=k)),j=e,b=h.minus(l.times(e=b)),h=e;return e=i(a.minus(c),d,0,1),j=j.plus(e.times(k)),c=c.plus(e.times(d)),j.s=k.s=this.s,f*=2,n=1>i(k,d,f,o).minus(this).abs().comparedTo(i(j,c,f,o).minus(this).abs())?[k,d]:[j,c],s=g,n},l.toNumber=function(){return+E(this)},l.toPrecision=function(a,b){return null!=a&&qJ(a,1,1e9),A(this,a,b,2)},l.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=p||e>=q?qL(qH(c.c),e):qM(qH(c.c),e,"0"):10===a&&y?b=qM(qH((c=D(new z(c),n+e+1,o)).c),c.e,"0"):(qJ(a,2,x.length,"Base"),b=j(qM(qH(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},l.valueOf=l.toJSON=function(){return E(this)},l._isBigNumber=!0,l[Symbol.toStringTag]="BigNumber",l[Symbol.for("nodejs.util.inspect.custom")]=l.valueOf,null!=b&&z.set(b),z}();let qO=24,qP="undefined"!=typeof globalThis&&globalThis.crypto&&"function"==typeof globalThis.crypto.getRandomValues?()=>{let a=new Uint32Array(1);return globalThis.crypto.getRandomValues(a),a[0]/0x100000000}:Math.random,qQ=(a=4,b=qP)=>{let c="";for(;c.length<a;)c+=Math.floor(36*b()).toString(36);return c},qR=(a="")=>(function(a){let b=new qN(0);for(let c of a.values())b=b.multipliedBy(256).plus(c);return b})(qz(new TextEncoder().encode(a))).toString(36).slice(1),qS=Array.from({length:26},(a,b)=>String.fromCharCode(b+97)),qT=({globalObj:b=a.g,random:c=qP}={})=>{let d=Object.keys(b).toString();return qR(d.length?d+qQ(32,c):qQ(32,c)).substring(0,32)},qU=a=>()=>a++,qV=0x1c6b1f1f,qW=(({random:a=qP,counter:b=qU(Math.floor(a()*qV)),length:c=qO,fingerprint:d=qT({random:a})}={})=>{if(c>32)throw Error(`Length must be between 2 and 32. Received: ${c}`);return function(){let e=qS[Math.floor(a()*qS.length)],f=Date.now().toString(36),g=b().toString(36),h=qQ(c,a),i=`${f+h+g+d}`;return`${e+qR(i).substring(1,c)}`}})(),qX=kP("users",{id:kl("id").primaryKey().$defaultFn(()=>qW()),name:kl("name"),email:kl("email").notNull().unique(),emailVerified:kt("email_verified",{mode:"date"}),image:kl("image"),isAdmin:i7("is_admin").notNull().default(!1),createdAt:kt("created_at",{mode:"date"}).notNull().defaultNow(),updatedAt:kt("updated_at",{mode:"date"}).notNull().defaultNow()}),qY=kP("accounts",{userId:kl("user_id").notNull().references(()=>qX.id,{onDelete:"cascade"}),type:kl("type").notNull(),provider:kl("provider").notNull(),providerAccountId:kl("provider_account_id").notNull(),refresh_token:kl("refresh_token"),access_token:kl("access_token"),expires_at:jv("expires_at"),token_type:kl("token_type"),scope:kl("scope"),id_token:kl("id_token"),session_state:kl("session_state")},a=>({compoundKey:kQ({columns:[a.provider,a.providerAccountId]})})),qZ=kP("sessions",{sessionToken:kl("session_token").notNull().primaryKey(),userId:kl("user_id").notNull().references(()=>qX.id,{onDelete:"cascade"}),expires:kt("expires",{mode:"date"}).notNull()}),q$=kP("verification_tokens",{identifier:kl("identifier").notNull(),token:kl("token").notNull(),expires:kt("expires",{mode:"date"}).notNull()},a=>({compositePk:kQ({columns:[a.identifier,a.token]})})),q_=kP("produtos",{id:kl("id").primaryKey().$defaultFn(()=>qW()),nome:kl("nome").notNull(),descricao:kl("descricao"),preco:jW("preco",{precision:10,scale:2}).notNull(),cor:kl("cor"),linkCompra:kl("link_compra"),imagemUrl:kl("imagem_url"),categoria:kl("categoria"),quantidade:jv("quantidade").notNull().default(1),prioridade:jv("prioridade").notNull().default(0),createdAt:kt("created_at",{mode:"date"}).notNull().defaultNow(),updatedAt:kt("updated_at",{mode:"date"}).notNull().defaultNow()}),q0=kP("reservas",{id:kl("id").primaryKey().$defaultFn(()=>qW()),produtoId:kl("produto_id").notNull().unique().references(()=>q_.id,{onDelete:"cascade"}),nomeConvidado:kl("nome_convidado").notNull(),emailConvidado:kl("email_convidado"),whatsapp:kl("whatsapp"),mensagem:kl("mensagem"),confirmado:i7("confirmado").notNull().default(!1),createdAt:kt("created_at",{mode:"date"}).notNull().defaultNow()});a.s(["accounts",0,qY,"produtos",0,q_,"reservas",0,q0,"sessions",0,qZ,"users",0,qX,"verificationTokens",0,q$],37137);var q1=a.i(37137);let q2=ll(qX,({many:a})=>({accounts:a(qY),sessions:a(qZ)})),q3=ll(qY,({one:a})=>({user:a(qX,{fields:[qY.userId],references:[qX.id]})})),q4=ll(qZ,({one:a})=>({user:a(qX,{fields:[qZ.userId],references:[qX.id]})})),q5=ll(q_,({one:a})=>({reserva:a(q0,{fields:[q_.id],references:[q0.produtoId]})})),q6=ll(q0,({one:a})=>({produto:a(q_,{fields:[q0.produtoId],references:[q_.id]})}));a.s(["accountsRelations",0,q3,"produtosRelations",0,q5,"reservasRelations",0,q6,"sessionsRelations",0,q4,"usersRelations",0,q2],32068);var q7=a.i(32068);let q8=qc(pK(process.env.DATABASE_URL),{schema:{...q1,...q7}}),q9=process.env.ADMIN_EMAILS?.split(",")??[],{handlers:ra,auth:rb,signIn:rc,signOut:rd}=function(a){if("function"==typeof a){let b=async b=>{let c=await a(b);return fH(c),fE(fG(b),c)};return{handlers:{GET:b,POST:b},auth:fL(a,a=>fH(a)),signIn:async(b,c,d)=>{let e=await a(void 0);return fH(e),fP(b,c,d,e)},signOut:async b=>{let c=await a(void 0);return fH(c),fQ(b,c)},unstable_update:async b=>{let c=await a(void 0);return fH(c),fR(b,c)}}}fH(a);let b=b=>fE(fG(b),a);return{handlers:{GET:b,POST:b},auth:fL(a),signIn:(b,c,d)=>fP(b,c,d,a),signOut:b=>fQ(b,a),unstable_update:b=>fR(b,a)}}({adapter:function(a,b){if(fT(a,lK))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??iH("user",{id:iB("id",{length:255}).primaryKey().$defaultFn(()=>crypto.randomUUID()),name:iB("name",{length:255}),email:iB("email",{length:255}).unique(),emailVerified:is("emailVerified",{mode:"date",fsp:3}),image:iB("image",{length:255})}),c=a.accountsTable??iH("account",{userId:iB("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),type:iB("type",{length:255}).$type().notNull(),provider:iB("provider",{length:255}).notNull(),providerAccountId:iB("providerAccountId",{length:255}).notNull(),refresh_token:iB("refresh_token",{length:255}),access_token:iB("access_token",{length:255}),expires_at:hX("expires_at"),token_type:iB("token_type",{length:255}),scope:iB("scope",{length:255}),id_token:iB("id_token",{length:2048}),session_state:iB("session_state",{length:255})},a=>({compositePk:iI({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??iH("session",{sessionToken:iB("sessionToken",{length:255}).primaryKey(),userId:iB("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),expires:is("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??iH("verificationToken",{identifier:iB("identifier",{length:255}).notNull(),token:iB("token",{length:255}).notNull(),expires:is("expires",{mode:"date"}).notNull()},a=>({compositePk:iI({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??iH("authenticator",{credentialID:iB("credentialID",{length:255}).notNull().unique(),userId:iB("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:iB("providerAccountId",{length:255}).notNull(),credentialPublicKey:iB("credentialPublicKey",{length:255}).notNull(),counter:hX("counter").notNull(),credentialDeviceType:iB("credentialDeviceType",{length:255}).notNull(),credentialBackedUp:hm("credentialBackedUp").notNull(),transports:iB("transports",{length:255})},a=>({compositePk:iI({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=g0(c).id.defaultFn,[g]=await a.insert(c).values(f?e:{...e,id:d}).$returningId();return a.select().from(c).where(kU(c.id,g?g.id:d)).then(a=>a[0])},getUser:async b=>a.select().from(c).where(kU(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where(kU(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>(await a.insert(e).values(b),a.select().from(e).where(kU(e.sessionToken,b.sessionToken)).then(a=>a[0])),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where(kU(e.sessionToken,b)).innerJoin(c,kU(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");await a.update(c).set(b).where(kU(c.id,b.id));let[d]=await a.select().from(c).where(kU(c.id,b.id));if(!d)throw Error("No user found.");return d},updateSession:async b=>(await a.update(e).set(b).where(kU(e.sessionToken,b.sessionToken)),a.select().from(e).where(kU(e.sessionToken,b.sessionToken)).then(a=>a[0])),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,kU(d.userId,c.id)).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where(kU(e.sessionToken,b))},createVerificationToken:async b=>(await a.insert(f).values(b),a.select().from(f).where(kU(f.identifier,b.identifier)).then(a=>a[0])),async useVerificationToken(b){let c=await a.select().from(f).where(kW(kU(f.identifier,b.identifier),kU(f.token,b.token))).then(a=>a.length>0?a[0]:null);return c&&await a.delete(f).where(kW(kU(f.identifier,b.identifier),kU(f.token,b.token))),c},async deleteUser(b){await a.delete(c).where(kU(c.id,b))},async unlinkAccount(b){await a.delete(d).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where(kW(kU(d.provider,c),kU(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>(await a.insert(g).values(b),await a.select().from(g).where(kU(g.credentialID,b.credentialID)).then(a=>a[0]??null)),getAuthenticator:async b=>await a.select().from(g).where(kU(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>await a.select().from(g).where(kU(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){await a.update(g).set({counter:c}).where(kU(g.credentialID,b));let d=await a.select().from(g).where(kU(g.credentialID,b)).then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,b);if(fT(a,mo))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??kP("user",{id:kl("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:kl("name"),email:kl("email").unique(),emailVerified:kt("emailVerified",{mode:"date"}),image:kl("image")}),c=a.accountsTable??kP("account",{userId:kl("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:kl("type").$type().notNull(),provider:kl("provider").notNull(),providerAccountId:kl("providerAccountId").notNull(),refresh_token:kl("refresh_token"),access_token:kl("access_token"),expires_at:jv("expires_at"),token_type:kl("token_type"),scope:kl("scope"),id_token:kl("id_token"),session_state:kl("session_state")},a=>({compositePk:kQ({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??kP("session",{sessionToken:kl("sessionToken").primaryKey(),userId:kl("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:kt("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??kP("verificationToken",{identifier:kl("identifier").notNull(),token:kl("token").notNull(),expires:kt("expires",{mode:"date"}).notNull()},a=>({compositePk:kQ({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??kP("authenticator",{credentialID:kl("credentialID").notNull().unique(),userId:kl("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:kl("providerAccountId").notNull(),credentialPublicKey:kl("credentialPublicKey").notNull(),counter:jv("counter").notNull(),credentialDeviceType:kl("credentialDeviceType").notNull(),credentialBackedUp:i7("credentialBackedUp").notNull(),transports:kl("transports")},a=>({compositePK:kQ({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=g0(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().then(a=>a[0])},getUser:async b=>a.select().from(c).where(kU(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where(kU(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>a.insert(e).values(b).returning().then(a=>a[0]),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where(kU(e.sessionToken,b)).innerJoin(c,kU(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");let[d]=await a.update(c).set(b).where(kU(c.id,b.id)).returning();if(!d)throw Error("No user found.");return d},updateSession:async b=>a.update(e).set(b).where(kU(e.sessionToken,b.sessionToken)).returning().then(a=>a[0]),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,kU(d.userId,c.id)).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where(kU(e.sessionToken,b))},createVerificationToken:async b=>a.insert(f).values(b).returning().then(a=>a[0]),useVerificationToken:async b=>a.delete(f).where(kW(kU(f.identifier,b.identifier),kU(f.token,b.token))).returning().then(a=>a.length>0?a[0]:null),async deleteUser(b){await a.delete(c).where(kU(c.id,b))},async unlinkAccount(b){await a.delete(d).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where(kW(kU(d.provider,c),kU(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where(kU(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where(kU(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where(kU(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,b);if(fT(a,nD))return function(a,b){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??m5("user",{id:m2("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:m2("name"),email:m2("email").unique(),emailVerified:mP("emailVerified",{mode:"timestamp_ms"}),image:m2("image")}),c=a.accountsTable??m5("account",{userId:m2("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:m2("type").$type().notNull(),provider:m2("provider").notNull(),providerAccountId:m2("providerAccountId").notNull(),refresh_token:m2("refresh_token"),access_token:m2("access_token"),expires_at:mP("expires_at"),token_type:m2("token_type"),scope:m2("scope"),id_token:m2("id_token"),session_state:m2("session_state")},a=>({compositePk:nf({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??m5("session",{sessionToken:m2("sessionToken").primaryKey(),userId:m2("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:mP("expires",{mode:"timestamp_ms"}).notNull()}),e=a.verificationTokensTable??m5("verificationToken",{identifier:m2("identifier").notNull(),token:m2("token").notNull(),expires:mP("expires",{mode:"timestamp_ms"}).notNull()},a=>({compositePk:nf({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??m5("authenticator",{credentialID:m2("credentialID").notNull().unique(),userId:m2("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:m2("providerAccountId").notNull(),credentialPublicKey:m2("credentialPublicKey").notNull(),counter:mP("counter").notNull(),credentialDeviceType:m2("credentialDeviceType").notNull(),credentialBackedUp:mP("credentialBackedUp",{mode:"boolean"}).notNull(),transports:m2("transports")},a=>({compositePK:nf({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=g0(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().get()},getUser:async b=>await a.select().from(c).where(kU(c.id,b)).get()??null,getUserByEmail:async b=>await a.select().from(c).where(kU(c.email,b)).get()??null,createSession:async b=>a.insert(e).values(b).returning().get(),getSessionAndUser:async b=>await a.select({session:e,user:c}).from(e).where(kU(e.sessionToken,b)).innerJoin(c,kU(c.id,e.userId)).get()??null,async updateUser(b){if(!b.id)throw Error("No user id.");let d=await a.update(c).set(b).where(kU(c.id,b.id)).returning().get();if(!d)throw Error("User not found.");return d},updateSession:async b=>await a.update(e).set(b).where(kU(e.sessionToken,b.sessionToken)).returning().get()??null,async linkAccount(b){await a.insert(d).values(b).run()},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,kU(d.userId,c.id)).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId))).get();return e?.user??null},async deleteSession(b){await a.delete(e).where(kU(e.sessionToken,b)).run()},createVerificationToken:async b=>a.insert(f).values(b).returning().get(),useVerificationToken:async b=>await a.delete(f).where(kW(kU(f.identifier,b.identifier),kU(f.token,b.token))).returning().get()??null,async deleteUser(b){await a.delete(c).where(kU(c.id,b)).run()},async unlinkAccount(b){await a.delete(d).where(kW(kU(d.provider,b.provider),kU(d.providerAccountId,b.providerAccountId))).run()},getAccount:async(b,c)=>a.select().from(d).where(kW(kU(d.provider,c),kU(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where(kU(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where(kU(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where(kU(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}(a,b);throw Error(`Unsupported database type (${typeof a}) in Auth.js Drizzle adapter.`)}(q8,{usersTable:qX,accountsTable:qY,sessionsTable:qZ,verificationTokensTable:q$}),providers:[{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:{clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}}],callbacks:{signIn:async({user:a})=>(a.email&&q9.includes(a.email)&&await q8.update(qX).set({isAdmin:!0}).where(kU(qX.email,a.email)),!0),async session({session:a,user:b}){let c=await q8.query.users.findFirst({where:kU(qX.id,b.id)});return{...a,user:{...a.user,id:b.id,isAdmin:c?.isAdmin??!1}}}},pages:{signIn:"/login"},trustHost:!0});a.s(["auth",0,rb,"signIn",0,rc,"signOut",0,rd],9307);var re=a.i(7997),rf=a.i(717);function rg(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}var rh=Symbol.for("react.lazy"),ri=rf[" use ".trim().toString()];function rj(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===rh&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}var rk=((n=rf.forwardRef((a,b)=>{let{children:c,...d}=a;if(rj(c)&&"function"==typeof ri&&(c=ri(c._payload)),rf.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==rf.Fragment&&(h.ref=b?function(...a){return b=>{let c=!1,d=a.map(a=>{let d=rg(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():rg(a[b],null)}}}}(b,g):g),rf.cloneElement(c,h)}return rf.Children.count(c)>1?rf.Children.only(null):null})).displayName="Slot.SlotClone",j=n,(k=rf.forwardRef((a,b)=>{let{children:c,...d}=a;rj(c)&&"function"==typeof ri&&(c=ri(c._payload));let e=rf.Children.toArray(c),f=e.find(rm);if(f){let a=f.props.children,c=e.map(b=>b!==f?b:rf.Children.count(a)>1?rf.Children.only(null):rf.isValidElement(a)?a.props.children:null);return(0,re.jsx)(j,{...d,ref:b,children:rf.isValidElement(a)?rf.cloneElement(a,void 0,c):null})}return(0,re.jsx)(j,{...d,ref:b,children:c})})).displayName="Slot.Slot",k),rl=Symbol("radix.slottable");function rm(a){return rf.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===rl}function rn(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let ro=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,rp=(a=new Map,b=null,c)=>({nextPart:a,validators:b,classGroupId:c}),rq=[],rr=(a,b,c)=>{if(0==a.length-b)return c.classGroupId;let d=a[b],e=c.nextPart.get(d);if(e){let c=rr(a,b+1,e);if(c)return c}let f=c.validators;if(null===f)return;let g=0===b?a.join("-"):a.slice(b).join("-"),h=f.length;for(let a=0;a<h;a++){let b=f[a];if(b.validator(g))return b.classGroupId}},rs=(a,b)=>{let c=rp();for(let d in a)rt(a[d],c,d,b);return c},rt=(a,b,c,d)=>{let e=a.length;for(let f=0;f<e;f++)ru(a[f],b,c,d)},ru=(a,b,c,d)=>{"string"==typeof a?rv(a,b,c):"function"==typeof a?rw(a,b,c,d):rx(a,b,c,d)},rv=(a,b,c)=>{(""===a?b:ry(b,a)).classGroupId=c},rw=(a,b,c,d)=>{rz(a)?rt(a(d),b,c,d):(null===b.validators&&(b.validators=[]),b.validators.push({classGroupId:c,validator:a}))},rx=(a,b,c,d)=>{let e=Object.entries(a),f=e.length;for(let a=0;a<f;a++){let[f,g]=e[a];rt(g,ry(b,f),c,d)}},ry=(a,b)=>{let c=a,d=b.split("-"),e=d.length;for(let a=0;a<e;a++){let b=d[a],e=c.nextPart.get(b);e||(e=rp(),c.nextPart.set(b,e)),c=e}return c},rz=a=>"isThemeGetter"in a&&!0===a.isThemeGetter,rA=[],rB=(a,b,c,d,e)=>({modifiers:a,hasImportantModifier:b,baseClassName:c,maybePostfixModifierPosition:d,isExternal:e}),rC=/\s+/,rD=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=rD(a[d]))&&(c&&(c+=" "),c+=b);return c},rE=[],rF=a=>{let b=b=>b[a]||rE;return b.isThemeGetter=!0,b},rG=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rH=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rI=/^\d+\/\d+$/,rJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rO=a=>rI.test(a),rP=a=>!!a&&!Number.isNaN(Number(a)),rQ=a=>!!a&&Number.isInteger(Number(a)),rR=a=>a.endsWith("%")&&rP(a.slice(0,-1)),rS=a=>rJ.test(a),rT=()=>!0,rU=a=>rK.test(a)&&!rL.test(a),rV=()=>!1,rW=a=>rM.test(a),rX=a=>rN.test(a),rY=a=>!r$(a)&&!r4(a),rZ=a=>sb(a,sf,rV),r$=a=>rG.test(a),r_=a=>sb(a,sg,rU),r0=a=>sb(a,sh,rP),r1=a=>sb(a,sd,rV),r2=a=>sb(a,se,rX),r3=a=>sb(a,sj,rW),r4=a=>rH.test(a),r5=a=>sc(a,sg),r6=a=>sc(a,si),r7=a=>sc(a,sd),r8=a=>sc(a,sf),r9=a=>sc(a,se),sa=a=>sc(a,sj,!0),sb=(a,b,c)=>{let d=rG.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},sc=(a,b,c=!1)=>{let d=rH.exec(a);return!!d&&(d[1]?b(d[1]):c)},sd=a=>"position"===a||"percentage"===a,se=a=>"image"===a||"url"===a,sf=a=>"length"===a||"size"===a||"bg-size"===a,sg=a=>"length"===a,sh=a=>"number"===a,si=a=>"family-name"===a,sj=a=>"shadow"===a,sk=((a,...b)=>{let c,d,e,f,g=a=>{let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(rC),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=0===k.length?"":1===k.length?k[0]:f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.indexOf(s)>-1)continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f};return f=h=>{var i;let j;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=Object.create(null),d=Object.create(null),e=(e,f)=>{c[e]=f,++b>a&&(b=0,d=c,c=Object.create(null))};return{get(a){let b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set(a,b){a in c?c[a]=b:e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c=[],d=0,e=0,f=0,g=a.length;for(let h=0;h<g;h++){let g=a[h];if(0===d&&0===e){if(":"===g){c.push(a.slice(f,h)),f=h+1;continue}if("/"===g){b=h;continue}}"["===g?d++:"]"===g?d--:"("===g?e++:")"===g&&e--}let h=0===c.length?a:a.slice(f),i=h,j=!1;return h.endsWith("!")?(i=h.slice(0,-1),j=!0):h.startsWith("!")&&(i=h.slice(1),j=!0),rB(c,j,i,b&&b>f?b-f:void 0)};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.slice(a.length)):rB(rA,!1,b,void 0,!0)}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(i),sortModifiers:(j=new Map,i.orderSensitiveModifiers.forEach((a,b)=>{j.set(a,1e6+b)}),a=>{let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d],f="["===e[0],g=j.has(e);f||g?(c.length>0&&(c.sort(),b.push(...c),c=[]),b.push(e)):c.push(e)}return c.length>0&&(c.sort(),b.push(...c)),b}),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a;return rs(c,b)})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]")){var c;let b,d,e;return -1===(c=a).slice(1,-1).indexOf(":")?void 0:(d=(b=c.slice(1,-1)).indexOf(":"),(e=b.slice(0,d))?"arbitrary.."+e:void 0)}let d=a.split("-"),e=+(""===d[0]&&d.length>1);return rr(d,e,b)},getConflictingClassGroupIds:(a,b)=>{if(b){let b=d[a],e=c[a];if(b){if(e){let a=Array(e.length+b.length);for(let b=0;b<e.length;b++)a[b]=e[b];for(let c=0;c<b.length;c++)a[e.length+c]=b[c];return a}return b}return e||rq}return c[a]||rq}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)},(...a)=>f(((...a)=>{let b,c,d=0,e="";for(;d<a.length;)(b=a[d++])&&(c=rD(b))&&(e&&(e+=" "),e+=c);return e})(...a))})(()=>{let a=rF("color"),b=rF("font"),c=rF("text"),d=rF("font-weight"),e=rF("tracking"),f=rF("leading"),g=rF("breakpoint"),h=rF("container"),i=rF("spacing"),j=rF("radius"),k=rF("shadow"),l=rF("inset-shadow"),m=rF("text-shadow"),n=rF("drop-shadow"),o=rF("blur"),p=rF("perspective"),q=rF("aspect"),r=rF("ease"),s=rF("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),r4,r$],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[r4,r$,i],z=()=>[rO,"full","auto",...y()],A=()=>[rQ,"none","subgrid",r4,r$],B=()=>["auto",{span:["full",rQ,r4,r$]},rQ,r4,r$],C=()=>[rQ,"auto",r4,r$],D=()=>["auto","min","max","fr",r4,r$],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[rO,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[a,r4,r$],J=()=>[...u(),r7,r1,{position:[r4,r$]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",r8,rZ,{size:[r4,r$]}],M=()=>[rR,r5,r_],N=()=>["","none","full",j,r4,r$],O=()=>["",rP,r5,r_],P=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[rP,rR,r7,r1],S=()=>["","none",o,r4,r$],T=()=>["none",rP,r4,r$],U=()=>["none",rP,r4,r$],V=()=>[rP,r4,r$],W=()=>[rO,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[rS],breakpoint:[rS],color:[rT],container:[rS],"drop-shadow":[rS],ease:["in","out","in-out"],font:[rY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[rS],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[rS],shadow:[rS],spacing:["px",rP],text:[rS],"text-shadow":[rS],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",rO,r$,r4,q]}],container:["container"],columns:[{columns:[rP,r$,r4,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[rQ,"auto",r4,r$]}],basis:[{basis:[rO,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[rP,rO,"auto","initial","none",r$]}],grow:[{grow:["",rP,r4,r$]}],shrink:[{shrink:["",rP,r4,r$]}],order:[{order:[rQ,"first","last","none",r4,r$]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,r5,r_]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,r4,r0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rR,r$]}],"font-family":[{font:[r6,r$,b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,r4,r$]}],"line-clamp":[{"line-clamp":[rP,"none",r4,r0]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",r4,r$]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",r4,r$]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:[rP,"from-font","auto",r4,r_]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[rP,"auto",r4,r$]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",r4,r$]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",r4,r$]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},rQ,r4,r$],radial:["",r4,r$],conic:[rQ,r4,r$]},r9,r2]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:N()}],"rounded-s":[{"rounded-s":N()}],"rounded-e":[{"rounded-e":N()}],"rounded-t":[{"rounded-t":N()}],"rounded-r":[{"rounded-r":N()}],"rounded-b":[{"rounded-b":N()}],"rounded-l":[{"rounded-l":N()}],"rounded-ss":[{"rounded-ss":N()}],"rounded-se":[{"rounded-se":N()}],"rounded-ee":[{"rounded-ee":N()}],"rounded-es":[{"rounded-es":N()}],"rounded-tl":[{"rounded-tl":N()}],"rounded-tr":[{"rounded-tr":N()}],"rounded-br":[{"rounded-br":N()}],"rounded-bl":[{"rounded-bl":N()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...P(),"hidden","none"]}],"divide-style":[{divide:[...P(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...P(),"none","hidden"]}],"outline-offset":[{"outline-offset":[rP,r4,r$]}],"outline-w":[{outline:["",rP,r5,r_]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",k,sa,r3]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",l,sa,r3]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[rP,r_]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,sa,r3]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[rP,r4,r$]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[rP]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[r4,r$]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[rP]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",r4,r$]}],filter:[{filter:["","none",r4,r$]}],blur:[{blur:S()}],brightness:[{brightness:[rP,r4,r$]}],contrast:[{contrast:[rP,r4,r$]}],"drop-shadow":[{"drop-shadow":["","none",n,sa,r3]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",rP,r4,r$]}],"hue-rotate":[{"hue-rotate":[rP,r4,r$]}],invert:[{invert:["",rP,r4,r$]}],saturate:[{saturate:[rP,r4,r$]}],sepia:[{sepia:["",rP,r4,r$]}],"backdrop-filter":[{"backdrop-filter":["","none",r4,r$]}],"backdrop-blur":[{"backdrop-blur":S()}],"backdrop-brightness":[{"backdrop-brightness":[rP,r4,r$]}],"backdrop-contrast":[{"backdrop-contrast":[rP,r4,r$]}],"backdrop-grayscale":[{"backdrop-grayscale":["",rP,r4,r$]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rP,r4,r$]}],"backdrop-invert":[{"backdrop-invert":["",rP,r4,r$]}],"backdrop-opacity":[{"backdrop-opacity":[rP,r4,r$]}],"backdrop-saturate":[{"backdrop-saturate":[rP,r4,r$]}],"backdrop-sepia":[{"backdrop-sepia":["",rP,r4,r$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",r4,r$]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[rP,"initial",r4,r$]}],ease:[{ease:["linear","initial",r,r4,r$]}],delay:[{delay:[rP,r4,r$]}],animate:[{animate:["none",s,r4,r$]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,r4,r$]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:T()}],"rotate-x":[{"rotate-x":T()}],"rotate-y":[{"rotate-y":T()}],"rotate-z":[{"rotate-z":T()}],scale:[{scale:U()}],"scale-x":[{"scale-x":U()}],"scale-y":[{"scale-y":U()}],"scale-z":[{"scale-z":U()}],"scale-3d":["scale-3d"],skew:[{skew:V()}],"skew-x":[{"skew-x":V()}],"skew-y":[{"skew-y":V()}],transform:[{transform:[r4,r$,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:W()}],"translate-x":[{"translate-x":W()}],"translate-y":[{"translate-y":W()}],"translate-z":[{"translate-z":W()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",r4,r$]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",r4,r$]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[rP,r5,r_,r0]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function sl(...a){return sk(rn(a))}a.s(["cn",()=>sl],39138);let sm=(l="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",m={variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},a=>{var b;if((null==m?void 0:m.variants)==null)return rn(l,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:c,defaultVariants:d}=m,e=Object.keys(c).map(b=>{let e=null==a?void 0:a[b],f=null==d?void 0:d[b];if(null===e)return null;let g=ro(e)||ro(f);return c[b][g]}),f=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return rn(l,e,null==m||null==(b=m.compoundVariants)?void 0:b.reduce((a,b)=>{let{class:c,className:e,...g}=b;return Object.entries(g).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...d,...f}[b]):({...d,...f})[b]===c})?[...a,c,e]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)}),sn=rf.forwardRef(({className:a,variant:b,size:c,asChild:d=!1,...e},f)=>(0,re.jsx)(d?rk:"button",{className:sl(sm({variant:b,size:c,className:a})),ref:f,...e}));sn.displayName="Button",a.s(["Button",()=>sn],38904)}];

//# sourceMappingURL=_171e7780._.js.map